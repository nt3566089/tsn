/*
* ONEsLOGI Base Web Contents Ver 4.1.30
*/


/*
* このソースは基盤ソースです。変更は行わないで下さい。
*/


function getInitRowNum(a){return isNullOrUndefined(a)?commonInitRowNum.common:commonInitRowNum[a]}function isIE9LessEqual(){return!("function"==typeof history.pushState)}function getUuid(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+a()+a()+a()+a()+a()+a()}function getNextObject(a,b){for(var c=b?-1:1,d=-1,e=0,f=[],g=[],h=0;h<document.forms.length;h++){if(document.forms[h]==a.form)for(var i=0;i<document.forms[h].length;i++)if(document.forms[h][i]==a){d=e+i;break}f.push(e),c==-1?g.push(e+document.forms[h].length-1):g.push(e),e+=document.forms[h].length}for(var j,k,l=-1,m=(e+d+c)%e,n=0,o=0;;){for(;;){if(1==c&&g[n]<=m&&((n+c+g.length)%g.length==0||g[(n+c+g.length)%g.length]>m)){o=m-f[n];break}if(c==-1&&(0==n||g[(n+c+g.length)%g.length]<m)&&g[n]>=m){o=m-f[n];break}n=(n+c+g.length)%g.length}if(j=document.forms[n][o],k=j.style,"FIELDSET"!=j.tagName&&"hidden"!=j.type&&!j.disabled&&j.tabIndex!=-1&&$(j).is(":visible")&&("undefined"==typeof k||"hidden"!=k.visibility&&"none"!=k.display))return j;if(m=(m+c+e)%e,m==d)break;if(m==l)break;l==-1&&(l=m)}return a}function existsParentById(a,b,c){for(var d=null;;){if(d=a.parentElement,!d)return!1;if(d.id&&(d.id==b||d.id==c))return!0;a=d}}function centeringElment(a){var b=existsParentById(a,"content-footer-button","content-footer-control");if(!b){var c=document.getElementById("content-footer"),d=document.getElementById("navbar"),e=a.clientHeight,f=a.getBoundingClientRect(),g=0,h=0,i=0;c?(h=c.offsetTop,i=c.clientHeight):(h=window.innerHeight-e,i=0),g=d?d.clientHeight:0,(f.top<g||f.top>h-e)&&scrollTo(0,window.pageYOffset+f.top-(window.innerHeight-i)/2)}}function isNotEnterNextFocus(a){var b,c=a.type;switch("button"==c&&$(a).next("ul").length>0&&(c="select-multiple"),c){case"button":case"file":case"textarea":b=!0;break;case"radio":case"checkbox":case"text":case"select-one":case"select-multiple":b=!1;break;default:b=!1}return b}function isNotTabNextFocus(a){var b;switch(a.type){case"file":b=!0;break;default:b=!1}return b}function isNullOrUndefined(a){return"undefined"==typeof a||null===a}function createUTF8BytesFromString(a){var b,c,d,e,f,g=a.length,h=new Uint8Array(3*g),i=0,j=null;for(b=0;b<g;)for(d=a.charCodeAt(b++),55296<=d&&d<=57343&&(e=d,f=a.charCodeAt(b++),d=65536+1024*(e-55296)+(f-56320)),j=unicodeToUTF8Bytes(d,j),c=0;c<j.length;c++)h[i++]=j[c];return h.subarray(0,i)}function unicodeToUTF8Bytes(a,b){return b||(b={}),a<=127?(b.length=1,b[0]=a):a<=3447?(b.length=2,b[0]=192|a>>>6,b[1]=128|63&a):a<=65535?(b.length=3,b[0]=224|a>>>12,b[1]=128|a>>>6&63,b[2]=128|63&a):a<=1114111?(b.length=4,b[0]=240|a>>>18,b[1]=128|a>>>12&63,b[2]=128|a>>>6&63,b[3]=128|63&a):b.length=0,b}angular.module("oneslogiWeb.base.common",["AngularAPIClient","ngLocale","ui.validate","ngSanitize","wc.Directives","oneslogiWeb.date","tmh.dynamicLocale","ngCookies"]).config(["$locationProvider",function(a){a.hashPrefix("")}]).config(["tmhDynamicLocaleProvider",function(a){a.localeLocationPattern("base/js/angular-1.2.16/i18n/angular-locale_{{locale}}.js")}]).config(["$httpProvider",function(a){a.defaults.headers.get||(a.defaults.headers.get={}),a.defaults.headers.get.Pragma="no-cache",a.defaults.headers.get["Cache-Control"]="no-cache",a.defaults.headers.get["If-Modified-Since"]="Thu, 01 Jun 1970 00:00:00 GMT"}]).controller("NavCtrl",["$scope","$location","$window",function(a,b,c){a.isCollapsed=!0,a.targetWindow=function(a,b){return"1"==a?"_blank":"2"==a?b:"_self"},a.openLink=function(a,d,e){if("#"==a.substr(0,1))b.path(a.slice(1)).search({});else{var f;f="1"==d?"_blank":"2"==d?e:"_self",c.open(a,f)}}}]).controller("MainMenuCtrl",["api","$scope","alertMessage","owsCommon","$location","$window",function(a,b,c,d,e,f){var g={};a.info.query(g).then(function(a){if(0===a.status.statusCode){if(!b.bInfos){b.bInfos=[];for(var d=new Date,e=d.getFullYear()+("0"+(d.getMonth()+1)).slice(-2)+("0"+d.getDate()).slice(-2),f=0;f<a.data.length;f++)a.data[f].bInfo.infoStartDt<=e&&a.data[f].bInfo.infoEndDt>=e&&b.bInfos.push(a.data[f])}}else c.setOperationErrorMessage("infoMasterError",a.status)}),b.targetWindow=function(a,b){return"1"==a?"_blank":"2"==a?b:"_self"},b.openLink=function(a,b,c){if("#"==a.substr(0,1))e.path(a.slice(1)).search({});else{var d;d="1"==b?"_blank":"2"==b?c:"_self",f.open(a,d)}}}]).factory("alertMessage",["$rootScope","$log","$filter","$interval",function(a,b,c,d){var e=c("owfMessage"),f=function(){var a=Math.floor(1e3*Math.random()),b=new Date,c=b.getTime();return a+c.toString()},g=function(b,c){a.alerts||(a.alerts=[]);var d={};d.type=b,d.msg=c,d.id=f(),d.addDt=new Date,a.alerts.push(d)},h=function(){if(!a.modalView){var b=$("html, body");b.scrollTop(0).scrollLeft(0)}return d(function(){$(".alertblink").fadeOut(500,function(){$(this).fadeIn(500)})},1e3,5)};return{setErrorMessage:function(a){a||(a=e("unknownError",null,!1)),g("danger",a),h()},setErrorMessageByCode:function(a,b){var c=e(a,b,!1);c||(c=e("unknownError",null,!1)),g("danger",c),h()},setOperationErrorMessage:function(a,c){b.error(c);var d=e(a,null,!1),f=e(c.messageCode,c.messageReplaceValue,!1);g("danger",d+" "+f),h()},setWarningMessage:function(a){g("warning",a),h()},setWarningMessageByCode:function(a,b){var c=e(a,b,!1);g("warning",c),h()},setInfoMessage:function(a){g("info",a),h()},setInfoMessageByCode:function(a,b){var c=e(a,b,!1);g("info",c),h()},deleteAllInfo:function(){var b=a.alerts.length-1;for(i=b;i>=0;i--)"info"==a.alerts[i].type&&a.alerts.splice(i,1)},deleteAllWarning:function(){var b=a.alerts.length-1;for(i=b;i>=0;i--)"warning"==a.alerts[i].type&&a.alerts.splice(i,1)},deleteAllDanger:function(){var b=a.alerts.length-1;for(i=b;i>=0;i--)"danger"==a.alerts[i].type&&a.alerts.splice(i,1)},deleteAll:function(){a.alerts=[]},addModalAlert:function(b,c){a.alerts=[],a.modalAlerts||(a.modalAlerts={});for(var d in a.modalAlerts)a.modalAlerts[d]=!1;a.modalViews||(a.modalViews=[]),b.myName=c,a.modalViews.push(b),a.modalAlerts[c]=!0,a.modalView=!0},removeModalAlert:function(b){if(a.alerts=[],a.modalAlerts||(a.modalAlerts={}),delete a.modalAlerts[b],a.modalViews||(a.modalViews=[]),a.modalViews.pop(),0==Object.keys(a.modalAlerts).length&&(a.modalView=!1),a.modalViews.length>0){var c=a.modalViews[a.modalViews.length-1];c.myName&&(a.modalAlerts[c.myName]=!0)}}}}]).factory("api",["AngularAPIClient",function(a){return{screen:a.make([["query","GET","resources/base/screen"]]),item:a.make([["query","GET","resources/base/item"]]),column:a.make([["query","GET","resources/base/column"]]),message:a.make([["query","GET","resources/base/message"]]),menu:a.make([["query","GET","resources/base/menu"]]),info:a.make([["query","GET","resources/base/info"]]),culture:a.make([["query","GET","resources/base/culture"]]),session:a.make([["query","GET","resources/base/session"]]),system:a.make([["query","GET","resources/base/system"]]),terminal:a.make([["query","GET","resources/base/terminal"]])}}]).factory("owsSession",["api","$rootScope","$q","$cookies",function(a,b,c,d){return{setData:function(){var b=c.defer(),e=d.get("x-oneslogi-terminal-id"),f={uuid:e};return a.session.query(f).then(function(a){0===a.status.statusCode&&b.resolve()}),b.promise}}}]).factory("owsSystem",["api","$rootScope","$q","owsCommon",function(a,b,c,d){return{getData:function(){var d={},e=c.defer();return b.system||b.designMode?e.resolve("Already get SystemMaster"):a.system.query(d).then(function(a){if(0===a.status.statusCode)b.system||(b.system=a.data.bSystem,b.systemTitle=b.system.systemNm,b.userCd=a.data.bUser.userCd,b.userNm=a.data.bUser.userNm,b.authMode=a.data.authMode,b.showLiteLoginPwdMgt=a.data.showLiteLoginPwdMgt,b.userCanChangePassword=!1,"2"==a.data.authMode&&(b.userCanChangePassword=!0),b.userHasSelectableAutoPrintLayouts=a.data.userHasSelectableAutoPrintLayouts,b.hasTerminalMaster=a.data.hasTerminalMaster,b.utcTime=a.data.utcTime),e.resolve("Complete get SystemMaster");else{var c=a.status;c.name="systemMasterError",c.httpError=!1,b.connectionStatus.push(c),e.reject("Fail get SystemMaster")}}).catch(function(a,c){var d={};d.name="systemMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),e.reject("Fail get SystemMaster")}),e.promise},getUserCd:function(){return b.userCd},getUserNm:function(){return b.userNm},getAuthMode:function(){return b.authMode},getShowLiteLoginPwdMgt:function(){return b.showLiteLoginPwdMgt},getUtcTime:function(){return b.utcTime},setUtcTime:function(a){b.utcTime=a}}}]).factory("owsTerminal",["api","$rootScope","$q","$cookies",function(a,b,c,d){return{getData:function(){var e=c.defer();if(b.terminal||b.designMode)return e.resolve("Already get TerminalMaster"),e.promise;var f=d.get("x-oneslogi-terminal-id");if(!f)return e.resolve("UUID is undefined from cookie."),e.promise;var g={uuid:f};return a.terminal.query(g).then(function(a){if(0===a.status.statusCode)if(a.data.bTerminal){b.terminal=a.data.bTerminal,e.resolve("Complete get TerminalMaster");var c=new Date;c.setDate(c.getDate()+365),d.put("x-oneslogi-terminal-id",f,{expires:c})}else b.terminal={},e.resolve("Complete get TerminalMaster(Terminal not set)")}),e.promise},getTerminalCd:function(){return b.terminal&&b.terminal.terminalCd?b.terminal.terminalCd:null},getTerminalNm:function(){return b.terminal&&b.terminal.terminalNm?b.terminal.terminalNm:null},clear:function(){var d=c.defer(),e=!1;if(b.terminal&&b.terminal.terminalCd&&(e=!0),e){var f={uuid:null};a.session.query(f).then(function(a){0===a.status.statusCode&&d.resolve("Complete clear terminal")})}else d.resolve("Already cleared terminal");return b.terminal=void 0,d.promise}}}]).factory("owsMenu",["api","$rootScope","$q","owsCommon",function(a,b,c,d){return{getData:function(d){var e={};e.isSmartDevice=d;var f=c.defer();return b.bMenuGroup||b.designMode?f.resolve("Already get MenuMaster"):a.menu.query(e).then(function(a){if(0===a.status.statusCode){if(!b.bMenuGroup){a.data=a.data.filter(function(a){if(d){if("SD"==a.visibleType)return a}else if("PC"==a.visibleType)return a});for(var c=0;c<a.data.length;c++)0==a.data[c].bmenuList.length&&(a.data.splice(c,1),c-=1);b.bMenuGroup=a.data,b.visibleUserAutoPrintSetting=a.visibleUserAutoPrintSetting,b.visibleTerminalSetting=a.visibleTerminalSetting}f.resolve("Complete get MenuMaster")}else{var e=a.status;e.name="menuMasterError",e.httpError=!1,b.connectionStatus.push(e),f.reject("Fail get MenuMaster")}}).catch(function(a,c){var d={};d.name="menuMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),f.reject("Fail get menuMaster")}),f.promise}}}]).factory("owsCulture",["api","$locale","$rootScope","$q","owsCommon","tmhDynamicLocale",function(a,b,c,d,e,f){var g={getData:function(){var b={},e=d.defer();return c.culture||c.designMode?e.resolve("Already get CultureMaster"):a.culture.query(b).then(function(a){if(0===a.status.statusCode)c.culture||(c.culture=a.data),g.setLocaleByBCulture(c.culture.bCulture).then(function(){e.resolve("Complete get CultureMaster")});else{var b=a.status;b.name="cultureMasterError",b.httpError=!1,c.connectionStatus.push(b),e.reject("Fail get CultureMaster")}}).catch(function(a,b){var d={};d.name="cultureMasterError",d.httpError=!0,d.statusCode=b,c.connectionStatus.push(d),e.reject("Fail get CultureMaster")}),e.promise},setLocaleByBCulture:function(a){var e=d.defer();return f.set(a.cultureCd.toLowerCase()).then(function(){var d=a.BCultureAttributeAsOne;if(d){var f=d.dateTimeFormatDisplay,g=d.dateFormatDisplay,h=d.timeFormatDisplay,j=d.numberFormatDisplay;if(f&&(b.DATETIME_FORMATS.medium=f,b.DATETIME_FORMATS.short=f),g&&(b.DATETIME_FORMATS.fullDate=g,b.DATETIME_FORMATS.longDate=g,b.DATETIME_FORMATS.mediumDate=g,b.DATETIME_FORMATS.shortDate=g),h&&(b.DATETIME_FORMATS.mediumTime=g,b.DATETIME_FORMATS.shortTime=g),j){var k=j.split(b.NUMBER_FORMATS.DECIMAL_SEP),l=0,m=0,n=0,o=!1,p=!1,q=!1;for(i=k[0].length-1;0<=i;i--){var r=k[0].charAt(i);if("0"==r)o||n++,p?l++:m++;else if("#"==r)o=!0,p?l++:m++;else{if(r!=b.NUMBER_FORMATS.GROUP_SEP)break;if(p){q=!0;break}p=!0}}if(q?b.NUMBER_FORMATS.PATTERNS[0].gSize=l:b.NUMBER_FORMATS.PATTERNS[0].gSize=m,b.NUMBER_FORMATS.PATTERNS[0].lgSize=m,b.NUMBER_FORMATS.PATTERNS[0].minInt=n,2==k.length){var s=0,t=0,u=!1;for(i=0;i<k[1].length;i++){var r=k[1].charAt(i);if("0"==r)s++,u||t++;else{if("#"!=r)break;u=!0,s++}}b.NUMBER_FORMATS.PATTERNS[0].maxFrac=s,b.NUMBER_FORMATS.PATTERNS[0].minFrac=t}else b.NUMBER_FORMATS.PATTERNS[0].maxFrac=0,b.NUMBER_FORMATS.PATTERNS[0].minFrac=0}}c.dateFormatDisp=b.DATETIME_FORMATS.shortDate,c.dateFormat=b.DATETIME_FORMATS.shortDate,c.timeFormat="hh:mm";var v=c.dateFormat.indexOf("y");0<=v&&(c.dateFormat=c.dateFormat.replaceAll("y",""),c.dateFormat=c.dateFormat.slice(0,v)+"yyyy"+c.dateFormat.slice(v));var w=c.dateFormat.indexOf("M");0<=w&&(c.dateFormat=c.dateFormat.replaceAll("M",""),c.dateFormat=c.dateFormat.slice(0,w)+"MM"+c.dateFormat.slice(w));var x=c.dateFormat.indexOf("d");0<=x&&(c.dateFormat=c.dateFormat.replaceAll("d",""),c.dateFormat=c.dateFormat.slice(0,x)+"dd"+c.dateFormat.slice(x)),e.resolve("Complete set Locale.")},function(){e.reject("Fail set Locale.")}),e.promise}};return g}]).factory("owsMessage",["api","$rootScope","$q","owsCommon",function(a,b,c,d){return{getData:function(){var d={},e=c.defer();return b.message||b.designMode?e.resolve("Already get MessageMaster"):a.message.query(d).then(function(a){if(0===a.status.statusCode)b.message||(b.message=a.data),e.resolve("Complete get MessageMaster");else{var c=a.status;c.name="messageMasterError",c.httpError=!1,b.connectionStatus.push(c),e.reject("Fail get MessageMaster")}}).catch(function(a,c){var d={};d.name="messageMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),e.reject("Fail get MessageMaster")}),e.promise}}}]).factory("owsScreen",["api","$rootScope","$q","owsCommon",function(a,b,c,d){return{getData:function(d,e){if(!b.designMode){if("undefined"!=typeof b.screen&&"undefined"!=typeof b.screen[d]){if(e)return;return b.screen[d]&&(b.screen[d].screenNm?b.screenTitle=b.screen[d].screenNm:b.screenTitle=d),b.screenCd=d,void b.$broadcast("updateHeader",b.screenTitle)}var f={};f.screenCd=d;var g=c.defer();return a.screen.query(f).then(function(a){if(0===a.status.statusCode)b.screen||(b.screen={}),a.data[d]?"0"==a.data[d].bScreen.visible?b.$broadcast("accessDisableToScreenMessage"):(b.screen[d]=a.data[d].bScreen,a.data[d].bDict&&(b.screen[d].screenNm=a.data[d].bDict.dictNm),b.screen[d].screenNm?e||(b.screenTitle=b.screen[d].screenNm):e||(b.screenTitle=d)):(b.screen[d]={},e||(b.screenTitle=d)),b.screenCd=d,g.resolve("Complete get ScreenMaster");else{var c=a.status;c.name="screenMasterError",c.httpError=!1,b.connectionStatus.push(c),g.reject("Fail get ScreenMaster")}}).catch(function(a,c){var d={};d.name="screenMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),g.reject("Fail get ScreenMaster")}),g.promise}}}}]).factory("owsItem",["api","$rootScope","$q","$filter","owsCommon",function(a,b,c,d,e){return{getData:function(e){if(!b.designMode&&("undefined"==typeof b.screen||"undefined"==typeof b.screen[e])){var f={};f.screenCd=e;var g=c.defer();return a.item.query(f).then(function(a){if(0===a.status.statusCode){if(b.item||(b.item={}),b.item[e]||(b.item[e]={}),a.data){var c=a.data;for(var f in c)if(b.item[e][f]||(b.item[e][f]={}),c[f].bDict&&(b.item[e][f].itemNm=c[f].bDict.dictNm),c[f].bItem.textAlign&&("left"===c[f].bItem.textAlign?b.item[e][f].textAlign="leftText":"center"===c[f].bItem.textAlign?b.item[e][f].textAlign="centerText":"right"===c[f].bItem.textAlign&&(b.item[e][f].textAlign="rightText")),"1"==c[f].bItem.editable?b.item[e][f].editable=!0:"0"==c[f].bItem.editable&&(b.item[e][f].editable=!1),"1"==c[f].bItem.visible?b.item[e][f].visible=!0:"0"==c[f].bItem.visible&&(b.item[e][f].visible=!1),b.item[e][f].defaultVisible=b.item[e][f].visible,"1"==c[f].bItem.displayRequired?b.item[e][f].displayRequired=!0:"0"==c[f].bItem.displayRequired&&(b.item[e][f].displayRequired=!1),b.item[e][f].visible){if("1"==c[f].bItem.necessary?b.item[e][f].necessary=!0:"0"==c[f].bItem.necessary&&(b.item[e][f].necessary=!1),c[f].bItemValid.inputLimit&&(b.item[e][f].inputLimit=c[f].bItemValid.inputLimit),c[f].bItemValid.limitMessageCd){var h=d("owfMessage"),i=h(c[f].bItemValid.limitMessageCd);i&&i!=c[f].bItemValid.limitMessageCd||(i=h("patternError")),b.item[e][f].message=i}null!==c[f].bItemValid.minChars&&(b.item[e][f].minChars=c[f].bItemValid.minChars),null!==c[f].bItemValid.maxChars&&(b.item[e][f].maxChars=c[f].bItemValid.maxChars),null!==c[f].bItemValid.minNumber&&(b.item[e][f].minNumber=c[f].bItemValid.minNumber),null!==c[f].bItemValid.maxNumber&&(b.item[e][f].maxNumber=c[f].bItemValid.maxNumber),null!==c[f].bItemValid.integerLength&&(b.item[e][f].integerLength=c[f].bItemValid.integerLength),null!==c[f].bItemValid.decimalLength&&(b.item[e][f].decimalLength=c[f].bItemValid.decimalLength)}}g.resolve("Complete get ItemMaster")}else{var j=a.status;j.name="itemMasterError",j.httpError=!1,b.connectionStatus.push(j),g.reject("Fail get ItemMaster")}}).catch(function(a,c){var d={};d.name="itemMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),g.reject("Fail get ItemMaster")}),g.promise}}}}]).factory("owsColumn",["api","$rootScope","$q","owsCommon",function(a,b,c,d){return{getData:function(d){if(!b.designMode&&("undefined"==typeof b.screen||"undefined"==typeof b.screen[d])){var e={};e.screenCd=d;var f=c.defer();return a.column.query(e).then(function(a){if(0===a.status.statusCode)b.column||(b.column={}),b.column[d]||(b.column[d]=a.data),f.resolve("Complete get ColumnMaster");else{var c=a.status;c.name="columnMasterError",c.httpError=!1,b.connectionStatus.push(c),f.reject("Fail get ColumnMaster")}}).catch(function(a,c){var d={};d.name="columnMasterError",d.httpError=!0,d.statusCode=c,b.connectionStatus.push(d),f.reject("Fail get ColumnMaster")}),f.promise}}}}]).factory("owsMaster",function(){return{setMaster:function(a,b,c){c.item||(c.item={}),c.item[a.screenCd]||(c.item[a.screenCd]={}),c.item[a.screenCd][b.attr("id")]||(c.item[a.screenCd][b.attr("id")]={}),null==c.item[a.screenCd][b.attr("id")].itemNm&&(c.designMode?b.attr("label-text")&&(c.item[a.screenCd][b.attr("id")].itemNm=b.attr("label-text")):c.item[a.screenCd][b.attr("id")].itemNm="★項目名称未定義★"),null==c.item[a.screenCd][b.attr("id")].editable&&(c.designMode?c.item[a.screenCd][b.attr("id")].editable=!0:c.item[a.screenCd][b.attr("id")].editable=!1),null==c.item[a.screenCd][b.attr("id")].visible&&(c.item[a.screenCd][b.attr("id")].visible=!0),null==c.item[a.screenCd][b.attr("id")].textAlign&&(c.item[a.screenCd][b.attr("id")].textAlign=""),null==c.item[a.screenCd][b.attr("id")].necessary&&(c.item[a.screenCd][b.attr("id")].necessary=""),null==c.item[a.screenCd][b.attr("id")].inputLimit&&(c.item[a.screenCd][b.attr("id")].inputLimit=""),null==c.item[a.screenCd][b.attr("id")].message&&(c.item[a.screenCd][b.attr("id")].message=""),null==c.item[a.screenCd][b.attr("id")].minNumber&&(c.item[a.screenCd][b.attr("id")].minNumber=""),null==c.item[a.screenCd][b.attr("id")].maxNumber&&(c.item[a.screenCd][b.attr("id")].maxNumber=""),null==c.item[a.screenCd][b.attr("id")].integerLength&&(c.item[a.screenCd][b.attr("id")].integerLength=""),null==c.item[a.screenCd][b.attr("id")].decimalLength&&(c.item[a.screenCd][b.attr("id")].decimalLength=""),null==a.oneslogi&&(a.oneslogi={}),null==a.oneslogi[b.attr("id")]&&(a.oneslogi[b.attr("id")]={},a.oneslogi[b.attr("id")].editable=!0,a.oneslogi[b.attr("id")].show=!0),null==a.oneslogi[b.attr("id")].optionMessage&&(a.oneslogi[b.attr("id")].optionMessage={},a.oneslogi[b.attr("id")].optionMessage.show=!1,a.oneslogi[b.attr("id")].optionMessage.message="")},setMasterMultiText:function(a,b,c,d,e){c.item||(c.item={}),c.item[a.screenCd]||(c.item[a.screenCd]={}),c.item[a.screenCd][d]||(c.item[a.screenCd][d]={}),null==c.item[a.screenCd][d].itemNm&&(c.designMode?b.attr("label-text")&&(c.item[a.screenCd][d].itemNm=b.attr("label-text")):c.item[a.screenCd][d].itemNm="★項目名称未定義★"),null==c.item[a.screenCd][d].editable&&(c.designMode?c.item[a.screenCd][d].editable=!0:c.item[a.screenCd][d].editable=!1),null==c.item[a.screenCd][d].visible&&(c.item[a.screenCd][d].visible=!0),null==c.item[a.screenCd][d].textAlign&&(c.item[a.screenCd][d].textAlign=""),null==c.item[a.screenCd][d].necessary&&(c.item[a.screenCd][d].necessary=""),null==c.item[a.screenCd][d].inputLimit&&(c.item[a.screenCd][d].inputLimit=""),null==c.item[a.screenCd][d].message&&(c.item[a.screenCd][d].message=""),null==c.item[a.screenCd][d].minNumber&&(c.item[a.screenCd][d].minNumber=""),null==c.item[a.screenCd][d].maxNumber&&(c.item[a.screenCd][d].maxNumber=""),null==c.item[a.screenCd][d].integerLength&&(c.item[a.screenCd][d].integerLength=""),null==c.item[a.screenCd][d].decimalLength&&(c.item[a.screenCd][d].decimalLength=""),null==a.oneslogi&&(a.oneslogi={});for(var f=0;f<e.length;f++){var g=e[f];null==a.oneslogi[g]&&(a.oneslogi[g]={},a.oneslogi[g].defaultEditable=c.item[a.screenCd][d].editable,a.oneslogi[g].editable=!0,a.oneslogi[g].show=!0),null==a.oneslogi[g].optionMessage&&(a.oneslogi[g].optionMessage={},a.oneslogi[g].optionMessage.show=!1,a.oneslogi[g].optionMessage.message="")}}}}).factory("owsCommon",["$filter","owsDateCommon","$rootScope","$log","$timeout","$location","$locale",function(a,b,c,d,e,f,g){return{debugLog:function(a){d.debug(a)},convertMessage:function(b,c,d){var e,f=a("owfMessage");return e=c?f(b,c,d):f(b,null,d),e=e.replaceAll("<br>","\n")},viewAlert:function(a,b,c){null==c?alert(this.convertMessage(a,b,!1)):alert(c(a,b,!1))},viewConfirm:function(a,b,c){return null==c?confirm(this.convertMessage(a,b,!1)):confirm(c(a,b,!1))},viewInfoAndHistoryBack:function(a,b){var c=this.convertMessage;return e(function(){alert(c(a,b,!1)),history.back()},500)},viewInfoAndMovePage:function(a,b,c,d){var g=this.convertMessage;return e(function(){alert(g(c,d,!1)),f.path(a).search(b)},500)},viewPdfBlankWindow:function(){return window.open(commonPreviewUrl)},viewPdf:function(a,b){return(null==a||a.closed)&&(a=window.open(commonPreviewUrl)),a.location.replace(b),a=null,null},viewPdfCloseWindow:function(a){return a.close(),a.opener.focus(),a=null,null},syncExec:function(a,b){var c=Number(b);return isNaN(c)&&(c=0),e(a,c)},setOutputPagingSize:function(a){a.pageSize=0},setPagingData:function(a,b,c,d){a.paging=b,a.paging.pageSize=c,a.paging.currentPage=d},getInputOptions:function(a,b,c,d,e,f,g){var h={};return h.data={},h.data.input={},h.data.input.gridModelNm=b,h.data.input.columnDefs=a,arguments.length>2&&(h.data.input.fileType=c),arguments.length>3&&(h.data.input.encoding=d),arguments.length>4&&(h.data.input.delimiterChar=e),arguments.length>5&&(h.data.input.lineCode=f),arguments.length>6&&(h.data.input.readStartLine=g),h},setOutputOptions:function(a,b,d,e){b.enablePaging&&(a.paging={},this.setOutputPagingSize(a.paging)),a.output={},a.output.gridModelNm=d,a.output.downloadFileNm=e,a.output.columnDefs=[],a.output.author=c.systemTitle;for(var f=0,g=0;g<b.columnDefs.length;g++)b.columnDefs[g].visible&&(a.output.columnDefs[f]={},a.output.columnDefs[f].displayName=$.base64.encode(b.columnDefs[g].displayName,!0),a.output.columnDefs[f].field=b.columnDefs[g].field,a.output.columnDefs[f].visible=b.columnDefs[g].visible,a.output.columnDefs[f].colType=b.columnDefs[g].colType,f++)},getDotValue:function(a,b){for(var c,d,e=/\./,f=a,g=b.split(e);c=g.shift();){if(c.indexOf("[")<c.indexOf("]")?(d=c.substring(c.indexOf("[")+1,c.indexOf("]")),c=c.substring(0,c.indexOf("["))):d=null,f=f[c],!f)return null;if(d&&(f=f[parseInt(d)],!f))return null}return f},getDotValueNumber:function(a,b){for(var c,d,e=/\./,f=a,g=b.split(e);c=g.shift();){if(c.indexOf("[")<c.indexOf("]")?(d=c.substring(c.indexOf("[")+1,c.indexOf("]")),c=c.substring(0,c.indexOf("["))):d=null,f=f[c],isNullOrUndefined(f)||""===f)return null;if(d&&(f=f[parseInt(d)],isNullOrUndefined(f)||""===f))return null}return f},setDotValue:function(a,b,c){for(var d,e,f=/\./,g=a,h=b.split(f),i=0;i<h.length-1;i++){if(d=h[i],d.indexOf("[")<d.indexOf("]")?(e=d.substring(d.indexOf("[")+1,d.indexOf("]")),d=d.substring(0,d.indexOf("["))):e=null,g=g[d],!g)return null;if(e&&(g=g[parseInt(e)],!g))return null}g[h[h.length-1]]=c},dateToString:function(a){return b.dateToString(a,c.dateFormat)},stringToDate:function(a){return b.stringToDate(a,c.dateFormat)},stringDateFormat:function(a){return b.stringDateFormat(a,c.dateFormat)},dateRegExp:function(){return b.dateRegExp(c.dateFormat)},isDate:function(a,d){return b.isDate(a,c.dateFormat,d)},stringToDateType:function(a){if(null==a||"string"!=typeof a)return a;try{var b,c,d;b=parseInt(a.substr(0,4)),c=parseInt(a.substr(4,2))-1,d=parseInt(a.substr(6,2));var e=new Date(b,c,d);return e.getFullYear()==b&&e.getMonth()==c&&e.getDate()==d?e:a}catch(b){return a}},convertFromServerDateTimeToClientStrDateTime:function(b,d,e){if(b){var f=d;f||(f=g.DATETIME_FORMATS.medium);var h=e;return h||(h=c.utcTime),h?a("date")(b,f,h):a("date")(b,f)}return b},getDefaultValue:function(a,b){var c="classCd";2==arguments.length&&null!=arguments[1]&&""!=arguments[1]&&(c=arguments[1]);for(var d=0;d<a.length;d++)if("1"==a[d].defaultFlg)return a[d][c];return null},setFirstFocus:function(a){return e(function(){var b=document.forms[0];null!=a&&""!=a&&(b=document[a]);var c=$(b).find(":input");if(0!=c.length){var d=c[0],e=getNextObject(d,!1),f=getNextObject(e,!0);d=d==f?f:e,d.focus()}},300)},syncButtonExec:function(a){if(null!=a||""!=a){var b=$("#"+a),c=b[0],d={};return d.visibility=b.css("visibility"),d.display=b.css("display"),e(function(){"hidden"==c.type||c.disabled||"hidden"==d.visibility||"none"==d.display||c.click()})}},getDataCacheable:function(){if(arguments.length<2||arguments.length>3)throw new Error("当メソッドの引数は２つ、または３つ必要です。");var a,b,d;a=arguments[0],2==arguments.length?(b="query",d=arguments[1]):(b=arguments[1],d=arguments[2]);var e=a.$informations;if(b in e==!1)throw new Error("Apiに存在しないMethodが指定されました。["+b+"]");var f=a.$informations[b],g=angular.toJson(d);if(c.dataCache||(c.dataCache={}),f in c.dataCache){if(g in c.dataCache[f])return c.dataCache[f][g]}else c.dataCache[f]={};var h=a[b](d);return c.dataCache[f][g]=h,h},isModalOpen:function(){return!isNullOrUndefined(c.modalViews)&&c.modalViews.length>0},valueAllSelectOnFocus:function(a){return e(function(){"text"==a.target.type&&a.target.setSelectionRange(0,a.target.value.length)},0)},getDecimalZero:function(){return Decimal.ZERO=Decimal.ZERO||new Decimal(0),Decimal.ZERO},toInt:function(a){return new Decimal(a).trunc().toNumber()},isZero:function(a){return new Decimal(a).isZero()},isNotZero:function(a){return!new Decimal(a).isZero()},isZeroOrGreater:function(a){return new Decimal(a).gte(this.getDecimalZero())},isZeroOrLess:function(a){return new Decimal(a).lte(this.getDecimalZero())},isPositive:function(a){return new Decimal(a).gt(this.getDecimalZero())},isNegative:function(a){return new Decimal(a).lt(this.getDecimalZero())},isEqual:function(a,b){return new Decimal(a).eq(new Decimal(b))},isNotEqual:function(a,b){return!new Decimal(a).eq(new Decimal(b))},compare:function(a,b){return new Decimal(a).cmp(new Decimal(b))},isGreaterThan:function(a,b){return new Decimal(a).gt(new Decimal(b))},isLessThan:function(a,b){return new Decimal(a).lt(new Decimal(b))},isGreaterEqual:function(a,b){return new Decimal(a).gte(new Decimal(b))},isLessEqual:function(a,b){return new Decimal(a).lte(new Decimal(b))},add:function(a,b){for(var c=new Decimal(a),d=1;d<arguments.length;d++)c=c.add(new Decimal(arguments[d]));return c.toNumber()},subtract:function(a,b){for(var c=new Decimal(a),d=1;d<arguments.length;d++)c=c.sub(new Decimal(arguments[d]));return c.toNumber()},multiply:function(a,b){for(var c=new Decimal(a),d=1;d<arguments.length;d++)c=c.mul(new Decimal(arguments[d]));return c.toDP(3,Decimal.ROUND_DOWN).toNumber()},divide:function(a,b){return new Decimal(a).divToInt(new Decimal(b)).toNumber()},remainder:function(a,b){return new Decimal(a).mod(new Decimal(b)).toNumber()},truncated:function(a){return new Decimal(a).trunc().toNumber()},getMultiTextModels:function(a){var b=[];isNullOrUndefined(a)&&(a=4);for(var c=0;c<a;c++){var d={initFlg:!0,decimalExistFlg:null,listLength:null,defaultUnit:null,unit:null,value:null,unitNum:1,calcUnitNum:1};b.push(d)}return b},setMultiTextInit:function(a,b){for(var c=0,d=0;d<b.length;d++)a[d].initFlg=!1,a[d].decimalExistFlg=b[d].mshapeGrpDtl.mshapeGrp.decimalExistFlg,a[d].listLength=b.length,a[d].unit=b[d].mshapeGrpDtl.mshape.vdictByShapeUnitDictId.dictNm,(isNullOrUndefined(b[d].unitNum)||""==b[d].unitNum)&&(b[d].unitNum=1),a[d].unitNum=b[d].unitNum,0==d?(a[d].defaultUnit=b[d].mshapeGrpDtl.mshape.vdictByShapeUnitDictId.dictNm,c=b[d].unitNum):c=this.multiply(c,b[d].unitNum),a[d].calcUnitNum=c;return a},getUnitNumBreakdown:function(a,b,c){if(isNullOrUndefined(a)||""==a)return null;if(isNullOrUndefined(b)||""==b||0==b.length)return null;if(!isNullOrUndefined(b)&&1==b.length)return null;if(!isNullOrUndefined(c)&&"1"==c)return null;for(var d=angular.copy(b),e=[],f=null,g=null,h=null,i=0;i<d.length;i++)if(f=g,g=d[i].mshapeGrpDtl.mshape.vdictByShapeUnitDictId.dictNm,h=d[i].unitNum,0!=i){var j="1"+g+"="+h+f;e.push(j)}e.reverse();for(var k=null,l=0;l<e.length;l++)e.length==l+1?k+=e[l]:k=k+e[l]+", ";return k.replace(/null/g,"")},getCalcQty:function(a,b){for(var c=null,d=!0,e=!0,f=0;f<b.length;f++){var g=b[f].initFlg,h=b[f].calcUnitNum,i=b[f].value;if(isNullOrUndefined(i)||""===i||0<i.toString().indexOf("e")?i=0:e=!1,isNullOrUndefined(g)||(g?h=0:d=!1),!isFinite(h)||!isFinite(i))return a;if(this.isNegative(h)||this.isNegative(i))return a;c=0==f?i:this.add(c,this.multiply(h,i))}return d&&(c=a),e&&(c=null),c&&0<c.toString().indexOf("e")?a:c},getCalcAuxiliaryBreakdown:function(a,b,c,d){if(isNullOrUndefined(b)||""===b)return a[c][d].model[0].value=null,a[c][d].model[1].value=null,a[c][d].model[2].value=null,void(a[c][d].model[3].value=null);if(isFinite(b)&&"1"!=a[c][d].model[0].decimalExistFlg&&1!=a[c][d].model[0].listLength){var e=b.toString();if(0<e.indexOf("e")||0<parseFloat(e).toString().indexOf("e"))return a[c][d].model[0].value=null,a[c][d].model[1].value=null,a[c][d].model[2].value=null,void(a[c][d].model[3].value=null);if(e.indexOf(g.NUMBER_FORMATS.DECIMAL_SEP)!=-1)return a[c][d].model[0].value=null,a[c][d].model[1].value=null,a[c][d].model[2].value=null,void(a[c][d].model[3].value=null);var f=!1,h=null,i=null,j=null,k=null,l=null,m=null,n=null;a[c][d].model.reverse();for(var o=0;o<a[c][d].model.length;o++){var p=a[c][d].model[o].initFlg,q=a[c][d].model[o].calcUnitNum;switch(o){case 0:h=b,k=a[c][d].model[o].value;break;case 1:h=i,l=a[c][d].model[o].value;break;case 2:h=i,m=a[c][d].model[o].value;break;case 3:h=i,n=a[c][d].model[o].value}if(1!=f)if(isNullOrUndefined(p)||!p)if(isFinite(q)&&isFinite(h))if(this.isNegative(q)||this.isNegative(h))f=!0;else if(o==a[c][d].model.length-1)a[c][d].model[o].value=h;else{var i=this.remainder(h,q),j=this.divide(h,q);a[c][d].model[o].value=j}else f=!0;else i=h}1==f&&(a[c][d].model[0].value=k,a[c][d].model[1].value=l,a[c][d].model[2].value=m,a[c][d].model[3].value=n),a[c][d].model.reverse()}},getGridCalcAuxiliaryBreakdown:function(a,b,c,d,e){if(isNullOrUndefined(b)||""===b)return a[c][e][d].model[0].value=null,a[c][e][d].model[1].value=null,a[c][e][d].model[2].value=null,void(a[c][e][d].model[3].value=null);if(isFinite(b)&&"1"!=a[c][e][d].model[0].decimalExistFlg&&1!=a[c][e][d].model[0].listLength){var f=b.toString();if(0<f.indexOf("e")||0<parseFloat(f).toString().indexOf("e"))return a[c][e][d].model[0].value=null,a[c][e][d].model[1].value=null,a[c][e][d].model[2].value=null,void(a[c][e][d].model[3].value=null);if(f.indexOf(g.NUMBER_FORMATS.DECIMAL_SEP)!=-1)return a[c][e][d].model[0].value=null,a[c][e][d].model[1].value=null,a[c][e][d].model[2].value=null,void(a[c][e][d].model[3].value=null);var h=!1,i=null,j=null,k=null,l=null,m=null,n=null,o=null;a[c][e][d].model.reverse();for(var p=0;p<a[c][e][d].model.length;p++){var q=a[c][e][d].model[p].initFlg,r=a[c][e][d].model[p].calcUnitNum;switch(p){case 0:i=b,l=a[c][e][d].model[p].value;break;case 1:
i=j,m=a[c][e][d].model[p].value;break;case 2:i=j,n=a[c][e][d].model[p].value;break;case 3:i=j,o=a[c][e][d].model[p].value}if(1!=h)if(isNullOrUndefined(q)||!q)if(isFinite(r)&&isFinite(i))if(this.isNegative(r)||this.isNegative(i))h=!0;else if(p==a[c][e][d].model.length-1)a[c][e][d].model[p].value=i;else{var j=this.remainder(i,r),k=this.divide(i,r);a[c][e][d].model[p].value=k}else h=!0;else j=i}1==h&&(a[c][e][d].model[0].value=l,a[c][e][d].model[1].value=m,a[c][e][d].model[2].value=n,a[c][e][d].model[3].value=o),a[c][e][d].model.reverse()}}}}]).factory("owsHistory",["$location","$rootScope","$browser",function(a,b,c){return{replaceState:function(a){history.replaceState&&c.url(location.href,!0,angular.copy(a))},hasState:function(){return!(!b.popstate||!b.popstate.data)},popState:function(){if(b.popstate&&b.popstate.data){var a=b.popstate.data;return b.popstate={},angular.copy(a)}return null}}}]).filter("owfCurrency",["$filter","$locale",function(a,b){var c=a("currency"),d=b.NUMBER_FORMATS;return function(a,b){var e=c(a,b),f=e.indexOf(d.DECIMAL_SEP);return console.log(a,e),a>=0?e.substring(0,f):e.substring(0,f)+")"}}]).filter("owfMessage",["$rootScope","localMessage",function(a,b){function c(a,b){var c=Object.prototype.toString.call(b).slice(8,-1);return void 0!==b&&null!==b&&c===a}function d(d){var e=!0;if(a.message)if(a.message[d])if(a.message[d].bMessage.messageNm){var f;if(3==arguments.length&&arguments[2]===!1?f=a.message[d].bMessage.messageNm:(f=a.message[d].bMessage.messageAbbr,f||(f=a.message[d].bMessage.messageNm)),f){if(arguments.length>=2&&c("Array",arguments[1]))for(var g=0;g<arguments[1].length;g++)for(var h="["+g+"]";f!==f.replace(h,arguments[1][g]);)f=f.replace(h,arguments[1][g]);else arguments.length>=2&&null!=arguments[1]&&(f=f.replace("[0]",arguments[1]));for(;f!==f.replace("[/]","<br>");)f=f.replace("[/]","<br>");return f}e=!1}else e=!1;else e=!1;else e=!1;if(!e){if(b["ja-jp"][d]){var f=b["ja-jp"][d].bMessage.messageNm;if(f){if(2==arguments.length&&c("Array",arguments[1]))for(var g=0;g<arguments[1].length;g++)for(var h="["+g+"]";f!==f.replace(h,arguments[1][g]);)f=f.replace(h,arguments[1][g]);else if(3==arguments.length&&c("Array",arguments[1])&&c("Boolean",arguments[2]))for(var g=0;g<arguments[1].length;g++)for(var h="["+g+"]";f!==f.replace(h,arguments[1][g]);)f=f.replace(h,arguments[1][g]);else for(var g=1;g<arguments.length;g++)for(var h="["+(g-1)+"]";f!==f.replace(h,arguments[g]);)f=f.replace(h,arguments[g]);for(;f!==f.replace("[/]","<br>");)f=f.replace("[/]","<br>");return f}return d}return d}}return d.$stateful=!0,d}]).filter("owfValueFromKey",[function(){return function(a,b,c,d){for(var e=0;e<b.length;e++)if(b[e][c]==a)return b[e][d];return a}}]).filter("owfDateFromString",["$filter","$rootScope",function(a,b){return function(c){if(null!=c&&8==c.length){var d=parseInt(c.substr(0,4),10),e=parseInt(c.substr(4,2),10)-1,f=parseInt(c.substr(6,2),10),g=new Date(d,e,f),h=a("date");return h(g,b.dateFormatDisp)}return c}}]).filter("owfTimeFromString",["$filter","$rootScope",function(a,b){return function(a){return null!=a&&4==a.length?a.substr(0,2)+":"+a.substr(2,2):a}}]).filter("owfNumber",["$filter","$rootScope","$locale",function(a,b,c){return function(b){if(null==b||""==b)return b;if("string"!=typeof b&&isNaN(b))return b;"string"!=typeof b&&(b=""+b),b=b.replaceAll(c.NUMBER_FORMATS.GROUP_SEP,"");var d=parseFloat(b).toString();if(0<d.indexOf("e"))return b;var e,f,g=b.indexOf(c.NUMBER_FORMATS.DECIMAL_SEP);if(g==-1)e=b,f=null;else{e=b.substr(0,g),f=b.substr(g+1);for(var h=-1,i=f.length-1;i>=0&&"0"==f.substr(i,1);i--)h=i;h!=-1&&(f=f.substr(0,h))}var j=a("number"),k=j(e);if("0"==k&&f&&e.indexOf("-")!=-1&&(k="-0"),null!=f&&f>0){var l=(0+c.NUMBER_FORMATS.DECIMAL_SEP+f).split(c.NUMBER_FORMATS.DECIMAL_SEP)[1];k=f.length<l.length?k.split(c.NUMBER_FORMATS.DECIMAL_SEP)[0]+c.NUMBER_FORMATS.DECIMAL_SEP+l:k.split(c.NUMBER_FORMATS.DECIMAL_SEP)[0]+c.NUMBER_FORMATS.DECIMAL_SEP+f}return 0<k.toString().indexOf("e")?b:k}}]).filter("owfNoHTML",["$filter",function(a){return function(a){return null==a||"string"!=typeof a?a:a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}}]).filter("owfNewlines",["$filter","$sce",function(a,b){return function(a){return null==a||"string"!=typeof a?a:b.trustAsHtml(a.replace(/(\r\n|\n|\r)/g,"<br>"))}}]).directive("owdInfo",[function(){return{restrict:"E",scope:!1,replace:!0,transclude:!1,template:function(a,b){var c="";return c+='<span style="color:black;" class="help-block" ng-bind-html="'+b.ngModel+'"></span>'}}}]).directive("owdSpan",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){var c="";b.labelText;for(c+="<span>",c+=b.class?'<span id="'+b.id+'" ng-show="{1}" class="'+b.class+'">{{{4}}}</span>':'<span id="'+b.id+'" ng-show="{1}">{{{4}}}</span>',c+="</span>";c!=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)c=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return c=c.replace("{4}","item[screenCd]['"+b.id+"'].itemNm"),b.class="",c},controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdLabel",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){var c="";b.labelText;for(c+="<span>",c+='  <label id="'+b.id+'" ng-show="{1}" class="'+b.class+'">{{{4}}}</label>',c+="</span>";c!=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)c=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return c=c.replace("{4}","item[screenCd]['"+b.id+"'].itemNm"),b.class="",c},controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdScreen",["$rootScope",function(a){return{restrict:"A",scope:!1,priority:1e3,controller:["$scope","$element",function(b,c){if(b.screenCd=c.attr("owd-screen"),b.$ionicGoBack)b.$parent.hasOwnProperty("oneslogi")||(b.oneslogi?b.$parent.$parent.oneslogi={}:b.$parent.oneslogi={});else if(b.navbar===b.$root.$$childHead.navbar)b.$parent.oneslogi={};else{for(var d=b,e=b.$parent;e.$parent;)d=e,e=e.$parent;d.oneslogi={}}document.title=a.screenTitle}]}}]).factory("directiveControl",["$timeout",function(a){return{show:function(b,c,d){return a(function(){var a;a="object"==typeof c&&void 0!=c.length?c:[c];for(var e=0;e<a.length;e++)null==b.oneslogi[a[e]]&&(b.oneslogi[a[e]]={}),b.oneslogi[a[e]].show=d},0)},isShow:function(a,b){return null==a.oneslogi[b]&&(a.oneslogi[b]={}),null==a.oneslogi[b].show&&(a.oneslogi[b].show=!0),a.oneslogi[b].show},editable:function(b,c,d){return a(function(){var a;a="object"==typeof c&&void 0!=c.length?c:[c];for(var e=0;e<a.length;e++)null==b.oneslogi[a[e]]&&(b.oneslogi[a[e]]={}),b.oneslogi[a[e]].editable=d},0)},isEditable:function(a,b){return null==a.oneslogi[b]&&(a.oneslogi[b]={}),null==a.oneslogi[b].editable&&(a.oneslogi[b].editable=!0),a.oneslogi[b].editable},isDefaultEditable:function(a,b){return null==a.oneslogi[b]&&(a.oneslogi[b]={}),null==a.oneslogi[b].defaultEditable&&(a.oneslogi[b].defaultEditable=!0),a.oneslogi[b].defaultEditable},firstErrorOnFocus:function(b){var c=!0,d=function(){b=b.replace(".","\\.");var e=$("#"+b).find("ng-form");if(e.length>0)for(var f=0;f<e.length;f++)if(e[f].className.indexOf("invalid")>-1){var g=angular.element(e[f]),h=g.scope();for(var i in h)if(h.hasOwnProperty(i)&&i!=b&&angular.isObject(h[i])&&h[i].$invalid){var j=g.find("input,textarea,select");if(j.length>0){if(1==j.length){if(j[0].focus(),c&&j.closest("div[ui-grid-cell]")&&0<j.closest("div[ui-grid-cell]").length)return c=!1,a(d,100);return}var k=i.replace("gridform","");for(var l in h[i])if(l.indexOf(k)!=-1&&i!=b&&angular.isObject(h[i][l])&&h[i][l].$invalid)for(var j=g.find("input,textarea,select"),m=0;m<j.length;m++)if(j[m].name==l){if(j[m].focus(),j[m].blur(),j[m].focus(),c&&j.closest("div[ui-grid-cell]")&&0<j.closest("div[ui-grid-cell]").length)return c=!1,a(d,100);return}}}}};return a(d,100)}}}]).factory("optionMessageControl",["$timeout","$rootScope","alertMessage","$filter",function(a,b,c,d){return{show:function(d,e,f){return a(function(){var a;a="object"==typeof e&&void 0!=e.length?e:[e];for(var g=0;g<a.length;g++){null==d.oneslogi[a[g]]&&(d.oneslogi[a[g]]={}),null==d.oneslogi[a[g]].optionMessage&&(d.oneslogi[a[g]].optionMessage={}),d.oneslogi[a[g]].optionMessage.message=f,d.oneslogi[a[g]].optionMessage.show=!0;var h=b.item[d.screenCd][a[g]];h&&(h.visible||c.setErrorMessageByCode("errorOccurredHideField",[h.itemNm]))}},0)},hide:function(b,c){return a(function(){var a;a="object"==typeof c&&void 0!=c.length?c:[c];for(var d=0;d<a.length;d++)null==b.oneslogi[a[d]]&&(b.oneslogi[a[d]]={}),null==b.oneslogi[a[d]].optionMessage&&(b.oneslogi[a[d]].optionMessage={}),b.oneslogi[a[d]].optionMessage.message="",b.oneslogi[a[d]].optionMessage.show=!1},0)},hideAll:function(b){return a(function(){for(var a in b.oneslogi)b.oneslogi.hasOwnProperty(a)&&null!=b.oneslogi[a].optionMessage&&(b.oneslogi[a].optionMessage.message="",b.oneslogi[a].optionMessage.show=!1)},0)},isShow:function(a,b){return null!=a.oneslogi[b]&&(null!=a.oneslogi[b].optionMessage&&(null!=a.oneslogi[b].optionMessage.show&&a.oneslogi[b].optionMessage.show))},equalsMessage:function(a,b,c){if(null==a.oneslogi[b])return!1;if(null==a.oneslogi[b].optionMessage)return!1;if(null==a.oneslogi[b].optionMessage.show)return!1;var e=a.oneslogi[b].optionMessage.message==c;return!!e||a.oneslogi[b].optionMessage.message==d("owfMessage")(c)}}}]).factory("multiTextControl",["$timeout","$filter","directiveControl","optionMessageControl","owsCommon","validControl",function(a,b,c,d,e,f){return{setMultiText:function(b,d,f,g,h){return a(function(){if(isNullOrUndefined(h)||""==h){var a=e.getMultiTextModels(4);b[d][f].model=angular.copy(a);for(var i=0;i<4;i++){var j=g+(i+1);c.editable(b,j,!1),b[d][f].model[i].initFlg=!0,b[d][f].model[i].unit=null,b[d][f].model[i].value=null,b[d][f].model[i].unitNum=null,b[d][f].model[i].calcUnitNum=null}}else{var k=b[d][f].listModel,l=e.getDotValue(b,k);if(b[d][f].model=e.setMultiTextInit(b[d][f].model,l),"1"!=b[d][f].model[0].decimalExistFlg&&1!=l.length)for(var i=0;i<4;i++){var j=g+(i+1);if(i<l.length)if(multiTextEditableMode){if(!isNullOrUndefined(b.oneslogi)){var m=c.isDefaultEditable(b,j);c.editable(b,j,m)}}else c.editable(b,j,!1);else c.editable(b,j,!1),b[d][f].model[i].initFlg=!0,b[d][f].model[i].unit=null,b[d][f].model[i].value=null,b[d][f].model[i].unitNum=null,b[d][f].model[i].calcUnitNum=null}else for(var i=0;i<4;i++){var j=g+(i+1);c.editable(b,j,!1),b[d][f].model[i].initFlg=!0,b[d][f].model[i].unit=null,b[d][f].model[i].value=null,b[d][f].model[i].unitNum=null,b[d][f].model[i].calcUnitNum=null}}},0)},clearMultiText:function(a,b,d,f,g){if(multiTextEditableMode){if(!isNullOrUndefined(a.oneslogi))for(var h=0;h<4;h++){var i=f+(h+1),j=c.isDefaultEditable(a,i);c.editable(a,i,j)}}else for(var h=0;h<4;h++){var i=f+(h+1);c.editable(a,i,multiTextEditableMode)}var k=4;!isNullOrUndefined(g)&&"number"==typeof g&&isFinite(g)&&(k=g);var l=e.getMultiTextModels(k);a[b][d].model=angular.copy(l)},checkDecimalInput:function(a,c,e,g,h){var i="integerError",j=!1,k=a[e][g].model[0].listLength,l=a[e][g].model[0].decimalExistFlg,m=d.isShow(a,g),n=d.equalsMessage(a,g,i);if(isNullOrUndefined(k)||""==k){m&&n&&d.hide(a,g);for(var o=0;o<4;o++){var p=h+(o+1),q=d.isShow(a,p),r=d.equalsMessage(a,p,i);q&&r&&d.hide(a,p)}return j}if(isNullOrUndefined(l)||"0"!=l){if(!isNullOrUndefined(l)&&"1"==l){m&&n&&d.hide(a,g);for(var o=0;o<4;o++){var p=h+(o+1),q=d.isShow(a,p),r=d.equalsMessage(a,p,i);q&&r&&d.hide(a,p)}}}else{var s=f.decimallength(c,0);s?m&&n&&d.hide(a,g):(j=!0,d.show(a,g,b("owfMessage")(i)));for(var o=0;o<4;o++){var p=h+(o+1),t=a[e][g].model[o].value,u=f.decimallength(t,0);if(u){var q=d.isShow(a,p),r=d.equalsMessage(a,p,i);q&&r&&d.hide(a,p)}else j=!0,d.show(a,p,b("owfMessage")(i))}}return j}}}]).factory("gridDirectiveControl",["$log","owsCommon","$timeout","directiveControl","$q","overlayFunction",function(a,b,c,d,e,f){return{isEditable:function(a,b,c){for(var d=b;d!=d.replaceAll([".","[","]"],"");)d=d.replaceAll([".","[","]"],"");var e=this.dataRowIndex(a,c);return a.oneslogi[e].config[d].editable},isDefaultEditable:function(a,b,c){for(var d=b;d!=d.replaceAll([".","[","]"],"");)d=d.replaceAll([".","[","]"],"");var e=this.dataRowIndex(a,c);return a.oneslogi[e].config[d].defaultEditable},isValidity:function(a,b){var c=this.dataRowIndex(a,b);return a.oneslogi[c].config.validity},isBlankRowByEntity:function(a,c){for(var d=0;d<a.columnDefs.length;d++)if(a.columnDefs[d].visible&&a.columnDefs[d].editable&&null!=b.getDotValue(c,a.columnDefs[d].field)&&""!=b.getDotValue(c,a.columnDefs[d].field))return!1;return!0},firstErrorOnFocus:function(a){var b=!0,d=function(){var e=$("#"+a).find("ng-form");if(e.length>0)for(var f=0;f<e.length;f++)if(e[f].className.indexOf("invalid")>-1){var g=angular.element(e[f]),h=g.scope();for(var i in h)if(h.hasOwnProperty(i)&&i.indexOf("gridform")!==-1&&h[i].$invalid){var j=g.find("input,textarea,select");if(j.length>0){if(j[0].focus(),b&&j.closest("div[ui-grid-cell]")&&0<j.closest("div[ui-grid-cell]").length)return b=!1,c(d,100);return}}}};return c(d,100)},isValidCheckDetail:function(a){var b=e.defer(),g=!1,h=function(){a.$invalid?d.firstErrorOnFocus(a.$name).then(function(){g=!0,f.processResponse(a),b.reject()}):(f.processResponse(a),b.resolve())};return f.processRequest(a),c(h,1),b.promise}}}]).factory("gridMultiTextControl",["$timeout","$filter","gridDirectiveControl","gridOptionMessageControl","owsCommon","validControl",function(a,b,c,d,e,f){return{setMultiTextOptionsListInit:function(a,b,c,d){if(a[b]=[],!isNullOrUndefined(d)&&""!=d&&0!=d)for(var e=0;e<d;e++)a[b].push(angular.copy(c))},addMultiTextOptionsList:function(a,b,c,d){if(!isNullOrUndefined(d)&&""!=d&&0!=d)for(var e=0;e<d;e++)a[b].push(angular.copy(c))},removeMultiTextOptionsList:function(a,b,c,d){isNullOrUndefined(d)||""==d||d<0||a[b].splice(d,1)},clearMultiTextOptionsList:function(a,b){a[b]=[]},setMultiText:function(a,b,d,f,g,h,i,j){if(isNullOrUndefined(j)||(j=!0),isNullOrUndefined(g)||""==g){var k=e.getMultiTextModels(4);a[d][i][f].model=angular.copy(k);for(var l=0;l<4;l++){var m=a[d][i][f].multiTextCd+(l+1);c.editable(b,m,!1,i,j),a[d][i][f].model[l].initFlg=!0,a[d][i][f].model[l].unit=null,a[d][i][f].model[l].value=null,a[d][i][f].model[l].unitNum=null,a[d][i][f].model[l].calcUnitNum=null}}else if(a[d][i][f].model=e.setMultiTextInit(a[d][i][f].model,h),"1"!=a[d][i][f].model[0].decimalExistFlg&&1!=h.length)for(var l=0;l<4;l++){var m=a[d][i][f].multiTextCd+(l+1);if(l<h.length)if(multiTextEditableMode){if(!isNullOrUndefined(b.oneslogi)&&b.oneslogi.length>0){var n=c.isDefaultEditable(b,m,i);c.editable(b,m,n,i,j)}}else c.editable(b,m,!1,i,j);else c.editable(b,m,!1,i,j),a[d][i][f].model[l].initFlg=!0,a[d][i][f].model[l].unit=null,a[d][i][f].model[l].value=null,a[d][i][f].model[l].unitNum=null,a[d][i][f].model[l].calcUnitNum=null}else for(var l=0;l<4;l++){var m=a[d][i][f].multiTextCd+(l+1);c.editable(b,m,!1,i,j),a[d][i][f].model[l].initFlg=!0,a[d][i][f].model[l].unit=null,a[d][i][f].model[l].value=null,a[d][i][f].model[l].unitNum=null,a[d][i][f].model[l].calcUnitNum=null}},checkDecimalInput:function(a,c,e,g,h,i){var j="integerError",k=!1,l=a[g][i][h].model[0].listLength,m=a[g][i][h].model[0].decimalExistFlg,n=d.isShow(e,h,i),o=d.equalsMessage(e,h,i,j);if(isNullOrUndefined(l)||""==l){n&&o&&d.hide(e,h,i);for(var p=0;p<4;p++){var q=a[g][i][h].multiTextCd+(p+1),r=d.isShow(e,q,i),s=d.equalsMessage(e,q,i,j);r&&s&&d.hide(e,q,i)}return k}if(isNullOrUndefined(m)||"0"!=m){if(!isNullOrUndefined(m)&&"1"==m){n&&o&&d.hide(e,h,i);for(var p=0;p<4;p++){var q=a[g][i][h].multiTextCd+(p+1),r=d.isShow(e,q,i),s=d.equalsMessage(e,q,i,j);r&&s&&d.hide(e,q,i)}}}else{var t=f.decimallength(c,0);t?n&&o&&d.hide(e,h,i):(k=!0,d.show(e,h,b("owfMessage")(j),i));for(var p=0;p<4;p++){var q=a[g][i][h].multiTextCd+(p+1),u=a[g][i][h].model[p].value,v=f.decimallength(u,0);if(v){var r=d.isShow(e,q,i),s=d.equalsMessage(e,q,i,j);r&&s&&d.hide(e,q,i)}else k=!0,d.show(e,q,b("owfMessage")(j),i)}}return k}}}]).factory("gridOptionMessageControl",["$log","$timeout","alertMessage","$rootScope","$filter",function(a,b,c,d,e){return{isShow:function(a,b,c){for(var d=b;d!=d.replaceAll([".","[","]"],"");)d=d.replaceAll([".","[","]"],"");return a.oneslogi[c].config[d].optionMessage.show},equalsMessage:function(a,b,c,d){for(var f=b;f!=f.replaceAll([".","[","]"],"");)f=f.replaceAll([".","[","]"],"");var g=a.oneslogi[c].config[f].optionMessage.message==d;return!!g||a.oneslogi[c].config[f].optionMessage.message==e("owfMessage")(d)}}}]).value("localMessage",{"ja-jp":{requiredError:{bMessage:{messageNm:"必須",messageType:"error",systemType:"base",messageId:1}},patternError:{bMessage:{messageNm:"入力文字不正",messageType:"error",systemType:"base",messageId:2}},numberError:{bMessage:{messageNm:"数値のみ",messageType:"error",systemType:"base",messageId:3}},minlengthError:{bMessage:{messageNm:"最小[0]文字以上",messageType:"error",systemType:"base",messageId:4}},maxlengthError:{bMessage:{messageNm:"最大[0]文字以下",messageType:"error",systemType:"base",messageId:5}},minError:{bMessage:{messageNm:"最小[0]以上",messageType:"error",systemType:"base",messageId:6}},maxError:{bMessage:{messageNm:"最大[0]以下",messageType:"error",systemType:"base",messageId:7}},dateError:{bMessage:{messageNm:"日付不正(形式:[0])",messageType:"error",systemType:"base",messageId:8}},integerLengthError:{bMessage:{messageNm:"整数[0]桁以内",messageType:"error",systemType:"base",messageId:9}},decimalLengthError:{bMessage:{messageNm:"小数[0]桁以内",messageType:"error",systemType:"base",messageId:10}},httpConnectionError:{bMessage:{messageNm:"サーバに接続出来ませんでした。  HttpStatus:[0]  接続先:[1]",messageType:"error",systemType:"base",messageId:11}},httpConnectionErrorTitle:{bMessage:{messageNm:"以下のエラーが発生しました。[/]ネットワークに接続出来るか確認して下さい。[/]それでも解決しない場合、以下の内容を管理者にお伝え下さい。",messageType:"error",systemType:"base",messageId:12}},userMessage:{bMessage:{messageNm:"メッセージ",messageType:"error",systemType:"base",messageId:13}},statusCode:{bMessage:{messageNm:"ステータスコード",messageType:"error",systemType:"base",messageId:14}},developerMessage:{bMessage:{messageNm:"開発者向けメッセージ",messageType:"error",systemType:"base",messageId:15}},moreInfo:{bMessage:{messageNm:"詳しい情報",messageType:"error",systemType:"base",messageId:16}},systemMasterError:{bMessage:{messageNm:"システム管理マスタ取得エラー",messageType:"error",systemType:"base",messageId:17}},cultureMasterError:{bMessage:{messageNm:"カルチャマスタ取得エラー",messageType:"error",systemType:"base",messageId:18}},messageMasterError:{bMessage:{messageNm:"メッセージマスタ取得エラー",messageType:"error",systemType:"base",messageId:19}},screenMasterError:{bMessage:{messageNm:"画面マスタ取得エラー",messageType:"error",systemType:"base",messageId:20}},itemMasterError:{bMessage:{messageNm:"項目マスタ取得エラー",messageType:"error",systemType:"base",messageId:21}},columnMasterError:{bMessage:{messageNm:"列マスタ取得エラー",messageType:"error",systemType:"base",messageId:22}},infoMasterError:{bMessage:{messageNm:"お知らせマスタ取得エラー",messageType:"error",systemType:"base",messageId:23}},menuMasterError:{bMessage:{messageNm:"メニューマスタ取得エラー",messageType:"error",systemType:"base",messageId:24}},infoTitle:{bMessage:{messageNm:"お知らせ",messageType:"info",systemType:"base",messageId:25}},mainMenuTitle:{bMessage:{messageNm:"メニュー",messageType:"info",systemType:"base",messageId:26}},logoutTitle:{bMessage:{messageNm:"ログアウト",messageType:"info",systemType:"base",messageId:27}},searchCondition:{bMessage:{messageNm:"検索条件",messageType:"info",systemType:"base",messageId:28}},search:{bMessage:{messageNm:"検索",messageType:"info",systemType:"base",messageId:29}},clear:{bMessage:{messageNm:"クリア",messageType:"info",systemType:"base",messageId:30}},entry:{bMessage:{messageNm:"登録",messageType:"info",systemType:"base",messageId:31}},update:{bMessage:{messageNm:"更新",messageType:"info",systemType:"base",messageId:32}},delete:{bMessage:{messageNm:"削除",messageType:"info",systemType:"base",messageId:33}},unknownError:{bMessage:{messageNm:"不明なエラーが発生しました。",messageType:"error",systemType:"base",messageId:34}},registerSuccess:{bMessage:{messageNm:"登録しました。",messageType:"info",systemType:"base",messageId:35}},updateSuccess:{bMessage:{messageNm:"更新しました。",messageType:"info",systemType:"base",messageId:36}},onlyOneSelect:{bMessage:{messageNm:"一件のみ選択して下さい。",messageType:"error",systemType:"base",messageId:37}},entityAlreadyUpdatedError:{bMessage:{messageNm:"他のユーザに変更されています。内容を確認して下さい。",messageType:"error",systemType:"base",messageId:38}},entityAlreadyDeletedError:{bMessage:{messageNm:"他のユーザに変更された可能性があります。内容を確認して下さい。",messageType:"error",systemType:"base",messageId:39}},entityAlreadyExistsError:{bMessage:{messageNm:"データが重複している為、登録できません。管理者に連絡して下さい。",messageType:"error",systemType:"base",messageId:40}},unhandledError:{bMessage:{messageNm:"致命的エラーが発生しました。管理者に連絡して下さい。[0]",messageType:"error",systemType:"base",messageId:41}},maxNumberOfFiles:{bMessage:{messageNm:"サーバへ送信可能なファイル数を超えています。",messageType:"error",systemType:"base",messageId:42}},acceptFileTypes:{bMessage:{messageNm:"サーバへ送信できないファイルが含まれています。",messageType:"error",systemType:"base",messageId:43}},maxFileSize:{bMessage:{messageNm:"サーバへ送信可能なファイルサイズを超えています。",messageType:"error",systemType:"base",messageId:44}},minFileSize:{bMessage:{messageNm:"サーバへ送信可能なファイルサイズに達していません。",messageType:"error",systemType:"base",messageId:45}},masterNotFoundError:{bMessage:{messageNm:"マスタ未存在",messageType:"error",systemType:"base",messageId:46}},noDetailsError:{bMessage:{messageNm:"明細が入力されていません。",messageType:"error",systemType:"base",messageId:47}},fileUploadOpenError:{bMessage:{messageNm:"アップロードされたファイルが開けませんでした。ファイルに問題がないか確認して下さい。",messageType:"error",systemType:"base",messageId:48}},fileUploadDefineError:{bMessage:{messageNm:"アップロード用の定義情報が不正です。管理者にご連絡下さい。",messageType:"error",systemType:"base",messageId:49}},fileUploadSetError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。",messageType:"error",systemType:"base",messageId:50}},keyDownBackSpaceInfo:{bMessage:{messageNm:"backspaceが押されました。[/]前ページへ移動しますか？",messageType:"info",systemType:"base",messageId:51}},authFatalError:{bMessage:{messageNm:"認証処理にて致命的エラーが発生しました。[/]管理者に連絡して下さい。",messageType:"error",systemType:"base",messageId:52}},authenticationTokenInvalidError:{bMessage:{messageNm:"ログアウトされています。認証画面より再度ログインして下さい。",messageType:"error",systemType:"base",messageId:53}},authorizationError:{bMessage:{messageNm:"システムに対するアクセス権がありません。[/]管理者に連絡して下さい。",messageType:"error",systemType:"base",messageId:54}},deleteRowErrNotSelect:{bMessage:{messageNm:"削除する行が選択されていません。",messageType:"info",systemType:"base",messageId:55}},deleteRowSuccess:{bMessage:{messageNm:"行を削除しました。",messageType:"info",systemType:"base",messageId:56}},confirmDeleteRow:{bMessage:{messageNm:"選択した行を削除しますか？",messageType:"info",systemType:"base",messageId:57}},overSafetySizeError:{bMessage:{messageNm:"検索件数が[0]件を超えています。検索条件を見直し再度処理を実行して下さい。",messageType:"error",systemType:"base",messageId:58}},processExecuteStartInformation:{bMessage:{messageNm:"処理を開始しました。",messageType:"info",systemType:"base",messageId:59}},processExecuteEndInformation:{bMessage:{messageNm:"処理を終了しました。",messageType:"info",systemType:"base",messageId:60}},layoutNmNotFoundError:{bMessage:{messageNm:"指定されたレイアウト名称は辞書マスタに登録されていません。",messageType:"error",systemType:"base",messageId:61}},duplicateClickError:{bMessage:{messageNm:"登録しようとしたデータはすでに登録済みです。",messageType:"error",systemType:"base",messageId:62}},fileUploadSetExcelSheetError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。[/]シート名：[0]",messageType:"error",systemType:"base",messageId:63}},fileUploadSetExcelRowError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。[/]シート名：[0] , 行番号：[1]",messageType:"error",systemType:"base",messageId:64}},fileUploadSetExcelColError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。[/]シート名：[0] , 行番号：[1] , 列番号：[2]",messageType:"error",systemType:"base",messageId:65}},fileUploadSetCsvRowError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。[/]行番号：[0]",messageType:"error",systemType:"base",messageId:66}},fileUploadSetCsvColError:{bMessage:{messageNm:"データの取り込み中にエラーが発生しました。[/]行番号：[0] , 列番号：[1]",messageType:"error",systemType:"base",messageId:67}},overSafetySizeToReportError:{bMessage:{messageNm:"発行データ件数が[0]件を超えています。発行条件を見直し再度処理を実行して下さい。",messageType:"error",systemType:"base",messageId:68}},dataRegisterConfirmation:{bMessage:{messageNm:"対象データを登録しますか？",messageType:"confirm",systemType:"base",messageId:69}},dataDeleteConfirmation:{bMessage:{messageNm:"対象データを削除しますか？",messageType:"confirm",systemType:"base",messageId:70}},processCompleteInformation:{bMessage:{messageNm:"処理は正常終了しました。",messageType:"info",systemType:"base",messageId:71}},insertProcessNormalEndInformation:{bMessage:{messageNm:"正常に登録されました。",messageType:"info",systemType:"base",messageId:72}},updateProcessNormalEndInformation:{bMessage:{messageNm:"正常に更新されました。",messageType:"info",systemType:"base",messageId:73}},alreadyRegisteredCannotRegisterError:{bMessage:{messageNm:"既に登録されています。",messageType:"error",systemType:"base",messageId:74}},deleteExceptionError:{bMessage:{messageNm:"削除処理時にエラーが発生しました。(詳細：[0])",messageType:"error",systemType:"base",messageId:75}},dataNotFoundError:{bMessage:{messageNm:"該当データが存在しません。",messageType:"error",systemType:"base",messageId:76}},dictNotFoundError:{bMessage:{messageNm:"辞書マスタに存在しません。",messageType:"error",systemType:"base",messageId:77}},dictNmDuplicateError:{bMessage:{messageNm:"辞書名が重複しています。",messageType:"error",systemType:"base",messageId:78}},messageNotFoundError:{bMessage:{messageNm:"メッセージマスタに存在しません。",messageType:"error",systemType:"base",messageId:79}},messageCdDuplicateError:{bMessage:{messageNm:"メッセージCDが重複しています。",messageType:"error",systemType:"base",messageId:80}},screenCdDuplicateError:{bMessage:{messageNm:"画面CDが重複しています。",messageType:"error",systemType:"base",messageId:81}},dispNmNotFoundInDispMasterError:{bMessage:{messageNm:"画面名称が画面マスタに存在しません。",messageType:"error",systemType:"base",messageId:82}},itemCdDuplicateError:{bMessage:{messageNm:"項目CDが重複しています。",messageType:"error",systemType:"base",messageId:83}},colCdDuplicateError:{bMessage:{messageNm:"列CDが重複しています。",messageType:"error",systemType:"base",messageId:84}},colOrderDuplicateError:{bMessage:{messageNm:"列順序が重複しています。",messageType:"error",systemType:"base",messageId:85}},classCdDuplicateError:{bMessage:{messageNm:"区分値CDが重複しています。",messageType:"error",systemType:"base",messageId:86}},classDtlCdDuplicateError:{bMessage:{messageNm:"区分値明細CDが重複しています。",messageType:"error",systemType:"base",messageId:87}},classGrpCdDuplicateError:{bMessage:{messageNm:"区分値グループCDが重複しています。",messageType:"error",systemType:"base",messageId:88}},menuGrpCdDuplicateError:{bMessage:{messageNm:"メニューグループCDが重複しています。",messageType:"error",systemType:"base",messageId:89}},viewOrderDuplicateError:{bMessage:{messageNm:"表示順が重複しています。",messageType:"error",systemType:"base",messageId:90}},roleGrpCodeDuplicateError:{bMessage:{messageNm:"権限グループCDが重複しています。",messageType:"error",systemType:"base",messageId:91}},applyOrderDuplicateError:{bMessage:{messageNm:"適用順序が重複しています。",messageType:"error",systemType:"base",messageId:92}},roleCodeDuplicateError:{bMessage:{messageNm:"権限CDが重複しています。",messageType:"error",systemType:"base",messageId:93}},itemVisibleCannotSelectExceptionError:{bMessage:{messageNm:"表示不可の項目は表示可を設定できません。",messageType:"error",systemType:"base",messageId:94}},itemEditableCannotSelectExceptionError:{bMessage:{messageNm:"編集不可の項目は編集可を設定できません。",messageType:"error",systemType:"base",messageId:95}},itemNecessaryableCannotSelectExceptionError:{bMessage:{messageNm:"必須の項目は任意を設定できません。",messageType:"error",systemType:"base",messageId:96}},gridColExtDialogDescription_A01_00_Head:{bMessage:{messageNm:"当画面について",messageType:"info",systemType:"base",messageId:97}},gridColExtDialogDescription_A01_01_Title:{bMessage:{messageNm:"当画面でできること",messageType:"info",systemType:"base",messageId:98}},gridColExtDialogDescription_A01_02_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:99}},gridColExtDialogDescription_A01_01_Value:{bMessage:{messageNm:"「列の順序」と「列の幅」を変更できます。",messageType:"info",systemType:"base",messageId:100}},gridColExtDialogDescription_A01_02_Value:{bMessage:{messageNm:"【登録】ボタンで保存した変更は次のログイン以降も引き継がれます。",messageType:"info",systemType:"base",messageId:101}},gridColExtDialogDescription_A02_00_Head:{bMessage:{messageNm:"画面項目について",messageType:"info",systemType:"base",messageId:102}},gridColExtDialogDescription_A02_01_Title:{bMessage:{messageNm:"列一覧",messageType:"info",systemType:"base",messageId:103}},gridColExtDialogDescription_A02_02_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:104}},gridColExtDialogDescription_A02_03_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:105}},gridColExtDialogDescription_A02_04_Title:{bMessage:{messageNm:"列幅一覧",messageType:"info",systemType:"base",messageId:106}},gridColExtDialogDescription_A02_05_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:107}},gridColExtDialogDescription_A02_06_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:108}},gridColExtDialogDescription_A02_07_Title:{bMessage:{messageNm:"【閉じる】ボタン",messageType:"info",systemType:"base",messageId:109}},gridColExtDialogDescription_A02_08_Title:{bMessage:{messageNm:"【リセット】ボタン",messageType:"info",systemType:"base",messageId:110}},gridColExtDialogDescription_A02_09_Title:{bMessage:{messageNm:"【登録】ボタン",messageType:"info",systemType:"base",messageId:111}},gridColExtDialogDescription_A02_01_Value:{bMessage:{messageNm:"列の順序を変更できます。",messageType:"info",systemType:"base",messageId:112}},gridColExtDialogDescription_A02_02_Value:{bMessage:{messageNm:"列を選択し、右の移動ボタンで順序を変更します。",messageType:"info",systemType:"base",messageId:113}},gridColExtDialogDescription_A02_03_Value:{bMessage:{messageNm:"ボタンは上から「選択列を一番上に移動」「選択列をひとつ上に移動」「選択列をひとつ下に移動」「選択列を一番下に移動」の移動ボタンです。",messageType:"info",systemType:"base",messageId:114}},gridColExtDialogDescription_A02_04_Value:{bMessage:{messageNm:"列の幅を変更できます。",messageType:"info",systemType:"base",messageId:115}},gridColExtDialogDescription_A02_05_Value:{bMessage:{messageNm:"列名の下の入力欄に幅の大きさを入力して幅を変更します。",messageType:"info",systemType:"base",messageId:116}},gridColExtDialogDescription_A02_06_Value:{bMessage:{messageNm:"マウスで境目を直接左右に動かす事でも調整できます。",messageType:"info",systemType:"base",messageId:117}},gridColExtDialogDescription_A02_07_Value:{bMessage:{messageNm:"変更を破棄して当画面を閉じます。変更は保存されません。",messageType:"info",systemType:"base",messageId:118}},gridColExtDialogDescription_A02_08_Value:{bMessage:{messageNm:"保存した状態を破棄して初期状態に戻ります。初期状態を保存したい場合は【登録】ボタンを押してください。",messageType:"info",systemType:"base",messageId:119}},gridColExtDialogDescription_A02_09_Value:{bMessage:{messageNm:"変更した内容を保存して当画面を閉じます。",messageType:"info",systemType:"base",messageId:120}},gridColExtDialogDescription_A03_00_Head:{bMessage:{messageNm:"ヒント",messageType:"info",systemType:"base",messageId:121}},gridColExtDialogDescription_A03_01_Title:{bMessage:{messageNm:"幅の制限",messageType:"info",systemType:"base",messageId:122}},gridColExtDialogDescription_A03_02_Title:{bMessage:{messageNm:"幅を戻す",messageType:"info",systemType:"base",messageId:123}},gridColExtDialogDescription_A03_03_Title:{bMessage:{messageNm:"複数列の順序を移動",messageType:"info",systemType:"base",messageId:124}},gridColExtDialogDescription_A03_04_Title:{bMessage:{messageNm:"[blank]",messageType:"info",systemType:"base",messageId:125}},gridColExtDialogDescription_A03_01_Value:{bMessage:{messageNm:"幅に入力できる大きさは、最小が40、最大が2000です。単位はピクセルです。",messageType:"info",systemType:"base",messageId:126}},gridColExtDialogDescription_A03_02_Value:{bMessage:{messageNm:"列の境目をダブルクリックすると初期状態の幅に戻ります。",messageType:"info",systemType:"base",messageId:127}},gridColExtDialogDescription_A03_03_Value:{bMessage:{messageNm:"列一覧 または、列幅一覧でCtrlキーを押しながら列をクリックすることで複数の列を選択できます。",messageType:"info",systemType:"base",messageId:128}},gridColExtDialogDescription_A03_04_Value:{
bMessage:{messageNm:"選択した列は移動ボタンで順序を変更できます。",messageType:"info",systemType:"base",messageId:129}},isMismatchBColAndExtWarn:{bMessage:{messageNm:"最後に列の順序、幅を変更した後に、列の追加が行われています。設定画面から設定し直してください。",messageType:"warn",systemType:"base",messageId:130}},dataUpdateConfirmation:{bMessage:{messageNm:"対象データを更新しますか？",messageType:"confirm",systemType:"base",messageId:131}},notBlankError:{bMessage:{messageNm:"[0]を入力してください。",messageType:"info",systemType:"base",messageId:132}},liteLoginErrorNoUser:{bMessage:{messageNm:"[0]・[1]に誤りがあるか、登録されていません。",messageType:"error",systemType:"base",messageId:133}},passwordChangeErrorMismatchNowAndOld:{bMessage:{messageNm:"パスワード変更ができません｡[/]現在使用しているパスワードと[0]が一致しません。",messageType:"error",systemType:"base",messageId:134}},passwordChangeErrorMismatchNewAndReEnter:{bMessage:{messageNm:"パスワード変更ができません｡[/][0]と[1]が一致しません。",messageType:"error",systemType:"base",messageId:135}},passwordChangeSuccess:{bMessage:{messageNm:"パスワードが変更されました｡[/]この画面を閉じるとメニューに移動します。",messageType:"info",systemType:"base",messageId:136}},passwordChangeByMgtSuccess:{bMessage:{messageNm:"パスワードが変更されました｡",messageType:"info",systemType:"base",messageId:137}},passwordChangeErrorNoSamePasswordNewAndOld:{bMessage:{messageNm:"パスワード変更ができません｡[/]現在使用しているパスワードと[0]が同じパスワードです。異なるパスワードに変更してください。",messageType:"error",systemType:"base",messageId:138}},passwordChangeErrorSamePasswordNewAndOld:{bMessage:{messageNm:"パスワード変更ができません｡[/]現在使用しているパスワードと[0]が同じパスワードです。[/]異なるパスワードに変更してください。",messageType:"error",systemType:"base",messageId:139}},passwordChangeErrorMinLength:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードは[0]桁以上を入力してください。",messageType:"error",systemType:"base",messageId:140}},passwordChangeErrorMinAlpha:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードには[0]桁以上の英字を含めてください。",messageType:"error",systemType:"base",messageId:141}},passwordChangeErrorMinLowerCase:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードには[0]桁以上の小文字を含めてください。",messageType:"error",systemType:"base",messageId:142}},passwordChangeErrorMinUpperCase:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードには[0]桁以上の大文字を含めてください。",messageType:"error",systemType:"base",messageId:143}},passwordChangeErrorMinNumbers:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードには[0]桁以上の数字を含めてください。",messageType:"error",systemType:"base",messageId:144}},passwordChangeErrorMinSymbol:{bMessage:{messageNm:"パスワード変更ができません｡[/]パスワードには[0]桁以上の半角記号を含めてください。",messageType:"error",systemType:"base",messageId:145}},passwordChangeErrorUserAvailableOutOfPeriod:{bMessage:{messageNm:"ユーザが利用期間外です。システム管理者に問い合わせてください。[/]ログイン画面に移動します。",messageType:"error",systemType:"base",messageId:146}},passwordChangeErrorBecameLockout:{bMessage:{messageNm:"ロックアウトされました。システム管理者に問い合わせてください。[/]ログイン画面に移動します。",messageType:"error",systemType:"base",messageId:147}},passwordChangeErrorLockout:{bMessage:{messageNm:"ロックアウトされています。システム管理者に問い合わせてください。[/]ログイン画面に移動します。",messageType:"error",systemType:"base",messageId:148}},liteLoginErrorUserAvailableOutOfPeriod:{bMessage:{messageNm:"ログインすることができません｡[/]ユーザが利用期間外です。システム管理者に問い合わせてください。",messageType:"error",systemType:"base",messageId:149}},liteLoginErrorBecameLockout:{bMessage:{messageNm:"ログインすることができません｡[/]ロックアウトされました。システム管理者に問い合わせてください。",messageType:"error",systemType:"base",messageId:150}},liteLoginErrorLockout:{bMessage:{messageNm:"ログインすることができません｡[/]ロックアウトされています。システム管理者に問い合わせてください。",messageType:"error",systemType:"base",messageId:151}},passwordChangeErrorAvailableDateContext:{bMessage:{messageNm:"パスワード変更ができません｡[/][0]には[1]より後の日付を入力してください。",messageType:"error",systemType:"base",messageId:152}},userEditErrorAlreadyRegistered:{bMessage:{messageNm:"ユーザCDは既に登録されています。",messageType:"error",systemType:"base",messageId:153}},liteLoginInfoPasswordReset:{bMessage:{messageNm:"パスワードがリセットされています。[/]パスワードを変更してください。",messageType:"info",systemType:"base",messageId:154}},liteLoginInfoPasswordExpired:{bMessage:{messageNm:"パスワードの有効期限が切れています。[/]パスワードを変更してください。",messageType:"info",systemType:"base",messageId:155}},passwordTitle:{bMessage:{messageNm:"パスワード変更",messageType:"info",systemType:"base",messageId:156}},copyCondition:{bMessage:{messageNm:"コピー",messageType:"info",systemType:"base",messageId:157}},timeError:{bMessage:{messageNm:"時刻不正(形式:[0])",messageType:"error",systemType:"base",messageId:158}}}}),angular.module("oneslogiWeb.base",["oneslogiWeb.base.common","ngRoute","ui.grid","ui.grid.autoResize","ui.grid.edit","ui.grid.pagination","ui.grid.pinning","ui.grid.resizeColumns","ui.grid.selection","ui.bootstrap","oneslogiWeb.datepicker","blueimp.fileupload","ngTouch","btorfs.multiselect"]).config(["$qProvider",function(a){a.errorOnUnhandledRejections(!1)}]).config(["$provide",function(a){a.decorator("owsCommon",["$delegate","$filter","owsDateCommon","$rootScope","$log","$timeout","$location",function(a,b,c,d,e,f,g){return a.mergeBasicGridOptions=function(a){return angular.extend({enablePaging:!1,enableColumnMenus:!1,enableColumnResizing:!0,enableRowSelection:!1,multiSelect:!1,enableFullRowSelection:!0,enableSorting:!1,showGridFooter:!0,enableChangeColumn:!0,minRowsToShow:12},a)},a.mergeEntryNonSelectGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{enableRowHeaderSelection:!1,virtualizationThreshold:0,minRowsToShow:6},a)},a.mergeEntryGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{multiSelect:!0,virtualizationThreshold:0,minRowsToShow:6},a)},a.mergePagingSingleSelectGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{enablePaging:!0,useExternalPagination:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},a)},a.mergePagingMultiSelectGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{enablePaging:!0,useExternalPagination:!0,multiSelect:!0,enableRowSelection:!0},a)},a.mergeSingleSelectGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{enableRowSelection:!0,enableRowHeaderSelection:!1},a)},a.mergeMultiSelectGridOptions=function(a){return angular.extend(this.mergeBasicGridOptions({}),{multiSelect:!0,enableRowSelection:!0},a)},a.toggleSelectAll=function(a,b){a.gridApi&&a.gridApi.selection&&(b?a.gridApi.selection.selectAllRows():a.gridApi.selection.clearSelectedRows())},a.syncExecAndRebuildGrid=function(a,b){return f(function(){return"undefined"==typeof b||null==b?void 0:b()})},a.getDefaultPagingOptions=function(){return{paginationPageSizes:gridPageSizes,paginationPageSize:gridPageSize,paginationCurrentPage:1,lastCurrentPage:1,lastPaginationPageSize:gridPageSize}},a.getLargePagingOptions=function(){return{paginationPageSizes:gridLargePageSizes,paginationPageSize:gridLargePageSize,paginationCurrentPage:1}},a.clearPagingOptions=function(a){a.paginationCurrentPage=1,a.pageNumber=1,a.pagingOptions&&(a.pagingOptions.currentPage=1,a.pagingOptions.lastCurrentPage=1,a.pagingOptions.lastPaginationPageSize=a.paginationPageSize)},a.syncButtonExec=function(a,b){if(null!=a||""!=a){var c=$("#"+a),d=c[0],e={};if(e.visibility=c.css("visibility"),e.display=c.css("display"),null==b)return f(function(){"hidden"==d.type||d.disabled||"hidden"==e.visibility||"none"==e.display||d.click()});var g=b.isSelected;return g?f(function(){"hidden"==d.type||d.disabled||"hidden"==e.visibility||"none"==e.display||d.click()}):(b.grid.api.selection.selectRow(b.entity),f(function(){"hidden"==d.type||d.disabled||"hidden"==e.visibility||"none"==e.display?b.grid.api.selection.selectRow(b.entity):d.click()}))}},a}]),a.decorator("gridDirectiveControl",["$delegate","$log","owsCommon","$timeout","directiveControl","$q","overlayFunction",function(a,b,c,d,e,f,g){return a.editable=function(a,c,e,g,h){var i=this,j=function(){if(!a.oneslogi||void 0==a.oneslogi.length)throw new Error("Grid制御用の変数が初期化されていません。[gridDirectiveControl.editable]");if(a.oneslogi.length<a.gridApi.grid.rows.length)throw new Error("Gridの行数に対して、Grid制御用の変数の行が不足しています。[gridDirectiveControl.editable]");var d,f;d="object"==typeof c&&void 0!=c.length?c:[c],f="object"==typeof g&&void 0!=g.length?g:[g];for(var h,j=0;j<d.length;j++){for(h=d[j];h!=h.replaceAll([".","[","]"],"");)h=h.replaceAll([".","[","]"],"");for(var k=0;k<f.length;k++){var l=0,m=1;null!=f[k]?(l=f[k],m=f[k]+1):(l=0,m=a.gridApi.grid.rows.length);for(var n=l;n<m;n++){if(n>=a.gridApi.grid.rows.length){b.info("ui-grid上で行がまだ作成されていない為、editable操作出来ません。行No.:"+n);break}var o=i.dataRowIndex(a,n);a.oneslogi[o].config[h].editable=e}}}};if(h){var k=f.defer();return k.resolve(),j(),k.promise}return d(j,0)},a.validity=function(a,c,e){var f=this;return d(function(){if(!a.oneslogi||void 0==a.oneslogi.length)throw new Error("Grid制御用の変数が初期化されていません。[gridDirectiveControl.validity]");if(a.oneslogi.length<a.gridApi.grid.rows.length)throw new Error("Gridの行数に対して、Grid制御用の変数の行が不足しています。[gridDirectiveControl.validity]");var d;d="object"==typeof e&&void 0!=e.length?e:[e];for(var g=0;g<d.length;g++){var h=0,i=1;null!=d[g]?(h=d[g],i=d[g]+1):(h=0,i=a.gridApi.grid.rows.length);for(var j=h;j<i;j++){if(j>=a.gridApi.grid.rows.length){b.info("ui-grid上で行がまだ作成されていない為、editable操作出来ません。行No.:"+j);break}var k=f.dataRowIndex(a,j);a.oneslogi[k].config.validity=c}}},0)},a.isBlankRow=function(a,b){for(var d=0;d<a.columnDefs.length;d++)if(a.columnDefs[d].visible&&a.columnDefs[d].editable&&null!=c.getDotValue(a.gridApi.grid.rows[b].entity,a.columnDefs[d].field)&&""!=c.getDotValue(a.gridApi.grid.rows[b].entity,a.columnDefs[d].field))return!1;return!0},a.blankRows=function(a){for(var b=[],c=!0,d=0;d<a.gridApi.grid.rows.length;d++)c=this.isBlankRow(a,d),c&&b.push(d);return b},a.isValidCheckAllRows=function(a,b){var c=f.defer();return d(function(){var f=a.gridViewport[0].scrollTop,h=a.gridApi.grid.rows[a.gridApi.grid.rows.length-1],i=0,j=function(){return 20<i?(g.processResponse(b),void c.reject()):(i++,void e.firstErrorOnFocus(b.$name).then(function(){if(!document.activeElement||document.activeElement.getBoundingClientRect().top<1)d(j,100);else{var f=document.activeElement.getBoundingClientRect().top,h=a.gridViewport[0].getBoundingClientRect().top+a.gridViewport[0].offsetHeight,i=f+a.rowHeight-h;0<i?(a.gridViewport.scrollTop(a.gridViewport[0].scrollTop+i),d(j,100)):e.firstErrorOnFocus(b.$name).then(function(){g.processResponse(b),c.reject()})}}))},k=null,l=0,m=function(){if(b.$invalid)j();else{var e=a.gridApi.grid.renderContainers.body.renderedRows[a.gridApi.grid.renderContainers.body.renderedRows.length-1],i=e.uid;e===h?(a.gridViewport.scrollTop(f),g.processResponse(b),c.resolve()):(i===k?(l++,20===l&&(g.processResponse(b),c.reject())):(l=0,k=i),a.gridApi.core.scrollTo(e.entity,a.columnDefs[0]).then(function(a){d(m,100)}))}};g.processRequest(b),b.$invalid?d(m,1):!a.gridApi.grid.rows||a.gridApi.grid.rows.length<1?(g.processResponse(b),c.resolve()):a.gridApi.core.scrollTo(a.gridApi.grid.rows[0].entity,a.columnDefs[0]).then(function(a){d(m,100)})},100),c.promise},a.scrollingByRowIndex=function(a,b){var c=a.rowHeight*(b+1);a.gridViewport.scrollTop(c)},a.scrollingByRowIndexForViewOnlyList=function(a,b){var c=a.rowHeight*(b+1);a.gridViewport.scrollTop(c)},a.scrollingByRowIndex=function(a,b){var c=a.rowHeight*(b+1);a.gridViewport.scrollTop(c)},a.dataRowIndex=function(a,b){var c=a.gridApi.grid.renderContainers.body.visibleRowCache[b];if(c===a.gridApi.grid.rows[b])return b;for(var d=a.gridApi.grid.rows,e=0;e<d.length;e++)if(d[e]===c)return e;return-1},a.viewRowIndex=function(a,b){var c=a.gridApi.grid.rows[b];if(c===a.gridApi.grid.renderContainers.body.visibleRowCache[b])return b;for(var d=a.gridApi.grid.renderContainers.body.visibleRowCache,e=0;e<d.length;e++)if(d[e]===c)return e;return-1},a}]),a.decorator("gridOptionMessageControl",["$delegate","$log","$timeout","alertMessage","$rootScope","$filter",function(a,b,c,d,e,f){return a.show=function(a,e,f,g){return c(function(){if(!a.oneslogi||void 0==a.oneslogi.length)throw new Error("Grid制御用の変数が初期化されていません。[gridOptionMessageControl.show]");if(a.oneslogi.length<a.gridApi.grid.rows.length)throw new Error("Gridの行数に対して、Grid制御用の変数の行が不足しています。[gridOptionMessageControl.show]");var c,h;c="object"==typeof e&&void 0!=e.length?e:[e],h="object"==typeof g&&void 0!=g.length?g:[g];for(var i,j=0;j<c.length;j++){for(i=c[j];i!=i.replaceAll([".","[","]"],"");)i=i.replaceAll([".","[","]"],"");for(var k=0;k<h.length;k++){var l=0,m=1;null!=h[k]?(l=h[k],m=h[k]+1):(l=0,m=a.gridApi.grid.rows.length);for(var n=l;n<m;n++){if(n>=a.gridApi.grid.rows.length){b.info("ui-grid上で行がまだ作成されていない為、editable操作出来ません。行No.:"+n);break}a.oneslogi[n].config[i].optionMessage.message=f,a.oneslogi[n].config[i].optionMessage.show=!0}}}if(a.columnDefs)a:for(var j=0;j<c.length;j++){fullColName=c[j];for(var n=0;n<a.columnDefs.length;n++)if(a.columnDefs[n].field&&a.columnDefs[n].field==fullColName&&!a.columnDefs[n].visible){d.setErrorMessageByCode("errorOccurredHideFieldOnGrid",[]);break a}}},0)},a.hide=function(a,d,e){return c(function(){if(!a.oneslogi||void 0==a.oneslogi.length)throw new Error("Grid制御用の変数が初期化されていません。[gridOptionMessageControl.hide]");if(a.oneslogi.length<a.gridApi.grid.rows.length)throw new Error("Gridの行数に対して、Grid制御用の変数の行が不足しています。[gridOptionMessageControl.hide]");var c,f;c="object"==typeof d&&void 0!=d.length?d:[d],f="object"==typeof e&&void 0!=e.length?e:[e];for(var g,h=0;h<c.length;h++){for(g=c[h];g!=g.replaceAll([".","[","]"],"");)g=g.replaceAll([".","[","]"],"");for(var i=0;i<f.length;i++){var j=0,k=1;null!=f[i]?(j=f[i],k=f[i]+1):(j=0,k=a.gridApi.grid.rows.length);for(var l=j;l<k;l++){if(l>=a.gridApi.grid.rows.length){b.info("ui-grid上で行がまだ作成されていない為、editable操作出来ません。行No.:"+l);break}a.oneslogi[l].config[g].optionMessage.message="",a.oneslogi[l].config[g].optionMessage.show=!1}}}},0)},a.hideAll=function(a){return c(function(){if(!a.oneslogi||void 0==a.oneslogi.length)throw new Error("Grid制御用の変数が初期化されていません。[gridOptionMessageControl.hideAll]");if(a.oneslogi.length<a.gridApi.grid.rows.length)throw new Error("Gridの行数に対して、Grid制御用の変数の行が不足しています。[gridOptionMessageControl.hideAll]");for(var b=0;b<a.gridApi.grid.rows.length;b++)for(var c in a.oneslogi[b].config)a.oneslogi[b].config.hasOwnProperty(c)&&null!=a.oneslogi[b].config[c].optionMessage&&(a.oneslogi[b].config[c].optionMessage.message="",a.oneslogi[b].config[c].optionMessage.show=!1)},0)},a}])}]).run(["$rootScope","$log","$filter","$location","$timeout","owsScreen","owsItem","owsColumn",function(a,b,c,d,e,f,g,h){history.replaceState&&window.addEventListener("popstate",function(b){a.popstate={},null!=b.state&&(a.popstate.data=b.state)}),a.networkError=!1,a.connectionStatus=[],"undefined"!=typeof designMode?a.designMode=designMode:a.designMode=!1;var i=!0;a.designMode||a.$on("$routeChangeError",function(d,e,f,g){a.isTokenInvalid||(void 0!==e.loadedTemplateUrl&&(i?i=!1:(a.alerts=[],a.popstate={})),a.networkError=!0,b.error(g+" url:"+e.loadedTemplateUrl+" params:"+c("json")(e.params)))}),a.$on("$routeChangeStart",function(b,c,d){if(!a.isTokenInvalid&&(void 0!==c.$$route&&(i?i=!1:(a.alerts=[],a.popstate={})),!isNullOrUndefined(a.modalViews)&&!isNullOrUndefined(a.modalViews.length)&&0!=a.modalViews.length)){for(var e=0;e<a.modalViews.length;e++)a.modalViews[e].dismiss(),a.modalViews[e]=null;a.modalViews=[]}}),a.$on("$routeChangeSuccess",function(b,c,d){if(!a.isTokenInvalid){a.networkError=!1,a.connectionStatus=[];var e=a.duplicateCheckToken;e&&(a.duplicateCheckToken=null)}}),a.$on("$includeContentRequested",function(a){}),a.$on("$includeContentLoaded",function(a){f.getData(a.targetScope.$$childHead.screenCd,!0),g.getData(a.targetScope.$$childHead.screenCd),h.getData(a.targetScope.$$childHead.screenCd)})}]).directive("owdText",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){for(var c="",d=0;d<a[0].attributes.length;d++){var e=a[0].attributes[d];0!==e.name.lastIndexOf("ng-",0)&&0!==e.name.lastIndexOf("ui-",0)||"ng-model"!==e.name&&"ng-disabled"!==e.name&&"ng-show"!==e.name&&"ng-class"!==e.name&&(c+=e.name+'="'+e.value+'" ')}c+=b.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",c+=b.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"";var f="";for(f+='<span><ng-form name="'+b.id+'form" novalidate>',f+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group '+b.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',f+='    <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',b.owdAddButton?(f+='    <div class="input-group">',f+='      <input type="text" owd-textvalid class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" ng-disabled="{0}" ng-class="{3}" ondragstart="return false" ondrop="return false" '+c+"/>",f+='      <span class="input-group-btn"><button type="button" tabindex="-1" class="btn btn-default" ng-disabled="{0}" ng-click="'+b.owdAddButton+'"><span class="glyphicon glyphicon-search"></span></button></span>',f+="    </div>"):f+='    <input type="text" owd-textvalid class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" ng-disabled="{0}" ng-class="{3}" ondragstart="return false" ondrop="return false" '+c+"/>",f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.pattern">{{item[screenCd]["'+b.id+'"].message}}</span>',f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.minlength">{{"minlengthError" | owfMessage:item[screenCd]["'+b.id+'"].minChars}}</span>',f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.maxlength">{{"maxlengthError" | owfMessage:item[screenCd]["'+b.id+'"].maxChars}}</span>',b.owdValidateMessage&&(f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),f+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',f+="    <div ng-transclude></div>",f+="  </div>",f+="</ng-form></span>";f!=f.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)f=f.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;f!=f.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)f=f.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return f=f.replace("{3}","item[screenCd]['"+b.id+"'].textAlign"),f=f.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdTextvalid",["$rootScope","validControl",function(a,b){return{restrict:"A",scope:!1,require:"ngModel",link:function(c,d,e,f){if(c.$watch(e.ngModel,function(){c.oneslogi[e.id].optionMessage.show&&(c.oneslogi[e.id].optionMessage.show=!1)}),void 0!=a.item[c.screenCd][e.id].necessary&&"1"==a.item[c.screenCd][e.id].necessary){d.attr("required","required");var g=function(a){return f.$setValidity("required",b.required(a)),a};f.$formatters.push(g),f.$parsers.push(g)}if(a.item[c.screenCd][e.id].inputLimit){var h=function(d){return f.$setValidity("pattern",b.pattern(d,a.item[c.screenCd][e.id].inputLimit)),d};f.$formatters.push(h),f.$parsers.push(h)}if(a.item[c.screenCd][e.id].minChars){var i=function(d){return f.$setValidity("minlength",b.minlength(d,a.item[c.screenCd][e.id].minChars)),d};f.$formatters.push(i),f.$parsers.push(i)}if(a.item[c.screenCd][e.id].maxChars){var j=function(d){return f.$setValidity("maxlength",b.maxlength(d,a.item[c.screenCd][e.id].maxChars)),d};f.$formatters.push(j),f.$parsers.push(j)}}}}]).directive("owdNumber",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){for(var c="",d=!1,e=!1,f=0;f<a[0].attributes.length;f++){var g=a[0].attributes[f];0!==g.name.lastIndexOf("ng-",0)&&0!==g.name.lastIndexOf("ui-",0)||("ng-blur"==g.name?(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();"+g.value+'" ',d=!0):"ng-focus"==g.name?(c+="ng-focus=\"focusFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();"+g.value+'" ',e=!0):"ng-model"!==g.name&&"ng-disabled"!==g.name&&"ng-show"!==g.name&&"ng-class"!==g.name&&(c+=g.name+'="'+g.value+'" '))}d||(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']()\" "),e||(c+="ng-focus=\"focusFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']()\" "),c+=b.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",c+=b.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"";var h="";h+='<span><ng-form name="'+b.id+'form" novalidate>',h+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group '+b.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',h+='    <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',h+='    <input type="text" owd-numbervalid class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" ng-disabled="{0}" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+c+"/>",h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.pattern">{{item[screenCd]["'+b.id+'"].message}}</span>',h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.min">{{"minError" | owfMessage:item[screenCd]["'+b.id+'"].minNumber}}</span>',h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+b.id+'"].maxNumber}}</span>',h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+b.id+'"].integerLength}}</span>';var i="{{item[screenCd]['"+b.id+"'].decimalLength | number}}";for(h+='    <span class="help-block" ng-show="'+i+" > 0 && "+b.id+"form."+b.id+'.$error.decimalLength">{{"decimalLengthError" | owfMessage:item[screenCd]["'+b.id+'"].decimalLength}}</span>',h+='    <span class="help-block" ng-show="'+i+" <= 0 && "+b.id+"form."+b.id+'.$error.decimalLength">{{"integerError" | owfMessage}}</span>',b.owdValidateMessage&&(h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),h+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',h+="    <div ng-transclude></div>",h+="  </div>",h+="</ng-form></span>";h!=h.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)h=h.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;h!=h.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)h=h.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return h=h.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdNumbervalid",["$locale","$rootScope","validControl","$filter","$timeout",function(a,b,c,d,e){return{restrict:"A",scope:!1,require:"ngModel",link:function(e,f,g,h){if(e.blurFormats||(e.blurFormats={}),e.blurFormats[g.ngModel.replaceAll([".","[","]"],"")]=function(){var a=c.pattern(h.$viewValue,j);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var b=d("owfNumber")(h.$viewValue);h.$setViewValue(b),h.$render()}},e.focusFormats||(e.focusFormats={}),e.focusFormats[g.ngModel.replaceAll([".","[","]"],"")]=function(){var b=c.pattern(h.$viewValue,j);if(b&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var d=h.$viewValue.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");h.$setViewValue(d),h.$render()}},e.$watch(g.ngModel,function(){e.oneslogi[g.id].optionMessage.show&&(e.oneslogi[g.id].optionMessage.show=!1)}),void 0!=b.item[e.screenCd][g.id].necessary&&"1"==b.item[e.screenCd][g.id].necessary){f.attr("required","required");var i=function(a){return h.$setValidity("required",c.required(a)),a};h.$formatters.push(i),h.$parsers.push(i)}var j="^[-]?(0|[1-9][0-9]{0,2}(["+a.NUMBER_FORMATS.GROUP_SEP+"]?[0-9]{3})*)(\\"+a.NUMBER_FORMATS.DECIMAL_SEP+"[0-9]+)?$",k=function(a){var b=c.pattern(a,j);return h.$setValidity("pattern",b),b?d("owfNumber")(a):a},l=function(b){var d=c.pattern(b,j);if(h.$setValidity("pattern",d),d){if("string"==typeof b){var e=b.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");if(!e)return null;var f=parseFloat(e);if(0<f.toString().indexOf("e"))return b;var g=new Decimal(e);return f.toString()==g.toString()?f:b}return b}return b};h.$formatters.push(k),h.$parsers.push(l);var m=d("owfMessage"),n=m("numberError");if(n&&"numberError"!=n||(n=m("patternError")),b.item[e.screenCd][g.id].message=n,void 0!==b.item[e.screenCd][g.id].minNumber&&null!==b.item[e.screenCd][g.id].minNumber){var o=function(a){return h.$setValidity("min",c.min(a,b.item[e.screenCd][g.id].minNumber)),a};h.$formatters.push(o),h.$parsers.push(o)}if(b.item[e.screenCd][g.id].maxNumber){var p=function(a){return h.$setValidity("max",c.max(a,b.item[e.screenCd][g.id].maxNumber)),a};h.$formatters.push(p),h.$parsers.push(p)}if(b.item[e.screenCd][g.id].integerLength){var q=function(a){return h.$setValidity("integerLength",c.integerlength(a,b.item[e.screenCd][g.id].integerLength)),a};h.$formatters.push(q),h.$parsers.push(q)}if(void 0!==b.item[e.screenCd][g.id].decimalLength&&null!==b.item[e.screenCd][g.id].decimalLength){var r=function(a){return h.$setValidity("decimalLength",c.decimallength(a,b.item[e.screenCd][g.id].decimalLength)),a};h.$formatters.push(r),h.$parsers.push(r)}}}}]).directive("owdCalcNumber",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){for(var c="",d="",e=!1,f=!1,g=!1,h=!1,i=!1,j="",k="",l="",m=0;m<a[0].attributes.length;m++){var n=a[0].attributes[m];"owd-multitext-options"==n.name&&(j=n.value),"owd-multitext-id"==n.name&&(k=n.value),"owd-multitext-blur"==n.name&&(d+="ng-blur=\"blurFormatsMultiText['$multiTextModel']();blurCalcQty();"+n.value+';" ',h=!0),"owd-multitext-change"==n.name&&(d+='ng-change="blurCalcQty();'+n.value+';" ',i=!0),0!==n.name.lastIndexOf("ng-",0)&&0!==n.name.lastIndexOf("ui-",0)||("ng-blur"==n.name?(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();blurBreakdownQty();"+n.value+'" ',l=n.value,e=!0):"ng-focus"==n.name?(c+="ng-focus=\"focusFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();"+n.value+'" ',f=!0):"ng-change"==n.name?(c+='ng-change="blurBreakdownQty();'+n.value+'" ',g=!0):"ng-model"!==n.name&&"ng-disabled"!==n.name&&"ng-show"!==n.name&&"ng-class"!==n.name&&(c+=n.name+'="'+n.value+'" '))}e||(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();blurBreakdownQty()\" "),f||(c+="ng-focus=\"focusFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']()\" "),g||(c+='ng-change="blurBreakdownQty()" '),h||(d+="ng-blur=\"blurFormatsMultiText['$multiTextModel']();blurCalcQty()\" "),d+="ng-focus=\"focusFormatsMultiText['$multiTextModel']()\" ",i||(d+='ng-change="blurCalcQty()" '),b.owdValidate?(c+=" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"",d+=" ui-validate=\"{exterror:'!oneslogi."+b.id+"{11}.optionMessage.show' ,validator:'"+b.owdValidate+"'}\""):(c+=" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",d+=" ui-validate=\"{exterror:'!oneslogi."+b.id+"{11}.optionMessage.show'}\""),b.owdValidateWatch?(c+=" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"',d+=" ui-validate-watch=\"{exterror:'oneslogi."+b.id+"{11}.optionMessage.show', validator:"+b.owdValidateWatch+'}"'):(c+=" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"",d+=" ui-validate-watch=\"{exterror:'oneslogi."+b.id+"{11}.optionMessage.show'}\"");var o="";o+='<span><ng-form name="'+b.id+'form" novalidate>',o+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group '+b.owdGridSystemOption+'" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-disabled="{0}" ng-show="{1}">',o+="    <span ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+".$invalid || "+k+'form.$invalid }">',o+='      <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',o+="    </span>",o+='      <div class="input-group" style="display: flex;">',o+="        <span ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" style="display:flex;width:90%">',o+='          <input type="text" owd-calc-numbervalid class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" ng-disabled="{0}" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+c+"/>",o+='          <span style="padding-top:20px;min-width:25px;" ng-bind="'+j+"['"+b.id+"']['model'][0].defaultUnit\"></span>",o+="        </span>",o+='        <span class="pull-right" style="font-size:25px;margin-top:2px;">(</span>';var p="";o+='        <ng-form name="'+k+'form" novalidate>',o+='          <div class="pull-right" style="display:inline-block;max-width:125px;max-height:38px;font-size:0;">',o+='            <div style="display:inline-flex;font-size:14px;">',p=d.replaceAll("{10}","3").replaceAll("{11}",k+"4").replaceAll("$multiTextModel",j+"["+b.id+"][model][3].value"),o+="              <span ng-class=\"{ 'has-error' : "+k+"form."+k+'4.$invalid }">',o+='                <input type="text" style="height:19px;width:35px;padding:0px;" owd-calc-numbervalid class="form-control" owd-multitext-id="'+k+'" id="'+k+'4" name="'+k+'4" ng-trim="false" ng-model="'+j+"['"+b.id+"']['model'][3].value\" ng-disabled=\"((!item[screenCd]['"+k+"'].editable) || (!oneslogi['"+k+'4\'].editable))" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+p+"/>",o+="              </span>",o+='              <span style="height:19px;min-width:30px;" ng-bind="'+j+"['"+b.id+"']['model'][3].unit\"></span>",p=d.replaceAll("{10}","2").replaceAll("{11}",k+"3").replaceAll("$multiTextModel",j+"["+b.id+"][model][2].value"),o+="              <span ng-class=\"{ 'has-error' : "+k+"form."+k+'3.$invalid }">',o+='                <input type="text" style="height:19px;width:35px;padding:0px;" owd-calc-numbervalid class="form-control" owd-multitext-id="'+k+'" id="'+k+'3" name="'+k+'3" ng-trim="false" ng-model="'+j+"['"+b.id+"']['model'][2].value\" ng-disabled=\"((!item[screenCd]['"+k+"'].editable) || (!oneslogi['"+k+'3\'].editable))" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+p+"/>",
o+="              </span>",o+='              <span style="height:19px;min-width:30px;" ng-bind="'+j+"['"+b.id+"']['model'][2].unit\"></span>",o+="            </div>",o+='            <div style="display: inline-flex;font-size:14px;">',p=d.replaceAll("{10}","1").replaceAll("{11}",k+"2").replaceAll("$multiTextModel",j+"["+b.id+"][model][1].value"),o+="              <span ng-class=\"{ 'has-error' : "+k+"form."+k+'2.$invalid }">',o+='                <input type="text" style="height:19px;width:35px;padding:0px;" owd-calc-numbervalid class="form-control" owd-multitext-id="'+k+'" id="'+k+'2" name="'+k+'2" ng-trim="false" ng-model="'+j+"['"+b.id+"']['model'][1].value\" ng-disabled=\"((!item[screenCd]['"+k+"'].editable) || (!oneslogi['"+k+'2\'].editable))" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+p+"/>",o+="              </span>",o+='              <span style="height:19px;min-width:30px;" ng-bind="'+j+"['"+b.id+"']['model'][1].unit\"></span>",p=d.replaceAll("{10}","0").replaceAll("{11}",k+"1").replaceAll("$multiTextModel",j+"["+b.id+"][model][0].value"),o+="              <span ng-class=\"{ 'has-error' : "+k+"form."+k+'1.$invalid }">',o+='                <input type="text" style="height:19px;width:35px;padding:0px;" owd-calc-numbervalid class="form-control" owd-multitext-id="'+k+'" id="'+k+'1" name="'+k+'1" ng-trim="false" ng-model="'+j+"['"+b.id+"']['model'][0].value\" ng-disabled=\"((!item[screenCd]['"+k+"'].editable) || (!oneslogi['"+k+'1\'].editable))" ng-class="\'rightText\'" ondragstart="return false" ondrop="return false" '+p+"/>",o+="              </span>",o+='              <span style="height:19px;min-width:30px;" ng-bind="'+j+"['"+b.id+"']['model'][0].unit\"></span>",o+="            </div>",o+="          </div>",o+="        </ng-form>",o+='        <span class="pull-right" style="font-size:25px;margin-top:2px;">)</span>',o+="        </div>",o+="          <span ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }">',o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.pattern">{{item[screenCd]["'+b.id+'"].message}}</span>',o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.min">{{"minError" | owfMessage:item[screenCd]["'+b.id+'"].minNumber}}</span>',o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+b.id+'"].maxNumber}}</span>',o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+b.id+'"].integerLength}}</span>';var q="{{item[screenCd]['"+b.id+"'].decimalLength | number}}";o+='            <span class="help-block" ng-show="'+q+" > 0 && "+b.id+"form."+b.id+'.$error.decimalLength">{{"decimalLengthError" | owfMessage:item[screenCd]["'+b.id+'"].decimalLength}}</span>',o+='            <span class="help-block" ng-show="'+q+" <= 0 && "+b.id+"form."+b.id+'.$error.decimalLength">{{"integerError" | owfMessage}}</span>',b.owdValidateMessage&&(o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),o+='            <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',o+="          </span>";var r="";for(r+="          <span ng-class=\"{ 'has-error' : "+k+'form.$invalid }">',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.required">{{"requiredError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.pattern">{{item[screenCd]["'+k+'"].message}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.min">{{"minError" | owfMessage:item[screenCd]["'+k+'"].minNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+k+'"].maxNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+k+'"].integerLength}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.decimalLength">{{"integerError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'4.$error.exterror" ng-bind-html="oneslogi[\''+k+"4'].optionMessage.message\"></span>",r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.required">{{"requiredError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.pattern">{{item[screenCd]["'+k+'"].message}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.min">{{"minError" | owfMessage:item[screenCd]["'+k+'"].minNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+k+'"].maxNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+k+'"].integerLength}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.decimalLength">{{"integerError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'3.$error.exterror" ng-bind-html="oneslogi[\''+k+"3'].optionMessage.message\"></span>",r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.required">{{"requiredError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.pattern">{{item[screenCd]["'+k+'"].message}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.min">{{"minError" | owfMessage:item[screenCd]["'+k+'"].minNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+k+'"].maxNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+k+'"].integerLength}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.decimalLength">{{"integerError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'2.$error.exterror" ng-bind-html="oneslogi[\''+k+"2'].optionMessage.message\"></span>",r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.required">{{"requiredError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.pattern">{{item[screenCd]["'+k+'"].message}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.min">{{"minError" | owfMessage:item[screenCd]["'+k+'"].minNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.max">{{"maxError" | owfMessage:item[screenCd]["'+k+'"].maxNumber}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.integerLength">{{"integerLengthError" | owfMessage:item[screenCd]["'+k+'"].integerLength}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.decimalLength">{{"integerError" | owfMessage}}</span>',r+='            <span class="help-block" ng-show="'+k+"form."+k+'1.$error.exterror" ng-bind-html="oneslogi[\''+k+"1'].optionMessage.message\"></span>",r+="          </span>",o+=r,o+="    <div ng-transclude></div>",o+="  </div>",o+="</ng-form></span>";o!=o.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)o=o.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;o!=o.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)o=o.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return o=o.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","$rootScope","owsMaster","owsCommon","multiTextControl",function(a,b,c,d,e,f){d.setMaster(a,b,c);var g=(b.attr("id"),b.attr("owd-multitext-id")),h=[g+"1",g+"2",g+"3",g+"4"];d.setMasterMultiText(a,b,c,g,h),a.blurCalcQty=function(){var c=b.attr("id"),d=b.attr("owd-multitext-options"),g=a[d][c].model,h=b.attr("ng-model"),i=e.getDotValueNumber(a,h),j=b.attr("owd-multitext-id"),k=e.getCalcQty(i,g);e.setDotValue(a,h,k),f.checkDecimalInput(a,k,d,c,j)},a.blurBreakdownQty=function(){var c=b.attr("ng-model"),d=e.getDotValueNumber(a,c),g=b.attr("id"),h=b.attr("owd-multitext-options"),i=b.attr("owd-multitext-id");e.getCalcAuxiliaryBreakdown(a,d,h,g),f.checkDecimalInput(a,d,h,g,i)}}]}}]).directive("owdCalcNumbervalid",["$locale","$rootScope","validControl","$filter","$timeout",function(a,b,c,d,e){return{restrict:"A",scope:!1,require:"ngModel",link:function(e,f,g,h){e.blurFormats||(e.blurFormats={}),e.blurFormatsMultiText||(e.blurFormatsMultiText={});var i=f.attr("owd-multitext-id");if(void 0!=i&&""!=i?e.blurFormatsMultiText[g.ngModel.replaceAll("'","")]=function(){var a=c.pattern(h.$viewValue,k);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var b=d("owfNumber")(h.$viewValue);h.$setViewValue(b),h.$render()}}:e.blurFormats[g.ngModel.replaceAll([".","[","]"],"")]=function(){var a=c.pattern(h.$viewValue,k);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var b=d("owfNumber")(h.$viewValue);h.$setViewValue(b),h.$render()}},e.focusFormats||(e.focusFormats={}),e.focusFormatsMultiText||(e.focusFormatsMultiText={}),void 0!=i&&""!=i?e.focusFormatsMultiText[g.ngModel.replaceAll("'","")]=function(){var b=c.pattern(h.$viewValue,k);if(b&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var d=h.$viewValue.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");h.$setViewValue(d),h.$render()}}:e.focusFormats[g.ngModel.replaceAll([".","[","]"],"")]=function(){var b=c.pattern(h.$viewValue,k);if(b&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var d=h.$viewValue.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");h.$setViewValue(d),h.$render()}},void 0!=i&&""!=i){if(e.$watch(g.ngModel,function(){e.oneslogi[g.id].optionMessage.show&&(e.oneslogi[g.id].optionMessage.show=!1)}),void 0!=b.item[e.screenCd][i].necessary&&"1"==b.item[e.screenCd][i].necessary){f.attr("required","required");var j=function(a){return h.$setValidity("required",c.required(a)),a};h.$formatters.push(j),h.$parsers.push(j)}var k="^[-]?(0|[1-9][0-9]{0,2}(["+a.NUMBER_FORMATS.GROUP_SEP+"]?[0-9]{3})*)(\\"+a.NUMBER_FORMATS.DECIMAL_SEP+"[0-9]+)?$",l=function(a){var b=c.pattern(a,k);return h.$setValidity("pattern",b),b?d("owfNumber")(a):a},m=function(b){var d=c.pattern(b,k);if(h.$setValidity("pattern",d),d){if("string"==typeof b){var e=b.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");return e?e:null}return b}return b};h.$formatters.push(l),h.$parsers.push(m);var n=d("owfMessage"),o=n("numberError");if(o&&"numberError"!=o||(o=n("patternError")),b.item[e.screenCd][i].message=o,void 0!==b.item[e.screenCd][i].minNumber&&null!==b.item[e.screenCd][i].minNumber){var p=function(a){return h.$setValidity("min",c.min(a,b.item[e.screenCd][i].minNumber)),a};h.$formatters.push(p),h.$parsers.push(p)}if(b.item[e.screenCd][i].maxNumber){var q=function(a){return h.$setValidity("max",c.max(a,b.item[e.screenCd][i].maxNumber)),a};h.$formatters.push(q),h.$parsers.push(q)}if(b.item[e.screenCd][i].integerLength){var r=function(a){return h.$setValidity("integerLength",c.integerlength(a,b.item[e.screenCd][i].integerLength)),a};h.$formatters.push(r),h.$parsers.push(r)}if(void 0!==b.item[e.screenCd][i].decimalLength&&null!==b.item[e.screenCd][i].decimalLength){var s=function(a){return h.$setValidity("decimalLength",c.decimallength(a,b.item[e.screenCd][i].decimalLength)),a};h.$formatters.push(s),h.$parsers.push(s)}}else{if(e.$watch(g.ngModel,function(){e.oneslogi[g.id].optionMessage.show&&(e.oneslogi[g.id].optionMessage.show=!1)}),void 0!=b.item[e.screenCd][g.id].necessary&&"1"==b.item[e.screenCd][g.id].necessary){f.attr("required","required");var j=function(a){return h.$setValidity("required",c.required(a)),a};h.$formatters.push(j),h.$parsers.push(j)}var k="^[-]?(0|[1-9][0-9]{0,2}(["+a.NUMBER_FORMATS.GROUP_SEP+"]?[0-9]{3})*)(\\"+a.NUMBER_FORMATS.DECIMAL_SEP+"[0-9]+)?$",l=function(a){var b=c.pattern(a,k);return h.$setValidity("pattern",b),b?d("owfNumber")(a):a},m=function(b){var d=c.pattern(b,k);if(h.$setValidity("pattern",d),d){if("string"==typeof b){var e=b.replaceAll(a.NUMBER_FORMATS.GROUP_SEP,"");return e?e:null}return b}return b};h.$formatters.push(l),h.$parsers.push(m);var n=d("owfMessage"),o=n("numberError");if(o&&"numberError"!=o||(o=n("patternError")),b.item[e.screenCd][g.id].message=o,void 0!==b.item[e.screenCd][g.id].minNumber&&null!==b.item[e.screenCd][g.id].minNumber){var p=function(a){return h.$setValidity("min",c.min(a,b.item[e.screenCd][g.id].minNumber)),a};h.$formatters.push(p),h.$parsers.push(p)}if(b.item[e.screenCd][g.id].maxNumber){var q=function(a){return h.$setValidity("max",c.max(a,b.item[e.screenCd][g.id].maxNumber)),a};h.$formatters.push(q),h.$parsers.push(q)}if(b.item[e.screenCd][g.id].integerLength){var r=function(a){return h.$setValidity("integerLength",c.integerlength(a,b.item[e.screenCd][g.id].integerLength)),a};h.$formatters.push(r),h.$parsers.push(r)}if(void 0!==b.item[e.screenCd][g.id].decimalLength&&null!==b.item[e.screenCd][g.id].decimalLength){var s=function(a){return h.$setValidity("decimalLength",c.decimallength(a,b.item[e.screenCd][g.id].decimalLength)),a};h.$formatters.push(s),h.$parsers.push(s)}}}}}]).directive("owdTextarea",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!0,template:function(a,b){for(var c="",d=0;d<a[0].attributes.length;d++){var e=a[0].attributes[d];0!==e.name.lastIndexOf("ng-",0)&&0!==e.name.lastIndexOf("ui-",0)||"ng-model"!==e.name&&"ng-disabled"!==e.name&&"ng-show"!==e.name&&"ng-class"!==e.name&&(c+=e.name+'="'+e.value+'" ')}var f="2";b.owdRows&&(f=b.owdRows,c+=' rows="'+b.owdRows+'" '),c+=b.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",c+=b.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"";var g="";for(g+='<span><ng-form name="'+b.id+'form" novalidate>',g+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group-'+f+" "+b.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group-'+f+" col-xs-12 col-sm-6 col-md-4 col-lg-3\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group-'+f+" col-xs-12 col-sm-12 col-md-6 col-lg-6\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',g+='    <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',g+='    <textarea owd-textareavalid wrap="soft" class="form-control" id="'+b.id+'" name="'+b.id+'" ng-model="'+b.ngModel+'" ng-disabled="{0}" ng-class="{3}" '+c+"></textarea>",g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.pattern">{{item[screenCd]["'+b.id+'"].message}}</span>',g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.minlength">{{"minlengthError" | owfMessage:item[screenCd]["'+b.id+'"].minChars}}</span>',g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.maxlength">{{"maxlengthError" | owfMessage:item[screenCd]["'+b.id+'"].maxChars}}</span>',b.owdValidateMessage&&(g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',g+="    <div ng-transclude></div>",g+="  </div>",g+="</ng-form></span>";g!=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)g=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;g!=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)g=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return g=g.replace("{3}","item[screenCd]['"+b.id+"'].textAlign"),g=g.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdTextareavalid",["$rootScope","validControl",function(a,b){return{restrict:"A",scope:!1,require:"ngModel",link:function(c,d,e,f){if(c.$watch(e.ngModel,function(){c.oneslogi[e.id].optionMessage.show&&(c.oneslogi[e.id].optionMessage.show=!1)}),void 0!=a.item[c.screenCd][e.id].necessary&&"1"==a.item[c.screenCd][e.id].necessary){d.attr("required","required");var g=function(a){return f.$setValidity("required",b.required(a)),a};f.$formatters.push(g),f.$parsers.push(g)}if(a.item[c.screenCd][e.id].inputLimit){var h=function(d){return f.$setValidity("pattern",b.pattern(d,a.item[c.screenCd][e.id].inputLimit)),d};f.$formatters.push(h),f.$parsers.push(h)}if(a.item[c.screenCd][e.id].minChars){var i=function(d){return f.$setValidity("minlength",b.minlength(d,a.item[c.screenCd][e.id].minChars)),d};f.$formatters.push(i),f.$parsers.push(i)}if(a.item[c.screenCd][e.id].maxChars){var j=function(d){return f.$setValidity("maxlength",b.maxlength(d,a.item[c.screenCd][e.id].maxChars)),d};f.$formatters.push(j),f.$parsers.push(j)}}}}]).directive("owdSelect",["$rootScope","innerCommonFunc",function(a,b){return{restrict:"E",scope:!0,replace:!0,transclude:!0,template:function(a,c){for(var d="",e=0;e<a[0].attributes.length;e++){var f=a[0].attributes[e];0!==f.name.lastIndexOf("ng-",0)&&0!==f.name.lastIndexOf("ui-",0)||"ng-model"!==f.name&&"ng-disabled"!==f.name&&"ng-show"!==f.name&&"ng-class"!==f.name&&"ng-options"!==f.name&&(d+=f.name+'="'+f.value+'" ')}d+=c.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+c.id+".optionMessage.show' ,validator:'"+c.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+c.id+".optionMessage.show'}\"",d+=c.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+c.id+".optionMessage.show', validator:"+c.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+c.id+".optionMessage.show'}\"";var g="";null!=c.owdMultiple&&(g='style="overflow: visible;"');var h="";if(h+='<span><ng-form name="'+c.id+'form" novalidate>',h+=void 0!=c.owdGridSystemOption&&""!=c.owdGridSystemOption?"  <div "+g+' class="form-group '+c.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+c.id+"form."+c.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==c.owdTwoCol?"  <div "+g+' class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-class="{ \'has-error\' : '+c.id+"form."+c.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':"  <div "+g+' class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-class="{ \'has-error\' : '+c.id+"form."+c.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',h+='    <label id="'+c.id+'label" for="'+c.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',null==c.owdMultiple)h+="    <select ng-style=\"{'width': '100%'}\" owd-selectvalid owd-models=\""+c.owdModels+'" owd-repeat-key="'+c.owdRepeatKey+'" class="form-control" id="'+c.id+'" name="'+c.id+'" ng-model="'+c.ngModel+'" ng-disabled="{0}" ng-options="{2}" '+d+">{3}</select>";else{var i=b.getRepeatViewWithKey(c.owdRepeatViewWithKey);h+='    <multiselect id="'+c.id+'" name="'+c.id+'" ng-model="$parent.'+c.ngModel+'" ng-disabled="{0}" options="'+c.owdModels+'" id-prop="'+c.owdRepeatKey+'" display-prop="'+c.owdRepeatValue+'" view-display-with-id="'+i+'" search-limit="1000" show-select-all="true" show-unselect-all="true"></multiselect>'}for(null==c.owdMultiple&&(h+='    <span class="help-block" ng-show="'+c.id+"form."+c.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',c.owdValidateMessage&&(h+='    <span class="help-block" ng-show="'+c.id+"form."+c.id+'.$error.validator" ng-bind-html="'+c.owdValidateMessage+'"></span>'),h+='    <span class="help-block" ng-show="'+c.id+"form."+c.id+'.$error.exterror" ng-bind-html="oneslogi.'+c.id+'.optionMessage.message"></span>'),h+="    <div ng-transclude></div>",h+="  </div>",h+="</ng-form></span>";h!=h.replace("{0}","((!item[screenCd]['"+c.id+"'].editable) || (!oneslogi['"+c.id+"'].editable))");)h=h.replace("{0}","((!item[screenCd]['"+c.id+"'].editable) || (!oneslogi['"+c.id+"'].editable))");for(;h!=h.replace("{1}","((item[screenCd]['"+c.id+"'].visible) && (oneslogi['"+c.id+"'].show))");)h=h.replace("{1}","((item[screenCd]['"+c.id+"'].visible) && (oneslogi['"+c.id+"'].show))");if(null==c.owdMultiple){var j="obj.{0} as formatViewValue(obj) for obj in {2}",k="key",l="value";a.attr("owd-repeat-key")&&(k=a.attr("owd-repeat-key")),a.attr("owd-repeat-value")&&(l=a.attr("owd-repeat-value")),j=j.replace("{0}",k),j=j.replace("{1}",l),j=j.replace("{2}",a.attr("owd-models")),h=h.replace("{2}",j),h=""==a.attr("owd-remove-blank")?h.replace("{3}",""):h.replace("{3}",'<option value=""></option>')}return h=h.replace("{4}","item[screenCd]['"+c.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","owsMaster","owsCommon",function(c,d,e,f){e.setMaster(c,d,a);var g=d.attr("owd-models"),h="key",i="value",j=!0;d.attr("owd-repeat-key")&&(h=d.attr("owd-repeat-key")),d.attr("owd-repeat-value")&&(i=d.attr("owd-repeat-value")),d.attr("owd-repeat-view-with-key")&&(j=b.getRepeatViewWithKey(d.attr("owd-repeat-view-with-key")));var k=d.attr("ng-model");c.formatViewValue=function(a){return j?null==f.getDotValue(a,h)?f.getDotValue(a,i):f.getDotValue(a,h)+":"+f.getDotValue(a,i):f.getDotValue(a,i)},c.$watch(g,function(a,b){var d=!1;if(c[g]){var e=f.getDotValue(c,k),i=!1;if(angular.isArray(e)&&(i=!0),i){if(null!=e&&e.length>0){d=!0;for(var j,l={},m=0;m<c[g].length;m++)j=f.getDotValue(c[g][m],h),null==j||j in l||(l[j]=null);for(var m=0;m<e.length;m++)if(!(e[m]in l)){d=!1;break}}}else for(var m=0;m<c[g].length;m++)if(f.getDotValue(c[g][m],h)==e){d=!0;break}d||f.setDotValue(c,k,null)}})}]}}]).directive("owdSelectvalid",["$rootScope","validControl","owsCommon",function(a,b,c){return{restrict:"A",scope:!1,require:"ngModel",link:function(d,e,f,g){if(d.$watch(f.ngModel,function(){d.oneslogi[f.id].optionMessage.show&&(d.oneslogi[f.id].optionMessage.show=!1)}),void 0!=a.item[d.screenCd][f.id].necessary&&"1"==a.item[d.screenCd][f.id].necessary){e.attr("required","required");var h=function(a){return g.$setValidity("required",b.required(a)),a};g.$formatters.push(h),g.$parsers.push(h)}var i=e.attr("owd-models"),j="key";e.attr("owd-repeat-key")&&(j=e.attr("owd-repeat-key"));var k=function(a){var b=!1;if(d[i]){for(var e=d[i].length,f=0;f<e;f++)c.getDotValue(d[i][f],j)==a&&(b=!0);if(!b)return null}return a};g.$formatters.push(k),g.$parsers.push(k)}}}]).directive("owdDate",["$rootScope",function(a){return{restrict:"E",scope:!0,replace:!0,transclude:!0,template:function(a,b){for(var c="",d=!1,e=0;e<a[0].attributes.length;e++){var f=a[0].attributes[e];0!==f.name.lastIndexOf("ng-",0)&&0!==f.name.lastIndexOf("ui-",0)||("ng-blur"==f.name?(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();"+f.value+'" ',d=!0):"ng-model"!==f.name&&"ng-disabled"!==f.name&&"ng-show"!==f.name&&"ng-class"!==f.name&&(c+=f.name+'="'+f.value+'" '))}d||(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']()\" "),c+=b.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",c+=b.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"";var g="";for(g+='<span><ng-form name="'+b.id+'form" novalidate>',g+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group '+b.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',g+='    <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',g+='    <div class="input-group">',g+='      <input type="text" class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" owd-datepicker-popup="{{dateFormat}}" is-open="opened" button-id="'+b.id+'Button" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" show-button-bar="false" show-weeks="false" ng-disabled="{0}" '+c+' owd-datevalid datepicker-append-to-body="true" ondragstart="return false" ondrop="return false" />',g+='      <span class="input-group-btn">',g+='        <button type="button" tabindex="-1" id="'+b.id+'Button" name="'+b.id+'Button" class="btn btn-default" ng-click="openCal($event)" ng-disabled="{0}"><span class="glyphicon glyphicon-calendar"></span></button>',g+="      </span>",g+="    </div>",g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.date">{{"dateError" | owfMessage:dateFormat}}</span>',b.owdValidateMessage&&(g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',g+="    <div ng-transclude></div>",g+="  </div>",g+="</ng-form></span>";g!=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)g=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;g!=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)g=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return g=g.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","owsMaster",function(b,c,d){d.setMaster(b,c,a),b.openCal=function(a){b.opened?b.opened=!1:b.opened=!0}}]}}]).directive("owdDatevalid",["$rootScope","validControl","owsCommon","$timeout",function(a,b,c,d){return{restrict:"A",scope:!1,require:"ngModel",link:function(d,e,f,g){if(d.blurFormats||(d.blurFormats={}),d.blurFormats[f.ngModel.replaceAll([".","[","]"],"")]=function(){var a=c.stringDateFormat(g.$viewValue);g.$setViewValue(a),g.$render()},d.$watch(f.ngModel,function(){d.oneslogi[f.id].optionMessage.show&&(d.oneslogi[f.id].optionMessage.show=!1)}),void 0!=a.item[d.screenCd][f.id].necessary&&"1"==a.item[d.screenCd][f.id].necessary){e.attr("required","required");var h=function(a){return g.$setValidity("required",b.required(a)),a};g.$formatters.push(h),g.$parsers.push(h)}var i=function(a){return g.$setValidity("date",b.date(a,g.$modelValue)),a};g.$formatters.push(i),g.$parsers.push(i)}}}]).directive("owdTime",["$rootScope",function(a){return{restrict:"E",scope:!0,replace:!0,transclude:!0,template:function(a,b){for(var c="",d=!1,e=0;e<a[0].attributes.length;e++){var f=a[0].attributes[e];0!==f.name.lastIndexOf("ng-",0)&&0!==f.name.lastIndexOf("ui-",0)||("ng-blur"==f.name?(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']();"+f.value+'" ',d=!0):"ng-model"!==f.name&&"ng-disabled"!==f.name&&"ng-show"!==f.name&&"ng-class"!==f.name&&(c+=f.name+'="'+f.value+'" '))}d||(c+="ng-blur=\"blurFormats['"+b.ngModel.replaceAll([".","[","]"],"")+"']()\" "),c+=b.owdValidate?" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show' ,validator:'"+b.owdValidate+"'}\"":" ui-validate=\"{exterror:'!oneslogi."+b.id+".optionMessage.show'}\"",c+=b.owdValidateWatch?" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show', validator:"+b.owdValidateWatch+'}"':" ui-validate-watch=\"{exterror:'oneslogi."+b.id+".optionMessage.show'}\"";var g="";for(g+='<span><ng-form name="'+b.id+'form" novalidate>',g+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'  <div class="form-group '+b.owdGridSystemOption+"\" ng-class=\"{ 'has-error' : "+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':void 0==b.owdTwoCol?'  <div class="form-group col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">':'  <div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-class="{ \'has-error\' : '+b.id+"form."+b.id+'.$invalid }" ng-disabled="{0}" ng-show="{1}">',g+='    <label id="'+b.id+'label" for="'+b.id+'" class="control-label" ng-disabled="{0}" >{{{4}}}</label>',g+='    <input type="text" class="form-control" id="'+b.id+'" name="'+b.id+'" ng-trim="false" ng-model="'+b.ngModel+'" ng-disabled="{0}" ondragstart="return false" ondrop="return false" '+c+" owd-timevalid />",g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.required">{{"requiredError" | owfMessage}}</span>',g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.time">{{"timeError" | owfMessage:timeFormat}}</span>',b.owdValidateMessage&&(g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.validator" ng-bind-html="'+b.owdValidateMessage+'"></span>'),g+='    <span class="help-block" ng-show="'+b.id+"form."+b.id+'.$error.exterror" ng-bind-html="oneslogi.'+b.id+'.optionMessage.message"></span>',g+="    <div ng-transclude></div>",g+="  </div>",g+="</ng-form></span>";g!=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)g=g.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;g!=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)g=g.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");return g=g.replace("{4}","item[screenCd]['"+b.id+"'].itemNm")},require:"^?owdScreen",controller:["$scope","$element","owsMaster",function(b,c,d){d.setMaster(b,c,a)}]}}]).directive("owdTimevalid",["$rootScope","validControl","owsCommon","$timeout",function(a,b,c,d){return{restrict:"A",scope:!1,require:"ngModel",link:function(c,d,e,f){if(c.blurFormats||(c.blurFormats={}),c.blurFormats[e.ngModel.replaceAll([".","[","]"],"")]=function(){var a,b=f.$viewValue;void 0!=b&&null!=b&&(a=b.replace(/:/g,""));var c=/[0-9][0-9][0-5][0-9]/;null!=b&&4==a.length&&c.test(a)&&(b=a.substr(0,2)+":"+a.substr(2,2)),f.$setViewValue(b),f.$render()},c.$watch(e.ngModel,function(){c.oneslogi[e.id].optionMessage.show&&(c.oneslogi[e.id].optionMessage.show=!1)}),void 0!=a.item[c.screenCd][e.id].necessary&&"1"==a.item[c.screenCd][e.id].necessary){d.attr("required","required");var g=function(a){return f.$setValidity("required",b.required(a)),a};f.$formatters.push(g),f.$parsers.push(g)}var h=function(a){return f.$setValidity("time",b.time(a,f.$modelValue)),a};f.$formatters.push(h),f.$parsers.push(h);var i=function(a){var c;void 0!=a&&null!=a&&(c=a.replace(/:/g,""));
var d=/[0-9][0-9][0-5][0-9]/;return null!=a&&4==c.length&&d.test(c)&&(a=c.substr(0,2)+":"+c.substr(2,2)),f.$setValidity("time",b.time(a)),a},j=function(a){return f.$setValidity("time",b.time(a)),null==a||void 0==a?a:a.replace(/:/g,"")};f.$parsers.push(j),f.$formatters.push(i)}}}]).directive("owdCheckbutton",["$rootScope",function(a){return{restrict:"E",scope:!1,replace:!0,transclude:!1,template:function(a,b){for(var c="",d=0;d<a[0].attributes.length;d++){var e=a[0].attributes[d];0===e.name.lastIndexOf("ng-",0)&&"ng-model"!==e.name&&"ng-disabled"!==e.name&&"ng-show"!==e.name&&"ng-class"!==e.name&&(c+=e.name+'="'+e.value+'" ')}var f="",g=b.labelText;for(f+=void 0!=b.owdGridSystemOption&&""!=b.owdGridSystemOption?'<div class="'+b.owdGridSystemOption+'" ng-disabled="{0}" ng-show="{1}"><label>&nbsp;</label><br>':void 0==b.owdTwoCol?'<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-disabled="{0}" ng-show="{1}"><label>&nbsp;</label><br>':'<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-disabled="{0}" ng-show="{1}"><label>&nbsp;</label><br>',f+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-disabled="{0}" ng-show="{1}"><label>&nbsp;</label><br>',f+='  <button type="button" id="'+b.id+'label" class="btn btn-default" ng-model="'+b.ngModel+'" ng-disabled="{0}" btn-checkbox btn-checkbox-true="{2}" btn-checkbox-false="{3}" '+c+' label-text="'+g+'"><span ng-show="{5}" class="glyphicon glyphicon-unchecked"></span><span ng-show="{6}" class="glyphicon glyphicon-check"></span>{{{4}}}</button>',f+="</div>";f!=f.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");)f=f.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");for(;f!=f.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)f=f.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");var h="1",i="0";return a.attr("btn-checkbox-true")&&(h=a.attr("btn-checkbox-true")),a.attr("btn-checkbox-false")&&(i=a.attr("btn-checkbox-false")),f=f.replace("{2}",h),f=f.replace("{3}",i),f=f.replace("{4}","item[screenCd]['"+b.id+"'].itemNm"),f=f.replace("{5}",b.ngModel+" != '"+h+"'"),f=f.replace("{6}",b.ngModel+" == '"+h+"'")},controller:["$scope","$element","$rootScope","owsMaster",function(a,b,c,d){d.setMaster(a,b,c)}]}}]).directive("owdButton",["$rootScope",function(a){return{restrict:"E",priority:1e3,scope:!0,replace:!0,transclude:!1,controller:["$scope","$element","$rootScope","owsMaster","$interval","$parse","alertMessage",function(a,b,c,d,e,f,g){d.setMaster(a,b,c),a.clickDisable=function(){return b.attr("disabled","disabled"),e(function(){var c=b.attr("ng-disabled"),d=f(c);d(a)||b.removeAttr("disabled")},600,1)},a.clearAlerts=function(){g.deleteAll()}}],template:function(a,b){var c="",d=a.text();for(c+='<button type="button" class="btn" ng-disabled="{0}" ng-show="{1}" style="min-width:80px" label-text="'+d+'">{{{2}}}</button>',"undefined"!=typeof b.ngDisabled&&null!=b.ngDisabled&&""!=b.ngDisabled?(c=c.replace("{0}","(("+b.ngDisabled+") || (!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))"),b.ngDisabled=""):c=c.replace("{0}","((!item[screenCd]['"+b.id+"'].editable) || (!oneslogi['"+b.id+"'].editable))");c!=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");)c=c.replace("{1}","((item[screenCd]['"+b.id+"'].visible) && (oneslogi['"+b.id+"'].show))");c=c.replace("{2}","item[screenCd]['"+b.id+"'].itemNm");var e;return e=void 0==b.owdNoAlertClear?"clickDisable();clearAlerts();"+b.ngClick:"clickDisable();"+b.ngClick,b.ngClick=e,c}}}]).directive("owdFile",["$rootScope","fileUpload","alertMessage",function(a,b,c){return{restrict:"E",scope:!1,replace:!1,transclude:!1,template:function(a,b){var c="",d=a.text(),e="";b.class&&(e=" "+b.class);var f="";return b.ngDisabled&&(f=" "+b.ngDisabled),c+='<owd-button id="'+b.id+'" class="'+e+'" ng-disabled="'+f+'">'+d+"</owd-button>",c+='<span hidden="true" owd-file-input owd-name="'+b.id+'"',"undefined"!=typeof b.owdBeforeUpload&&(c+=' owd-before-upload="'+b.owdBeforeUpload+'"'),"undefined"!=typeof b.owdAfterDialog&&(c+=' owd-after-dialog="'+b.owdAfterDialog+'"'),"undefined"!=typeof b.owdSuccess&&(c+=' owd-success="'+b.owdSuccess+'"'),"undefined"!=typeof b.owdOptions&&(c+=' owd-options="'+b.owdOptions+'"'),c+="></span>",a.removeAttr("id"),a.removeAttr("class"),c},controller:["$scope","$element","owsMaster","alertMessage",function(b,c,d,e){d.setMaster(b,c,a)}]}}]).directive("owdFileInput",["$rootScope","fileUpload","alertMessage",function(a,b,c){return{restrict:"A",scope:!1,replace:!1,transclude:!1,template:function(a,b){var c="";return c+='<input type="file">'},controller:["$scope","$element","$filter","owsMaster",function(a,b,d,e){b.children().on("fileuploadfail",function(a,b){var e=d("owfMessage"),f=e("httpConnectionError",null,!1);c.setErrorMessage(f)});var f=b.attr("owd-options"),g={},h=null;g.pasteZone=null,g.autoUpload=!0,g.singleFileUploads=!0,g.minFileSize=1,g.maxFileSize=10485760,g.maxNumberOfFiles=1,g.formData=null,"undefined"!=typeof f&&null!=f&&""!=f&&(h=a[f].formData.data.input.columnDefs,a[f].formData.data.input.columnDefs=null,angular.extend(g,a[f])),b.children().fileupload(g);var i=!1;b.children().on("fileuploadprocessalways",function(e,f){if(0==f.index&&(i=!1),f.files[f.index].error&&!i){i=!0;var j,k=d("owfMessage"),l=f.files[f.index].error;return j=l==f.i18n("maxNumberOfFiles")?k("maxNumberOfFiles",null,!1):l==f.i18n("acceptFileTypes")?k("acceptFileTypes",null,!1):l==f.i18n("maxFileSize")?k("maxFileSize",null,!1):l==f.i18n("minFileSize")?k("minFileSize",null,!1):k("unknownError",null,!1),void c.setErrorMessage(j)}if(null!=g.formData&&null!=g.formData.data&&null!=g.formData.data.input&&null==g.formData.data.input.columnDefs){g.formData.data.input.columnDefs=[];for(var m=0,n=0;n<h.columnDefs.length;n++)h.columnDefs[n].visible&&(g.formData.data.input.columnDefs[m]={},g.formData.data.input.columnDefs[m].displayName=h.columnDefs[n].displayName,g.formData.data.input.columnDefs[m].field=h.columnDefs[n].field,g.formData.data.input.columnDefs[m].inColIndex=h.columnDefs[n].inColIndex,g.formData.data.input.columnDefs[m].inColDefaultValue=h.columnDefs[n].inColDefaultValue,m++);g.formData.data=$.base64.encode(angular.toJson(g.formData.data),!0),b.children().fileupload(g)}var o=b.attr("owd-after-dialog");"undefined"!=typeof o&&null!=o&&""!=o&&a[o]()});var j=b.attr("owd-success");"undefined"!=typeof j&&null!=j&&""!=j&&b.children().on("fileuploaddone",function(b,e){if($.isFunction(e.result.data)&&(e.result=angular.fromJson($(e.result[0].body).text())),e.result&&e.result.status&&e.result.status.statusCode<0){var f=d("owfMessage"),g=f(e.result.status.messageCode,e.result.status.messageReplaceValue,!1);return void c.setErrorMessage(g)}a.$apply(a[j](b,e))});var k=function(){c.deleteAll(),a.$apply();var d=b.attr("owd-before-upload");"undefined"!=typeof d&&null!=d&&""!=d&&a[d](),void 0!=a[f].formData.data&&void 0!=a[f].formData.data.input&&void 0!=a[f].formData.data.input.columnDefs&&null!=a[f].formData.data.input.columnDefs&&(h=a[f].formData.data.input.columnDefs,a[f].formData.data.input.columnDefs=null),angular.extend(g,a[f]),b.children().fileupload(g),b.children()[0].click()};b.parent().children("#"+b.attr("owd-name")).on("click",k)}]}}]).directive("owdGrid",["$rootScope","$locale","$timeout","$filter","$log","$compile","gridColExtService","owsCommon","gridMultiTextControl","uiGridConstants","$templateCache",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"A",scope:!0,compile:function(a,b,c){return{pre:function(a,b,c,d){var e=b.attr("owd-grid"),g=b.attr("id");b.removeAttr("id");var h="";a.$parent[e].enablePaging&&(h=" ui-grid-pagination");var i="";b.attr("ng-show")&&0<b.attr("ng-show").length&&(i=' ng-show="'+b.attr("ng-show")+'"');var l=' class="grid gridStyle';b.attr("class")&&(l+=b.attr("class"),b.removeAttr("class")),l+='"';var m="";b.attr("style")&&0<b.attr("style").length&&(m=' style="'+b.attr("style")+'"',b.removeAttr("style")),a.$parent[e].excessColumns||(a.$parent[e].excessColumns=1e3),a.$parent[e].enableHorizontalScrollbar||(a.$parent[e].enableHorizontalScrollbar=j.scrollbars.WHEN_NEEDED),a.$parent[e].enableVerticalScrollbar||(a.$parent[e].enableVerticalScrollbar=j.scrollbars.WHEN_NEEDED),a.$parent[e].gridFooterTemplate||(a.uiGridPagerHeight||(a.uiGridPagerHeight=function(a){var b=angular.element("#"+g+" > [ui-grid-pager]"),c=0;return b&&b.length>0&&(c=b[0].offsetHeight-5),a&&a>0&&(c-=a-30),c}),a.$parent[e].gridFooterTemplate='<div class="ui-grid-footer-info ui-grid-grid-footer" style="position:absolute;" ng-style="{bottom: grid.appScope.uiGridPagerHeight(grid.options.gridFooterHeight) + \'px\'}"><span class="ngLabel" ng-show="grid.options.enableChangeColumn"><span class="glyphicon glyphicon-cog" ng-click="grid.appScope.showDialog()" style="cursor:pointer;" ng-style="showDialogIconColor" ng-show="grid.options.enableChangeColumn"></span>&nbsp;</span><span>{{"search.totalItems" | t}}&nbsp;{{grid.rows.length}}&nbsp;</span>&nbsp;<span ng-if="0 < grid.rows.length && grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}}&nbsp;{{grid.renderContainers.body.visibleRowCache.length}})</span>&nbsp;<span ng-if="0 < grid.rows.length && grid.options.gridApi.selection.getSelectedRows().length !== 0 && grid.options.enableFooterTotalSelected && grid.options.multiSelect">({{"search.selectedItems" | t}}&nbsp;{{grid.options.gridApi.selection.getSelectedRows().length}})</span>'),k.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="grid.options.changePageNum(1)" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="grid.options.changePageNum(grid.options.pageNumber - 1)" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.pageNumber" ng-change="grid.options.changePageNum(grid.options.pageNumber)" step="1"> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/ </abbr>{{ paginationApi.getTotalPages() }} </span><button type="button" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="grid.options.changePageNum(grid.options.pageNumber + 1)" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="grid.options.changePageNum(paginationApi.getTotalPages())" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{ (grid.options.paginationCurrentPage - 1) * grid.options.paginationPageSize + 1 }} <abbr ui-grid-one-bind-title="paginationThrough">- </abbr>{{(grid.options.paginationCurrentPage - 1) * grid.options.paginationPageSize + grid.rows.length }} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>');var n='<div id="'+g+'" ui-grid="'+e+'" ui-grid-auto-resize ui-grid-edit ui-grid-pinning ui-grid-resize-columns ui-grid-selection'+h+i+l+m+"></div>";b.append(n),f(b.contents())(a)}}},controller:["$scope","$element",function(b,c){var f=!1,k=[],l=c,m=l.attr("owd-grid"),n=l.attr("id");b[m].pageNumber=1,b[m].changePageNum=function(a){a?(a>b[m].gridApi.pagination.getTotalPages()?a=b[m].gridApi.pagination.getTotalPages():a<=0&&(a=1),b[m].paginationCurrentPage=a,b[m].pageNumber=a):0==a&&(b[m].paginationCurrentPage=1,b[m].pageNumber=1)},b[m].onRegisterApi=function(a){b[m].gridApi=a,b[m].onGridRenderingComplete&&"function"==typeof b[m].onGridRenderingComplete&&b[m].onGridRenderingComplete(),b[m].afterSelectionChange&&"function"==typeof b[m].afterSelectionChange&&a.selection.on.rowSelectionChanged(b,b[m].afterSelectionChange),b[m].enablePaging&&b[m].pagingOptions&&b[m].pagingOptions.setPageData&&"function"==typeof b[m].pagingOptions.setPageData&&b[m].gridApi.pagination.on.paginationChanged(b,function(a,c){if(b[m].paginationCurrentPage=a,b[m].paginationPageSize=c,b[m].paginationCurrentPage!==b[m].pagingOptions.lastCurrentPage||b[m].paginationPageSize!==b[m].pagingOptions.lastPaginationPageSize){if(0===b[m].totalItems&&0===b[m].gridApi.grid.rows.length)return void(b[m].pageNumber=1);if(b[m].paginationPageSize!==b[m].pagingOptions.lastPaginationPageSize){b[m].gridApi.selection.clearSelectedRows();var d=b[m].data;return b.$parent.$parent.$parent[d]?b.$parent.$parent.$parent[d]=[]:b.$parent.$parent[d]?b.$parent.$parent[d]=[]:b.$parent[d]&&(b.$parent[d]=[]),b[m].totalItems=0,b[m].paginationCurrentPage=1,b[m].pagingOptions.lastCurrentPage=1,b[m].pagingOptions.lastPaginationPageSize=b[m].paginationPageSize,b[m].pageNumber=1,void(b[m].pagingOptions.setPageDataWhenPageSizeChanged&&"function"==typeof b[m].pagingOptions.setPageDataWhenPageSizeChanged&&b[m].pagingOptions.setPageDataWhenPageSizeChanged())}if(b[m].pagingOptions.currentPage<=0)return;if(b[m].pagingOptions.lastCurrentPage===b[m].paginationCurrentPage)return;b[m].pagingOptions.lastCurrentPage=b[m].paginationCurrentPage,b[m].pagingOptions.lastPaginationPageSize=b[m].paginationPageSize,b[m].pagingOptions.setPageData()}}),b[m].gridApi.grid.registerDataChangeCallback(function(a){var c=b[m].totalItems?Math.ceil(b[m].totalItems/b[m].paginationPageSize):1;c<b[m].pageNumber&&(b[m].pageNumber=c)},[j.dataChange.ROW])},b[m].customScroller=function(a,c){b[m].gridViewport=a,a.on("scroll",function(a){c(a)});for(var d=("onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]),e=function(a){document.activeElement&&document.activeElement.blur()},f=d.length;f;)a.on(d[--f],e)},b[m].getSelection=function(a){return a.isSelected},b[m].selectRow=function(a,c){return c?b[m].gridApi.selection.selectRowByVisibleIndex(a):b[m].gridApi.selection.unSelectRowByVisibleIndex(a)},b[m].columnDefs=b[b[m].columnDefs],b[m].pagingOptions&&(b[m].paginationPageSizes=b[m].pagingOptions.paginationPageSizes,b[m].paginationPageSize=b[m].pagingOptions.paginationPageSize,b[m].paginationCurrentPage=b[m].pagingOptions.paginationCurrentPage);var o=l.attr("owd-backcolor-option");null==o&&(o=""),""!=o&&(o.indexOf("grid.appScope.")==-1&&(o="grid.appScope."+o),o=' ng-class="'+o+'" ');var p=l.attr("owd-dblclick-option");null==p&&(p=""),""!=p&&(p.indexOf("grid.appScope.")==-1&&(p="grid.appScope."+p),p=' ng-dblclick="'+p+'" ');var q=l.attr("owd-mouseover-option");null==q&&(q=""),""!=q&&(q.indexOf("grid.appScope.")==-1&&(q="grid.appScope."+q),q=' ng-mouseover="'+q+'" ');var r="";b[m].enableRowSelection&&(r=' style="cursor:pointer"'),b[m].rowTemplate="<div"+o+p+q+' ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell"'+r+" ui-grid-cell ui-row-uid={{row.uid}}></div>";var s=!1;if(a.convertRowToRowIndex||(a.convertRowToRowIndex=function(a){for(var b=0;b<a.grid.rows.length;b++)if(a.grid.rows[b]===a)return b;throw new Error("convertRowToRowIndexメソッドに指定されたrowは不正です。")}),a.gridInputKeydown||(a.gridInputKeydown=function(a,b,c){var d=$(a.target);if(j.keymap.PG_UP===a.keyCode||j.keymap.PG_DOWN===a.keyCode)return d&&0<d.length&&d[0].blur(),!0;if(j.keymap.ENTER!==a.keyCode&&j.keymap.TAB!==a.keyCode)return!0;if(j.keymap.TAB===a.keyCode&&isNotTabNextFocus(d[0]))return!0;if(j.keymap.ENTER===a.keyCode&&isNotEnterNextFocus(d[0]))return!0;if(a.preventDefault(),a.stopPropagation(),customKeyDownNextFocusGridControl)return!1;customKeyDownNextFocusGridControl=!0;try{d[0].blur();var e=d.closest("div[ui-grid-row]");if(null==e||null==e.length||e.length<1)return customKeyDownNextFocusGridControl=!1,!1;var f=getNextObject(d[0],a.shiftKey),g=$(f).closest("div[ui-grid-row]"),h=e[0].getBoundingClientRect().top,i=e.closest("div[ui-grid]");if(0==g.length||h==g[0].getBoundingClientRect().top||!i.is(g.closest("div[ui-grid]")))return window.getSelection?window.getSelection().collapse(document.body,0):document.selection&&document.selection.empty(),f.focus(),f.select&&"button"!=f.type&&f.select(),setTimeout(function(){customKeyDownNextFocusGridControl=!1},10),!1;var k=b.options.gridViewport[0].getBoundingClientRect().top,l=h-k,m=a.shiftKey,n=b.options.gridViewport[0].scrollTop,o=(b.options.gridViewport[0].scrollHeight,b.options.gridViewport[0].offsetHeight),p=parseInt(o/c.$$height),q=d.closest("div .ui-grid-canvas");if(p<3)m?b.options.gridViewport[0].scrollTop=n-c.$$height:b.options.gridViewport[0].scrollTop=n+c.$$height;else{var r;r=p<5?1:2;var s=c.$$height*r;m?l<o-s-c.$$height&&(b.options.gridViewport[0].scrollTop=n-c.$$height):s<l&&(b.options.gridViewport[0].scrollTop=n+c.$$height)}for(var t,u=c.uid,v=0;v<b.rows.length;v++)u===b.rows[v].uid&&(t=m?b.rows[v-1].uid:b.rows[v+1].uid);var w=null,x=function(){try{w&&w();for(var a=q.find("div[ui-grid-row]"),b=0;b<a.length;b++){if(rowTemp=angular.element(a[b]).find("div[ui-row-uid]"),rowTemp.length<1)return void(customKeyDownNextFocusGridControl=!1);if(angular.element(rowTemp[0]).attr("ui-row-uid")===t){var c,d,e,f;return m?(c=$(a[b]).find(":input"),d=c[c.length-1],f=getNextObject(d,!0),e=getNextObject(f,!1),d=d==e?e:f):(c=$(a[b]).find(":input"),d=c[0],f=getNextObject(d,!1),e=getNextObject(f,!0),d=d==e?e:f),window.getSelection?window.getSelection().collapse(document.body,0):document.selection&&document.selection.empty(),d.focus(),d.select&&"button"!=d.type&&d.select(),void setTimeout(function(){customKeyDownNextFocusGridControl=!1},10)}}customKeyDownNextFocusGridControl=!1}catch(a){console.log("グリッド - 次行のフォーカス移動処理にて例外発生 : "+a),customKeyDownNextFocusGridControl=!1}finally{w=null}};return setTimeout(x,100),!1}catch(a){return console.log("グリッド - 次行のフォーカス移動処理にて例外発生 : "+a),customKeyDownNextFocusGridControl=!1,!1}}),a.colSettings||(a.colSettings={}),a.colSettings[b.screenCd]||(a.colSettings[b.screenCd]={}),a.column&&a.column[b.screenCd]&&a.column[b.screenCd][n]){var t,u=a.column[b.screenCd][n];l.attr("owd-form-name")&&(t=l.attr("owd-form-name")),g.changeShowDialogIconColor(b,u)&&a.$broadcast("isMismatchBColAndExtMessage",{});var v={};for(var w in u){if(v={field:u[w].bCol.colCd,enableCellEdit:!1,visible:"1"==u[w].bCol.visible,headerCellClass:"centerText",colType:u[w].bCol.colType,editable:"1"==u[w].bCol.editable},u[w].bDict&&(v.displayName=u[w].bDict.dictNm),u[w].bCol.textAlign&&"1"!=u[w].bCol.editable&&(v.cellClass=u[w].bCol.textAlign+"Text"),u[w].bCol.colWidth?v.width=u[w].bCol.colWidth:v.width="180",u[w].bCol.inColIndex&&(v.inColIndex=u[w].bCol.inColIndex),u[w].bCol.inColDefaultValue&&(v.inColDefaultValue=u[w].bCol.inColDefaultValue),a.colSettings[b.screenCd][u[w].bCol.colCd]={},"1"==u[w].bCol.editable?a.colSettings[b.screenCd][u[w].bCol.colCd].editable=!0:a.colSettings[b.screenCd][u[w].bCol.colCd].editable=!1,u[w].bCol.colType){for(var x=u[w].bCol.colCd.replaceAll([".","[","]"],"");x!=x.replaceAll([".","[","]"],"");)x=x.replaceAll([".","[","]"],"");"1"!=u[w].bCol.editable||"text"!=u[w].bCol.colType&&"number"!=u[w].bCol.colType&&"dropdown"!=u[w].bCol.colType&&"date"!=u[w].bCol.colType&&"time"!=u[w].bCol.colType||(void 0==b[m].rowHeight?b[m].rowHeight=gridEntryRowHeight:b[m].rowHeight<gridEntryRowHeight&&(b[m].rowHeight=gridEntryRowHeight));var y=d("owfMessage"),z=y(u[w].bColValid.limitMessageCd);z&&z!=u[w].bColValid.limitMessageCd||(z=y("patternError"));var A=b[l.attr("owd-event-options")],B="";if(A&&A[u[w].bCol.colCd])for(var C in A[u[w].bCol.colCd]){var D=A[u[w].bCol.colCd][C].eventFunction;D.indexOf("grid.appScope.")==-1&&(D="grid.appScope."+D),D=D.replaceAll("row.rowIndex","grid.appScope.convertRowToRowIndex(row)"),B+=C+'="'+D+'" '}var E=b[l.attr("owd-valid-add-options")],F="exterror:'!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+".optionMessage.show'",G="exterror:'grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+".optionMessage.show'";if(E&&E[u[w].bCol.colCd])for(var H in E[u[w].bCol.colCd])F&&(F+=","),F+=H+":'"+E[u[w].bCol.colCd][H].validateFunction+"' ",E[u[w].bCol.colCd][H].validateWatch&&(G&&(G+=","),G+=H+":'"+E[u[w].bCol.colCd][H].validateWatch);F='ui-validate="{'+F+'}" ui-validate-watch="{'+G+'}"';var I,J;if(I="calcnumber"==u[w].bCol.colType?'<span style="white-space:nowrap;"><ng-form name="gridform'+x+'" owd-form-name="'+t+'" novalidate><div class="form-group">':'<span style="white-space:nowrap;"><ng-form name="gridform'+x+'" owd-form-name="'+t+'" novalidate><div class="form-group" ng-class="{ \'has-error\' : gridform'+x+".gridcol"+x+'.$invalid }">',"text"==u[w].bCol.colType){var K=b[l.attr("owd-button-options")];if(K&&K[u[w].bCol.colCd]){var L=K[u[w].bCol.colCd].clickFunction;L.indexOf("grid.appScope.")==-1&&(L="grid.appScope."+L),L=L.replaceAll("row.rowIndex","grid.appScope.convertRowToRowIndex(row)"),I+='<div class="input-group" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))">',I+='<input type="text" class="ngCellText form-control '+u[w].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridtextvalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+" "+F+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+='<span class="input-group-btn"><button type="button" tabindex="-1" class="btn btn-default" ng-click="'+L+';$event.stopPropagation();" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))"><span class="glyphicon glyphicon-search"></span></button></span>',I+="</div>"}else I+='<input type="text" class="ngCellText form-control '+u[w].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridtextvalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+" "+F+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>';I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>',I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.pattern">'+z+"</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.minlength">{{"minlengthError" | owfMessage:'+u[w].bColValid.minChars+"}}</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[w].bColValid.maxChars+"}}</span>"}else if("number"==u[w].bCol.colType)z=y("numberError"),z&&"numberError"!=z||(z=y("patternError")),B.indexOf("ng-blur")==-1?B+='ng-blur="blurFormat()" ':B=B.replace('ng-blur="','ng-blur="blurFormat();'),B.indexOf("ng-focus")==-1?B+='ng-focus="focusFormat()" ':B=B.replace('ng-focus="','ng-focus="focusFormat();'),I+='<input type="text" class="ngCellText form-control '+u[w].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridnumbervalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+" "+F+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>',I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.pattern">'+z+"</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.minlength">{{"minlengthError" | owfMessage:'+u[w].bColValid.minChars+"}}</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[w].bColValid.maxChars+"}}</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.min">{{"minError" | owfMessage:'+u[w].bColValid.minNumber+"}}</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.max">{{"maxError" | owfMessage:'+u[w].bColValid.maxNumber+"}}</span>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[w].bColValid.integerLength+"}}</span>",I+=u[w].bColValid.decimalLength&&0<u[w].bColValid.decimalLength?'<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[w].bColValid.decimalLength+"}}</span>":'<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.decimalLength">{{"integerError" | owfMessage}}</span>';else if("calcnumber"==u[w].bCol.colType){s=!0;var M="grid.appScope."+l.attr("owd-grid-multitext-options"),N=b[l.attr("owd-multitext-options")],O="";if(A&&A[N[u[w].bCol.colCd].multiTextCd])for(var P in A[N[u[w].bCol.colCd].multiTextCd])O+=P+'="'+A[N[u[w].bCol.colCd].multiTextCd][P].eventFunction+'" ';var Q="exterror:'!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+N[u[w].bCol.colCd].multiTextCd+"{0}.optionMessage.show'",R="exterror:'grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+N[u[w].bCol.colCd].multiTextCd+"{0}.optionMessage.show'";if(E&&E[N[u[w].bCol.colCd].multiTextCd])for(var S in E[N[u[w].bCol.colCd].multiTextCd])Q&&(Q+=","),Q+=S+":'"+E[u[w].bCol.colCd][S].validateFunction+"' ",E[u[w].bCol.colCd][S].validateWatch&&(R&&(R+=","),R+=S+":'"+E[u[w].bCol.colCd][S].validateWatch);if(Q='ui-validate="{'+Q+'}" ui-validate-watch="{'+R+'}"',z=y("numberError"),z&&"numberError"!=z||(z=y("patternError")),B.indexOf("ng-blur")==-1?B+="ng-blur=\"blurFormat();grid.appScope.blurGridBreakdownQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row))\" ":B=B.replace('ng-blur="',"ng-blur=\"blurFormat();grid.appScope.blurGridBreakdownQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row));"),B.indexOf("ng-focus")==-1?B+='ng-focus="focusFormat()" ':B=B.replace('ng-focus="','ng-focus="focusFormat();'),B.indexOf("ng-change")==-1?B+="ng-change=\"grid.appScope.blurGridBreakdownQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row))\" ":B=B.replace('ng-change="',"ng-change=\"grid.appScope.blurGridBreakdownQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row));"),O.indexOf("ng-blur")==-1?O+="ng-blur=\"blurFormat();grid.appScope.blurGridCalcQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row))\" ":O=O.replace('ng-blur="',"ng-blur=\"blurFormat();grid.appScope.blurGridCalcQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row));"),O.indexOf("ng-focus")==-1?O+='ng-focus="focusFormat()" ':O=O.replace('ng-focus="','ng-focus="focusFormat();'),O.indexOf("ng-change")==-1?O+="ng-change=\"grid.appScope.blurGridCalcQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row))\" ":O=O.replace('ng-change="',"ng-change=\"grid.appScope.blurGridCalcQty('"+u[w].bCol.colCd+"', grid.appScope.convertRowToRowIndex(row));"),N&&N[u[w].bCol.colCd]){I+='<div class="input-group" style="display:flex;">',I+='  <span style="display:flex;width:90%">',I+="    <span ng-class=\"{ 'has-error' : gridform"+x+".gridcol"+x+'.$invalid }">',I+='      <input type="text" class="ngCellText form-control '+u[w].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridcalcnumbervalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+" "+F+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+="    </span>",I+='    <span style="padding-top:20px;min-width:30px;" ng-bind="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[0].defaultUnit\"></span>",I+="  </span>",I+='  <span class="pull-right" style="font-size:25px;margin-top:2px;">(</span>',I+='  <ng-form name="gridform'+N[u[w].bCol.colCd].multiTextCd+'" owd-form-name="'+t+'" novalidate>',I+='    <div class="pull-right" style="display:inline-block;max-width:130px;">',I+='      <div style="display:flex;">';var T=N[u[w].bCol.colCd].multiTextCd+"4",U=Q.replaceAll("{0}","4");I+="        <span ng-class=\"{ 'has-error' : gridform"+N[u[w].bCol.colCd].multiTextCd+".gridcol"+T+'.$invalid }">',I+='          <input type="text" style="height:19px;width:35px;padding:0px;" class="ngCellText form-control '+u[N[u[w].bCol.colCd].multiTextCd].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+N[u[w].bCol.colCd].multiTextCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+T+".editable)) || "+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[3].initFlg " owd-gridcalcnumbervalid="'+n+"@"+N[u[w].bCol.colCd].multiTextCd+'" ng-input="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[3].value" name="gridcol'+T+'" ng-model="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[3].value\" "+O+" "+U+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+="        </span>",I+='        <span style="height:19px;width:30px;" ng-bind="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[3].unit\"></span>";var V=N[u[w].bCol.colCd].multiTextCd+"3",W=Q.replaceAll("{0}","3");
I+="        <span ng-class=\"{ 'has-error' : gridform"+N[u[w].bCol.colCd].multiTextCd+".gridcol"+V+'.$invalid }">',I+='          <input type="text" style="height:19px;width:35px;padding:0px;" class="ngCellText form-control '+u[N[u[w].bCol.colCd].multiTextCd].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+N[u[w].bCol.colCd].multiTextCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+V+".editable)) || "+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[2].initFlg " owd-gridcalcnumbervalid="'+n+"@"+N[u[w].bCol.colCd].multiTextCd+'" ng-input="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[2].value" name="gridcol'+V+'" ng-model="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[2].value\" "+O+" "+W+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+="        </span>",I+='        <span style="height:19px;width:28px;" ng-bind="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[2].unit\"></span>",I+="      </div>",I+='      <div style="display:flex;">';var X=N[u[w].bCol.colCd].multiTextCd+"2",Y=Q.replaceAll("{0}","2");I+="        <span ng-class=\"{ 'has-error' : gridform"+N[u[w].bCol.colCd].multiTextCd+".gridcol"+X+'.$invalid }">',I+='          <input type="text" style="height:19px;width:35px;padding:0px;" class="ngCellText form-control '+u[N[u[w].bCol.colCd].multiTextCd].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+N[u[w].bCol.colCd].multiTextCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+X+".editable)) || "+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[1].initFlg " owd-gridcalcnumbervalid="'+n+"@"+N[u[w].bCol.colCd].multiTextCd+'" ng-input="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[2].value" name="gridcol'+X+'" ng-model="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[1].value\" "+O+" "+Y+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+="        </span>",I+='        <span style="height:19px;width:30px;" ng-bind="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[1].unit\"></span>";var Z=N[u[w].bCol.colCd].multiTextCd+"1",_=Q.replaceAll("{0}","1");I+="        <span ng-class=\"{ 'has-error' : gridform"+N[u[w].bCol.colCd].multiTextCd+".gridcol"+Z+'.$invalid }">',I+='          <input type="text" style="height:19px;width:35px;padding:0px;" class="ngCellText form-control '+u[N[u[w].bCol.colCd].multiTextCd].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+N[u[w].bCol.colCd].multiTextCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+Z+".editable)) || "+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[0].initFlg " owd-gridcalcnumbervalid="'+n+"@"+N[u[w].bCol.colCd].multiTextCd+'" ng-input="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+'\'].model[0].value" name="gridcol'+Z+'" ng-model="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[0].value\" "+O+" "+_+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+="        </span>",I+='        <span style="height:19px;width:28px;" ng-bind="'+M+"[grid.appScope.convertRowToRowIndex(row)]['"+u[w].bCol.colCd+"'].model[0].unit\"></span>",I+="      </div>",I+="    </div>",I+="  </ng-form>",I+='  <span class="pull-right" style="font-size:25px;margin-top:2px;">)</span>',I+="</div>",I+="<span ng-class=\"{ 'has-error' : gridform"+x+".gridcol"+x+'.$invalid }">',I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>',I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>',I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.pattern">'+z+"</span>",I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.minlength">{{"minlengthError" | owfMessage:'+u[w].bColValid.minChars+"}}</span>",I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[w].bColValid.maxChars+"}}</span>",I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.min">{{"minError" | owfMessage:'+u[w].bColValid.minNumber+"}}</span>",I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.max">{{"maxError" | owfMessage:'+u[w].bColValid.maxNumber+"}}</span>",I+='  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[w].bColValid.integerLength+"}}</span>",I+=u[w].bColValid.decimalLength&&0<u[w].bColValid.decimalLength?'  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[w].bColValid.decimalLength+"}}</span>":'  <span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.decimalLength">{{"integerError" | owfMessage}}</span>',J="<span ng-class=\"{ 'has-error' : gridform"+N[u[w].bCol.colCd].multiTextCd+'.$invalid }">',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.required">{{"requiredError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.pattern">'+z+"</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.minlength">{{"minlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.min">{{"minError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.max">{{"maxError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.integerLength+"}}</span>",J+=u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength&&0<u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength?'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength+"}}</span>":'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.decimalLength">{{"integerError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'4.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+N[u[w].bCol.colCd].multiTextCd+'4.optionMessage.message"></span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.required">{{"requiredError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.pattern">'+z+"</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.minlength">{{"minlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.min">{{"minError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.max">{{"maxError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.integerLength+"}}</span>",J+=u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength&&0<u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength?'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength+"}}</span>":'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.decimalLength">{{"integerError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'3.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+N[u[w].bCol.colCd].multiTextCd+'3.optionMessage.message"></span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.required">{{"requiredError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.pattern">'+z+"</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.minlength">{{"minlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.min">{{"minError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.max">{{"maxError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.integerLength+"}}</span>",J+=u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength&&0<u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength?'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength+"}}</span>":'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.decimalLength">{{"integerError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'2.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+N[u[w].bCol.colCd].multiTextCd+'2.optionMessage.message"></span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.error.required">{{"requiredError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.pattern">'+z+"</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.minlength">{{"minlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.maxlength">{{"maxlengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxChars+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.min">{{"minError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.minNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.max">{{"maxError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.maxNumber+"}}</span>",J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.integerLength">{{"integerLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.integerLength+"}}</span>",J+=u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength&&0<u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength?'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.decimalLength">{{"decimalLengthError" | owfMessage:'+u[N[u[w].bCol.colCd].multiTextCd].bColValid.decimalLength+"}}</span>":'  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.decimalLength">{{"integerError" | owfMessage}}</span>',J+='  <span class="help-block" ng-show="gridform'+N[u[w].bCol.colCd].multiTextCd+".gridcol"+N[u[w].bCol.colCd].multiTextCd+'1.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+N[u[w].bCol.colCd].multiTextCd+'1.optionMessage.message"></span>',J+="</span>"}}else if("time"==u[w].bCol.colType)B.indexOf("ng-blur")==-1?B+='ng-blur="blurFormat()" ':B=B.replace('ng-blur="','ng-blur="blurFormat();'),I+='<input type="text" class="ngCellText form-control '+u[w].bCol.textAlign+'Text" ng-trim="false" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridtimevalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+" "+F+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>',I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.time">{{"timeError" | owfMessage:timeFormat}}</span>';else if("dropdown"==u[w].bCol.colType){var aa=b[l.attr("owd-select-options")];if(aa&&aa[u[w].bCol.colCd]){var ba="key",ca="value",da="true",ea=!1;aa[u[w].bCol.colCd].key&&(ba=aa[u[w].bCol.colCd].key),aa[u[w].bCol.colCd].value&&(ca=aa[u[w].bCol.colCd].value),"undefined"!=typeof aa[u[w].bCol.colCd].viewWithKey&&(da=aa[u[w].bCol.colCd].viewWithKey,"boolean"==typeof da&&(da=""+da)),"undefined"!=typeof aa[u[w].bCol.colCd].removeBlank&&(ea=!0);var fa=aa[u[w].bCol.colCd].listModel;fa=fa.replaceAll("row.rowIndex","grid.appScope.convertRowToRowIndex(row)"),I+="<select ng-style=\"{'width': '100%'}\" class=\"ngCellText form-control "+u[w].bCol.textAlign+'Text" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" owd-gridselectvalid="'+n+"@"+u[w].bCol.colCd+'" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" ng-options="obj.'+ba+" as formatViewValue(obj) for obj in grid.appScope."+fa+'"  '+B+" "+F+' owd-models="'+fa+'" owd-repeat-key="'+ba+'" owd-repeat-value="'+ca+'" owd-repeat-view-with-key="'+da+'" ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)">',ea||(I+='<option value=""></option>'),I+="</select>",I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.required">{{"requiredError" | owfMessage}}</span>'}}if(E&&E[u[w].bCol.colCd])for(var H in E[u[w].bCol.colCd])I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+".$error."+H+'" ng-bind-html="'+E[u[w].bCol.colCd][H].validateMessage+'"></span>';if(I+='<span class="help-block" ng-show="gridform'+x+".gridcol"+x+'.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+x+'.optionMessage.message"></span>',"calcnumber"==u[w].bCol.colType&&(I+="</span>",I+=J),I+="</div></ng-form></span>","date"==u[w].bCol.colType){var ga="",ha="";E&&E[u[w].bCol.colCd]&&(ga=" owd-validate='"+$.base64.encode(angular.toJson(E[u[w].bCol.colCd]),!0)+"' "),A&&A[u[w].bCol.colCd]&&(ha=" owd-event='"+$.base64.encode(angular.toJson(A[u[w].bCol.colCd]),!0)+"' "),I='<span style="white-space:nowrap;" owd-griddate parent-form="'+t+'" col-id="'+n+'" col-cd="'+u[w].bCol.colCd+'" col-nm="'+x+'" col-field="MODEL_COL_FIELD" date-format="'+a.dateFormat+'" text-align="'+u[w].bCol.textAlign+'"  ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" grid-option="'+m+'" '+ga+ha+"></span>"}if("button"==u[w].bCol.colType){var K=b[l.attr("owd-button-options")],L=K[u[w].bCol.colCd].clickFunction;L.indexOf("grid.appScope.")==-1&&(L="grid.appScope."+L),L=L.replaceAll("row.rowIndex","grid.appScope.convertRowToRowIndex(row)"),K&&K[u[w].bCol.colCd]&&(v.minWidth=40,I='<button type="button" class="btn btn-default form-control" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" ng-click="'+L+';$event.stopPropagation();" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)">',K[u[w].bCol.colCd].text&&(I+=K[u[w].bCol.colCd].text),K[u[w].bCol.colCd].icon&&(I+='<span class="glyphicon '+K[u[w].bCol.colCd].icon+'"></span>'),I+="</button>")}if("checkbox"==u[w].bCol.colType){var ia=b[l.attr("owd-checkbox-options")],ja="1",ka="0",la="";ia&&ia[u[w].bCol.colCd]&&(ia[u[w].bCol.colCd].trueValue&&(ja=ia[u[w].bCol.colCd].trueValue),ia[u[w].bCol.colCd].falseValue&&(ka=ia[u[w].bCol.colCd].falseValue),ia[u[w].bCol.colCd].changeFunction&&(la=ia[u[w].bCol.colCd].changeFunction)),I='<span><div align="center">',I+='<input type="checkbox" style="margin-top:9px;" ng-true-value="\''+ja+"'\" ng-false-value=\"'"+ka+'\'" ng-change="'+la+'" ng-disabled="((!grid.appScope.colSettings[grid.appScope.screenCd][\''+u[w].bCol.colCd+"'].editable) || (!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+x+'.editable))" ng-input="MODEL_COL_FIELD" name="gridcol'+x+'" ng-model="MODEL_COL_FIELD" '+B+' ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)"/>',I+="</div></span>",v.minWidth=30}"1"!=u[w].bCol.editable||"button"!=u[w].bCol.colType&&"text"!=u[w].bCol.colType&&"number"!=u[w].bCol.colType&&"calcnumber"!=u[w].bCol.colType&&"date"!=u[w].bCol.colType&&"dropdown"!=u[w].bCol.colType&&"checkbox"!=u[w].bCol.colType&&"time"!=u[w].bCol.colType?("date"==u[w].bCol.colType&&(v.cellFilter="owfDateFromString"),"time"==u[w].bCol.colType&&(v.cellFilter="owfTimeFromString"),"datetime"==u[w].bCol.colType&&(a.utcTime?v.cellFilter="date:'medium':'"+a.utcTime+"'":v.cellFilter="date:'medium'"),"number"==u[w].bCol.colType&&(gridNumColExtView&&u[w].bColValid.decimalLength&&u[w].bColValid.decimalLength>0?v.cellFilter="number:"+u[w].bColValid.decimalLength:v.cellFilter="number"),"calcnumber"==u[w].bCol.colType&&(v.cellFilter="number"),"checkbox"==u[w].bCol.colType&&(v.cellTemplate=I)):(v.cellTemplate=I,v.editableCellTemplate=null,f=!0)}k.push(v)}void 0==b[m].rowHeight&&(b[m].rowHeight=gridViewRowHeight)}if(k.length>0){var ma;ma="string"==typeof b[m].columnDefs?b[b[m].columnDefs]:b[m].columnDefs;for(var w=0;w<ma.length;w++)for(var na=0;na<k.length;na++)if(ma[w].field===k[na].field){k[na]=angular.copy(k[na],ma[w]);break}b[m].columnDefs=k,f&&(b[m].oneslogi=[],b[m].onGridRenderingComplete=function(a,c){b[m].gridApi.grid.registerDataChangeCallback(function(a){e.debug("uiGridEventData event is fire!");var c;if(c="string"==typeof b[m].data?b[b[m].data]:b[m].data,null==c)return b[m].oneslogi=[],void e.debug("[uiGridEventData event]dataObj is null.");var d=c.length;if(null==d)return b[m].oneslogi=[],void e.debug("[uiGridEventData event]dataObj.dataLength is null.");null==b[m].oneslogi&&(b[m].oneslogi=[]);var f;b[m].oneslogi.length;f="string"==typeof b[m].columnDefs?b[b[m].columnDefs]:b[m].columnDefs;var g=b[m].oneslogi;b[m].oneslogi=[];for(var h=0;h<d;h++){for(var i=!1,j=0;j<g.length;j++)if(g[j].entity==c[h]){i=!0,b[m].oneslogi.push(g[j]),g.splice(j,1);break}if(!i)if(g[h]){b[m].oneslogi[h]=g[h],b[m].oneslogi[h].entity=c[h],b[m].oneslogi[h].config.validity=!0;for(var k=0;k<f.length;k++){if(f[k].editable){for(var n=f[k].field.replaceAll([".","[","]"],"");n!=n.replaceAll([".","[","]"],"");)n=n.replaceAll([".","[","]"],"");b[m].oneslogi[h].config[n].editable=!0,b[m].oneslogi[h].config[n].optionMessage={},b[m].oneslogi[h].config[n].optionMessage.show=!1,b[m].oneslogi[h].config[n].optionMessage.message=""}if("calcnumber"==f[k].colType){for(var n=f[k].field.replaceAll([".","[","]"],"");n!=n.replaceAll([".","[","]"],"");)n=n.replaceAll([".","[","]"],"");for(var o,p=b[l.attr("owd-multitext-options")],q=p[f[k].field].model,r=p[f[k].field].multiTextCd,s=(c[h],0);s<f.length;s++)if(f[s].field==r){o=s;break}for(var t=0;t<q.length;t++){var u=r+(t+1);b[m].oneslogi[h].config[u]={},b[m].oneslogi[h].config[u].defaultEditable=f[o].editable,b[m].oneslogi[h].config[u].editable=!0,b[m].oneslogi[h].config[u].optionMessage={},b[m].oneslogi[h].config[u].optionMessage.show=!1,b[m].oneslogi[h].config[u].optionMessage.message=""}}}}else{b[m].oneslogi[h]={},b[m].oneslogi[h].entity=c[h],b[m].oneslogi[h].config={},b[m].oneslogi[h].config.validity=!0;for(var k=0;k<f.length;k++){if(f[k].editable){for(var n=f[k].field.replaceAll([".","[","]"],"");n!=n.replaceAll([".","[","]"],"");)n=n.replaceAll([".","[","]"],"");b[m].oneslogi[h].config[n]={},b[m].oneslogi[h].config[n].editable=!0,b[m].oneslogi[h].config[n].optionMessage={},b[m].oneslogi[h].config[n].optionMessage.show=!1,b[m].oneslogi[h].config[n].optionMessage.message=""}if("calcnumber"==f[k].colType){for(var n=f[k].field.replaceAll([".","[","]"],"");n!=n.replaceAll([".","[","]"],"");)n=n.replaceAll([".","[","]"],"");for(var o,p=b[l.attr("owd-multitext-options")],q=p[f[k].field].model,r=p[f[k].field].multiTextCd,s=(c[h],0);s<f.length;s++)if(f[s].field==r){o=s;break}for(var t=0;t<q.length;t++){var u=r+(t+1);b[m].oneslogi[h].config[u]={},b[m].oneslogi[h].config[u].defaultEditable=f[o].editable,b[m].oneslogi[h].config[u].editable=!0,b[m].oneslogi[h].config[u].optionMessage={},b[m].oneslogi[h].config[u].optionMessage.show=!1,b[m].oneslogi[h].config[u].optionMessage.message=""}}}}}e.debug("[uiGridEventData event]oneslogi length="+b[m].oneslogi.length)},[j.dataChange.ROW])})}b.showDialog=function(){g.showUserSettingDialog(b.screenCd,n,b[m].columnDefs,b[m],b)},s&&(b.blurGridBreakdownQty=function(a,c){var d=l.attr("owd-grid-multitext-options"),e=h.getDotValueNumber(b[n][c],a);h.getGridCalcAuxiliaryBreakdown(b,e,d,a,c),i.checkDecimalInput(b,e,b[m],d,a,c)},b.blurGridCalcQty=function(a,c){var d=l.attr("owd-grid-multitext-options"),e=h.getDotValueNumber(b[n][c],a),f=b[d][c][a].model,g=h.getCalcQty(e,f);h.setDotValue(b[n][c],a,g),i.checkDecimalInput(b,g,b[m],d,a,c)}),b.$watchCollection(b[m].data,function(a,c,d){if(c&&0<c.length&&!a){var e=b[m].data;null===d.$parent.$parent.$parent[e]?d.$parent.$parent.$parent[e]=[]:null===d.$parent.$parent[e]?d.$parent.$parent[e]=[]:null===d.$parent[e]&&(d.$parent[e]=[])}})}]}}]).directive("owdGriddate",["$rootScope",function(a){return{restrict:"A",scope:!0,replace:!0,template:function(a,b){var c,d="exterror:'!grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+b.colNm+".optionMessage.show'",e="exterror:'grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config."+b.colNm+".optionMessage.show'";if(b.owdValidate&&(c=angular.fromJson($.base64.decode(b.owdValidate,!0))))for(var f in c)d&&(d+=","),d+=f+":'"+c[f].validateFunction+"' ",c[f].validateWatch&&(e&&(e+=","),e+=c[f].validateWatch);d='ui-validate="{'+d+'}" ui-validate-watch="{'+e+'}"';var g,h="",i=!1;if(b.owdEvent&&(g=angular.fromJson($.base64.decode(b.owdEvent,!0))))for(var j in g){var k=g[j].eventFunction;k.indexOf("grid.appScope.")==-1&&(k="grid.appScope."+k),k=k.replaceAll("row.rowIndex","grid.appScope.convertRowToRowIndex(row)"),"ng-blur"==j?(h+=j+'="blurFormat();'+k+'" ',i=!0):h+=j+'="'+k+'" '}i||(h+='ng-blur="blurFormat()" ');var l="";if(l+='<span><ng-form name="gridform'+b.colNm+'" owd-form-name="'+b.parentForm+'" novalidate><div class="form-group" ng-class="{ \'has-error\' : gridform'+b.colNm+".gridcol"+b.colNm+'.$invalid }">',l+="<div>",l+='<div class="input-group" ng-disabled="'+b.ngDisabled+'">',l+='<input type="text" class="ngCellText form-control '+b.textAlign+'Text" ng-disabled="'+b.ngDisabled+'" owd-griddatevalid="'+b.colId+"@"+b.colCd+'" ng-input="'+b.colField+'" name="gridcol'+b.colNm+'" id="gridcol'+b.colNm+'" ng-model="'+b.colField+'" owd-datepicker-popup="'+b.dateFormat+'" show-button-bar="false" show-weeks="false" is-open="opened" button-id="gridcol'+b.colNm+'Button{{grid.appScope.convertRowToRowIndex(row)}}" '+d+" "+h+' datepicker-append-to-body="true" ng-click="$event.stopPropagation()" ng-keydown="grid.appScope.gridInputKeydown($event, grid, row)" ondragstart="return false" ondrop="return false"/>',l+='<span class="input-group-btn">',l+='<button type="button" tabindex="-1" id="gridcol'+b.colNm+'Button{{grid.appScope.convertRowToRowIndex(row)}}" name="gridcol'+b.colNm+'Button{{grid.appScope.convertRowToRowIndex(row)}}" class="btn btn-default" ng-disabled="'+b.ngDisabled+'" ng-click="openCal($event);$event.stopPropagation();" ><span class="glyphicon glyphicon-calendar"></span></button>',l+="</span>",l+="</div>",l+='<span class="help-block" ng-show="gridform'+b.colNm+".gridcol"+b.colNm+'.$error.required">{{"requiredError" | owfMessage}}</span>',l+='<span class="help-block" ng-show="gridform'+b.colNm+".gridcol"+b.colNm+'.$error.date">{{"dateError" | owfMessage:"'+b.dateFormat+'"}}</span>',c)for(var f in c)l+='<span class="help-block" ng-show="gridform'+b.colNm+".gridcol"+b.colNm+".$error."+f+'" ng-bind-html="'+c[f].validateMessage+'"></span>';return l+='<span class="help-block" ng-show="gridform'+b.colNm+".gridcol"+b.colNm+'.$error.exterror" ng-bind-html="grid.options.oneslogi[grid.appScope.convertRowToRowIndex(row)].config.'+b.colNm+'.optionMessage.message"></span>',l+="</div></ng-form></span>"},controller:["$scope",function(a){a.openCal=function(b){a.opened?a.opened=!1:a.opened=!0}}]}}]).factory("innerCommonFunc",["owsCommon",function(a){return{getRepeatViewWithKey:function(a){var b=!0;if(null!=a){var c=a;"string"==typeof c?(c=c.replace(/(^\s+)|(\s+$)/g,""),c=c.toLowerCase(),"false"==c&&(b=!1)):"boolean"==typeof c&&(b=a)}return b}}}]).factory("validControl",["$rootScope","$locale","owsCommon",function(a,b,c){return{required:function(a){return null!=a&&""!==a},pattern:function(a,b){var c=new RegExp(b);return!this.required(a)||!!c.test(a)},minlength:function(a,b){return!this.required(a)||String(a).length>=b},maxlength:function(a,b){return!this.required(a)||String(a).length<=b},min:function(a,c){if(this.required(a)){if("string"==typeof a)for(;a!==a.replace(b.NUMBER_FORMATS.GROUP_SEP,"");)a=a.replace(b.NUMBER_FORMATS.GROUP_SEP,"");var d=Number(a);return!!isNaN(d)||d>=Number(c)}return!0},max:function(a,c){if(this.required(a)){if("string"==typeof a)for(;a!==a.replace(b.NUMBER_FORMATS.GROUP_SEP,"");)a=a.replace(b.NUMBER_FORMATS.GROUP_SEP,"");var d=Number(a);return!!isNaN(d)||d<=Number(c)}return!0},date:function(a,b){return!this.required(a)||"string"==typeof a&&(!!c.dateRegExp().test(a)&&c.isDate(a,c.dateRegExp()))},time:function(a){if(this.required(a)){var b=/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;return"string"==typeof a&&b.test(a)}return!0},integerlength:function(a,c){if(this.required(a)){for(var d=String(a).split(b.NUMBER_FORMATS.DECIMAL_SEP),e=d[0];e!==e.replace("-","");)e=e.replace("-","");if("string"==typeof e)for(;e!==e.replace(b.NUMBER_FORMATS.GROUP_SEP,"");)e=e.replace(b.NUMBER_FORMATS.GROUP_SEP,"");var f=new RegExp("^[0-9]*$");return!f.test(e)||!(e.length>c)}return!0},decimallength:function(a,c){if(this.required(a)){if(0==c&&String(a).indexOf(b.NUMBER_FORMATS.DECIMAL_SEP)>-1)return!1;var d=String(a).split(b.NUMBER_FORMATS.DECIMAL_SEP);if(2===d.length){for(var e=d[1];e!==e.replace("-","");)e=e.replace("-","");if("string"==typeof e)for(;e!==e.replace(b.NUMBER_FORMATS.GROUP_SEP,"");)e=e.replace(b.NUMBER_FORMATS.GROUP_SEP,"");var f=new RegExp("^[0-9]*$");return!f.test(e)||!(e.length>c)}return!0}return!0}}}]).directive("owdGridtextvalid",["$rootScope","validControl",function(a,b){return{restrict:"A",scope:!0,require:"ngModel",link:function(c,d,e,f){for(var g=d.attr("owd-gridtextvalid").split("@"),h=g[1];h!=h.replaceAll([".","[","]"],"");)h=h.replaceAll([".","[","]"],"");var i=$("#"+g[0]),j=i.scope(),k=angular.element(i[0]).attr("ui-grid");if(a.column[j.screenCd][g[0]][g[1]]){var l=a.column[j.screenCd][g[0]][g[1]];if("1"==l.bCol.necessary){d.attr("required","required");var m=function(a){return j[k].oneslogi[j.convertRowToRowIndex(c.row)].config.validity?f.$setValidity("required",b.required(a)):f.$setValidity("required",!0),a};f.$formatters.push(m),f.$parsers.push(m),c.watchVar=j[k],c.rootVar=a,c.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?f.$setValidity("required",b.required(f.$viewValue)):f.$setValidity("required",!0)},!0)}if(l.bColValid.inputLimit){var n=function(a){return f.$setValidity("pattern",b.pattern(a,l.bColValid.inputLimit)),a};f.$formatters.push(n),f.$parsers.push(n)}if(null!==l.bColValid.minChars){var o=function(a){return f.$setValidity("minlength",b.minlength(a,l.bColValid.minChars)),a};f.$formatters.push(o),f.$parsers.push(o)}if(null!==l.bColValid.maxChars){var p=function(a){return f.$setValidity("maxlength",b.maxlength(a,l.bColValid.maxChars)),a};f.$formatters.push(p),f.$parsers.push(p)}}}}}]).directive("owdGridnumbervalid",["$rootScope","validControl","$locale","$filter","$timeout",function(a,b,c,d,e){
return{restrict:"A",scope:!0,require:"ngModel",link:function(e,f,g,h){e.blurFormat=function(){var a=b.pattern(h.$viewValue,p);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var c=d("owfNumber")(h.$viewValue);h.$setViewValue(c),h.$render()}},e.focusFormat=function(){var a=b.pattern(h.$viewValue,p);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var d=h.$viewValue.replaceAll(c.NUMBER_FORMATS.GROUP_SEP,"");h.$setViewValue(d),h.$render()}};for(var i=f.attr("owd-gridnumbervalid").split("@"),j=i[1];j!=j.replaceAll([".","[","]"],"");)j=j.replaceAll([".","[","]"],"");var k=$("#"+i[0]),l=k.scope(),m=angular.element(k[0]).attr("ui-grid");if(a.column[l.screenCd][i[0]][i[1]]){var n=a.column[l.screenCd][i[0]][i[1]];if("1"==n.bCol.necessary){f.attr("required","required");var o=function(a){return l[m].oneslogi[l.convertRowToRowIndex(e.row)].config.validity?h.$setValidity("required",b.required(a)):h.$setValidity("required",!0),a};h.$formatters.push(o),h.$parsers.push(o),e.watchVar=l[m],e.rootVar=a,e.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?h.$setValidity("required",b.required(h.$viewValue)):h.$setValidity("required",!0)},!0)}var p="^[-]?(0|[1-9][0-9]{0,2}(["+c.NUMBER_FORMATS.GROUP_SEP+"]?[0-9]{3})*)(\\"+c.NUMBER_FORMATS.DECIMAL_SEP+"[0-9]+)?$",q=function(a){var c=b.pattern(a,p);return h.$setValidity("pattern",c),c?d("owfNumber")(a):a},r=function(a){var d=b.pattern(a,p);if(h.$setValidity("pattern",d),d){if("string"==typeof a){var e=a.replaceAll(c.NUMBER_FORMATS.GROUP_SEP,"");if(!e)return null;var f=parseFloat(e);if(0<f.toString().indexOf("e"))return a;var g=new Decimal(e);return f.toString()==g.toString()?f:a}return a}return a};if(h.$formatters.push(q),h.$parsers.push(r),null!==n.bColValid.minNumber){var s=function(a){return h.$setValidity("min",b.min(a,n.bColValid.minNumber)),a};h.$formatters.push(s),h.$parsers.push(s)}if(null!==n.bColValid.maxNumber){var t=function(a){return h.$setValidity("max",b.max(a,n.bColValid.maxNumber)),a};h.$formatters.push(t),h.$parsers.push(t)}if(null!==n.bColValid.integerLength){var u=function(a){return h.$setValidity("integerLength",b.integerlength(a,n.bColValid.integerLength)),a};h.$formatters.push(u),h.$parsers.push(u)}if(null!==n.bColValid.decimalLength){var v=function(a){return h.$setValidity("decimalLength",b.decimallength(a,n.bColValid.decimalLength)),a};h.$formatters.push(v),h.$parsers.push(v)}}}}}]).directive("owdGridcalcnumbervalid",["$rootScope","validControl","$locale","$filter","$timeout",function(a,b,c,d,e){return{restrict:"A",scope:!0,require:"ngModel",link:function(e,f,g,h){e.blurFormat=function(){var a=b.pattern(h.$viewValue,p);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var c=d("owfNumber")(h.$viewValue);h.$setViewValue(c),h.$render()}},e.focusFormat=function(){var a=b.pattern(h.$viewValue,p);if(a&&!isNullOrUndefined(h.$viewValue)&&""!=h.$viewValue){var d=h.$viewValue.replaceAll(c.NUMBER_FORMATS.GROUP_SEP,"");h.$setViewValue(d),h.$render()}};for(var i=(f.attr("ng-model"),f.attr("owd-gridcalcnumbervalid").split("@")),j=i[1];j!=j.replaceAll([".","[","]"],"");)j=j.replaceAll([".","[","]"],"");var k=$("#"+i[0]),l=k.scope(),m=angular.element(k[0]).attr("ui-grid");if(a.column[l.screenCd][i[0]][i[1]]){var n=a.column[l.screenCd][i[0]][i[1]];if("1"==n.bCol.necessary){f.attr("required","required");var o=function(a){return l[m].oneslogi[l.convertRowToRowIndex(e.row)].config.validity?h.$setValidity("required",b.required(a)):h.$setValidity("required",!0),a};h.$formatters.push(o),h.$parsers.push(o),e.watchVar=l[m],e.rootVar=a,e.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?h.$setValidity("required",b.required(h.$viewValue)):h.$setValidity("required",!0)},!0)}var p="^[-]?(0|[1-9][0-9]{0,2}(["+c.NUMBER_FORMATS.GROUP_SEP+"]?[0-9]{3})*)(\\"+c.NUMBER_FORMATS.DECIMAL_SEP+"[0-9]+)?$",q=function(a){var c=b.pattern(a,p);return h.$setValidity("pattern",c),c?d("owfNumber")(a):a},r=function(a){var d=b.pattern(a,p);if(h.$setValidity("pattern",d),d){if("string"==typeof a){var e=a.replaceAll(c.NUMBER_FORMATS.GROUP_SEP,"");if(!e)return null;var f=parseFloat(e);if(0<f.toString().indexOf("e"))return a;var g=new Decimal(e);return f.toString()==g.toString()?f:a}return a}return a};if(h.$formatters.push(q),h.$parsers.push(r),null!==n.bColValid.minNumber){var s=function(a){return h.$setValidity("min",b.min(a,n.bColValid.minNumber)),a};h.$formatters.push(s),h.$parsers.push(s)}if(null!==n.bColValid.maxNumber){var t=function(a){return h.$setValidity("max",b.max(a,n.bColValid.maxNumber)),a};h.$formatters.push(t),h.$parsers.push(t)}if(null!==n.bColValid.integerLength){var u=function(a){return h.$setValidity("integerLength",b.integerlength(a,n.bColValid.integerLength)),a};h.$formatters.push(u),h.$parsers.push(u)}if(null!==n.bColValid.decimalLength){var v=function(a){return h.$setValidity("decimalLength",b.decimallength(a,n.bColValid.decimalLength)),a};h.$formatters.push(v),h.$parsers.push(v)}}}}}]).directive("owdGridselectvalid",["$rootScope","validControl","owsCommon","innerCommonFunc",function(a,b,c,d){return{restrict:"A",scope:!0,require:"ngModel",controller:["$scope","$element",function(a,b){var e=b.attr("owd-models"),f="key",g="value",h=!0;b.attr("owd-repeat-key")&&(f=b.attr("owd-repeat-key")),b.attr("owd-repeat-value")&&(g=b.attr("owd-repeat-value")),b.attr("owd-repeat-view-with-key")&&(h=d.getRepeatViewWithKey(b.attr("owd-repeat-view-with-key")));var i=b.attr("ng-model");a.formatViewValue=function(a){return h?null==c.getDotValue(a,f)?c.getDotValue(a,g):c.getDotValue(a,f)+":"+c.getDotValue(a,g):c.getDotValue(a,g)},a.$watch(e,function(b,d){var g=!1,h=a.grid.appScope;if(h[e]){for(var j=h[e].length,k=c.getDotValue(h,i),l=0;l<j;l++)c.getDotValue(h[e][l],f)==k&&(g=!0);g||c.setDotValue(h,i,null)}})}],link:function(d,e,f,g){for(var h=e.attr("owd-gridselectvalid").split("@"),i=h[1];i!=i.replaceAll([".","[","]"],"");)i=i.replaceAll([".","[","]"],"");var j=$("#"+h[0]),k=j.scope(),l=angular.element(j[0]).attr("ui-grid"),m=e.attr("owd-models"),n="key";e.attr("owd-repeat-key")&&(n=e.attr("owd-repeat-key"));var o=function(a){var b=!1;if(k[m]){for(var d=k[m].length,e=0;e<d;e++)c.getDotValue(k[m][e],n)==g.$modelValue&&(b=!0);if(!b)return null}return a};if(g.$formatters.push(o),a.column[k.screenCd][h[0]][h[1]]){var p=a.column[k.screenCd][h[0]][h[1]];if("1"==p.bCol.necessary){e.attr("required","required");var q=function(a){return k[l].oneslogi[k.convertRowToRowIndex(d.row)].config.validity?g.$setValidity("required",b.required(a)):g.$setValidity("required",!0),a};g.$formatters.push(q),g.$parsers.push(q),d.watchVar=k[l],d.rootVar=a,d.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?g.$setValidity("required",b.required(g.$viewValue)):g.$setValidity("required",!0)},!0)}}}}}]).directive("owdGriddatevalid",["$rootScope","validControl","owsCommon","$timeout",function(a,b,c,d){return{restrict:"A",scope:!1,require:"ngModel",link:function(d,e,f,g){d.blurFormat=function(){var a=c.stringDateFormat(g.$viewValue);g.$setViewValue(a),g.$render()};for(var h=e.attr("owd-griddatevalid").split("@"),i=h[1];i!=i.replaceAll([".","[","]"],"");)i=i.replaceAll([".","[","]"],"");var j=$("#"+h[0]),k=j.scope(),l=angular.element(j[0]).attr("ui-grid");if(a.column[k.screenCd][h[0]][h[1]]){var m=a.column[k.screenCd][h[0]][h[1]];if("1"==m.bCol.necessary){e.attr("required","required");var n=function(a){return k[l].oneslogi[k.convertRowToRowIndex(d.row)].config.validity?g.$setValidity("required",b.required(a)):g.$setValidity("required",!0),a};g.$formatters.push(n),g.$parsers.push(n),d.watchVar=k[l],d.rootVar=a,d.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?g.$setValidity("required",b.required(g.$viewValue)):g.$setValidity("required",!0)},!0)}var o=function(a){return g.$setValidity("date",b.date(a,g.$modelValue)),a};g.$formatters.push(o),g.$parsers.push(o)}}}}]).directive("owdGridtimevalid",["$rootScope","validControl","$locale","$filter","$timeout",function(a,b,c,d,e){return{restrict:"A",scope:!0,require:"ngModel",link:function(c,d,e,f){c.blurFormat=function(){var a,b=f.$viewValue;void 0!=b&&null!=b&&(a=b.replace(/:/g,""));var c=/[0-9][0-9][0-5][0-9]/;null!=b&&4==a.length&&c.test(a)&&(b=a.substr(0,2)+":"+a.substr(2,2)),f.$setViewValue(b),f.$render()};for(var g=d.attr("owd-gridtimevalid").split("@"),h=g[1];h!=h.replaceAll([".","[","]"],"");)h=h.replaceAll([".","[","]"],"");var i=$("#"+g[0]),j=i.scope(),k=angular.element(i[0]).attr("ui-grid");if(a.column[j.screenCd][g[0]][g[1]]){var l=a.column[j.screenCd][g[0]][g[1]];if("1"==l.bCol.necessary){d.attr("required","required");var m=function(a){return j[k].oneslogi[j.convertRowToRowIndex(c.row)].config.validity?f.$setValidity("required",b.required(a)):f.$setValidity("required",!0),a};f.$formatters.push(m),f.$parsers.push(m),c.watchVar=j[k],c.rootVar=a,c.$watchCollection("watchVar.oneslogi[rootVar.convertRowToRowIndex(row)].config",function(a){a&&a.validity?f.$setValidity("required",b.required(f.$viewValue)):f.$setValidity("required",!0)},!0)}var n=function(a){var c;void 0!=a&&null!=a&&(c=a.replace(/:/g,""));var d=/[0-9][0-9][0-5][0-9]/;return null!=a&&4==c.length&&d.test(c)&&(a=c.substr(0,2)+":"+c.substr(2,2)),f.$setValidity("time",b.time(a)),a},o=function(a){return f.$setValidity("time",b.time(a)),null==a||void 0==a?a:a.replace(/:/g,"")};f.$parsers.push(o),f.$formatters.push(n)}}}}]).directive("owdBody",["$filter","owsCommon",function(a,b){return{restrict:"A",scope:!1,controller:["$scope","$element",function(c,d){!function(c){c.fn.jqKey=function(){var d=customKeyDownSettings;window.onhelp=function(){return!d.F1};var e=function(e){if(customKeyDownNextFocusGridControl)return!1;var f=getNextObject,g=e.keyCode,h=e.shiftKey,i=e.ctrlKey,j=e.altKey,k=e.target,l=!0;if(!d.Enter&&13==g)return!0;if(!d.Tab&&9==g)return!0;var m=function(){k=f(k,h);var a=c(e.target).closest("div[ui-grid-row]"),b=c(k).closest("div[ui-grid-row]");if(0==a.length&&b.length>0){if(k=null,customKeyDownNextFocusGridControl)return;customKeyDownNextFocusGridControl=!0;try{var d=b.closest("div[ui-grid]"),g=d.attr("ui-grid"),i=angular.element(d).scope(),j=i[g].gridViewport,l=e.target;j.scrollTop();h?j.scrollTop(j[0].scrollHeight):j.scrollTop(0);var m=function(){try{window.getSelection?window.getSelection().collapse(document.body,0):document.selection&&document.selection.empty();var a=f(l,h);a.focus(),a.select&&"button"!=a.type&&a.select(),setTimeout(function(){customKeyDownNextFocusGridControl=!1},10)}catch(a){customKeyDownNextFocusGridControl=!1}};setTimeout(m,100)}catch(a){customKeyDownNextFocusGridControl=!1}}};switch(g){case 13:l=isNotEnterNextFocus(k),l||m();break;case 9:l=isNotTabNextFocus(k),l||m();break;case 8:switch(k.type){case"text":case"textarea":case"password":case"number":case"calcnumber":l=!0;break;default:if(b.isModalOpen())l=!1;else{var n=a("owfMessage"),o=n("keyDownBackSpaceInfo",null,!1);l=!!b.viewConfirm(o)}}break;case 27:d.ESC&&(d.ESC(),l=!1);break;default:if(g>=112&&g<=123){var p=d["F"+(g-111)];p&&(p(k,h,i,j),l=!1)}}if(!l&&(e.preventDefault(),e.stopPropagation(),null!=k)){if(c(".modal-content:last").length>0){for(var q=!1,r=c(".modal-content:last :input"),s=0;s<r.length;s++)if(k===r[s]){q=!0;break}if(!q)return listModalEnabledObject=c(".modal-content:last :input:enabled"),0<listModalEnabledObject.length&&listModalEnabledObject[0].focus(),!1}window.getSelection?window.getSelection().collapse(document.body,0):document.selection&&document.selection.empty();var t=function(){if(8==g)k.focus(),k.select&&"button"!=k.type&&k.select();else{var a=f(e.target,h);a.focus(),a.select&&"button"!=k.type&&a.select()}};e.target.blur(),setTimeout(t,10)}return l};this.each(function(){c(this).keydown(function(a){for(var b=0,c=0;c<document.forms.length;c++)b+=document.forms[c].length;if(0==b)return!0;var d=e(a);return d})})}}(jQuery),$(document).jqKey()}]}}]),angular.module("oneslogiWeb.date",[]).factory("owsDateCommon",function(){return{dateRegExp:function(a){for(var b="",c=0;c<a.length;c++)b+="/"==a.substring(c,c+1)?"\\/":"."==a.substring(c,c+1)?"\\.":a.substring(c,c+1);return a=b,a=a.replace("yyyy","(19[0-9]{2}|[2-9]{1}[0-9]{1}[0-9]{2})"),a=a.replace("yy","([0-9]{2})"),a=a.replace("MM","(0[1-9]|1[0-2])"),a=a.replace("M","([1-9]|1[0-2])"),a=a.replace("dd","(3[01]|[12][0-9]|0[1-9])"),a=a.replace("d","(3[01]|[12][0-9]|[1-9])"),a="^"+a+"$",new RegExp(a)},isDate:function(a,b,c){try{var d,e,f,g=a.match(c);d=b.search(/y/i),e=b.search(/M/i),f=b.search(/d/i);var h=[{name:"y",sortKey:d},{name:"m",sortKey:e},{name:"d",sortKey:f}];h.sort(function(a,b){return a.sortKey-b.sortKey});for(var i=0;i<h.length;i++)"y"==h[i].name?d=parseInt(g[i+1]):"m"==h[i].name?e=parseInt(g[i+1])-1:"d"==h[i].name&&(f=parseInt(g[i+1]));var j=new Date(d,e,f);return j.getFullYear()==d&&j.getMonth()==e&&j.getDate()==f}catch(a){return!1}},dateToString:function(a,b){if(null==a)return a;if(a instanceof Date)return a.getFullYear()+("0"+(a.getMonth()+1)).slice(-2)+("0"+a.getDate()).slice(-2);if(null==b)return a;if(!this.dateRegExp(b).test(a))return a;var c=a.match(this.dateRegExp(b));try{var d,e,f;d=b.search(/y/i),e=b.search(/M/i),f=b.search(/d/i);var g=[{name:"y",sortKey:d},{name:"m",sortKey:e},{name:"d",sortKey:f}];g.sort(function(a,b){return a.sortKey-b.sortKey});for(var h=0;h<g.length;h++)"y"==g[h].name?d=parseInt(c[h+1]):"m"==g[h].name?e=parseInt(c[h+1])-1:"d"==g[h].name&&(f=parseInt(c[h+1]));var i=new Date(d,e,f);return i.getFullYear()==d&&i.getMonth()==e&&i.getDate()==f?i.getFullYear()+("0"+(i.getMonth()+1)).slice(-2)+("0"+i.getDate()).slice(-2):a}catch(b){return a}},stringToDate:function(a,b){if(null!=a){if(a instanceof Date||8==a.length){var c=b;c=c.replace("yyyy",a.substring(0,4)),c=c.replace("yy",a.substring(2,4)),c=c.replace("MM",a.substring(4,6));var d;return d=a.substring(4,6),c="0"==d.substring(0,1)?c.replace("M",a.substring(5,6)):c.replace("M",a.substring(4,6)),c=c.replace("dd",a.substring(6,8)),d=a.substring(6,8),c="0"==d.substring(0,1)?c.replace("d",a.substring(7,8)):c.replace("d",a.substring(6,8))}return a}return a},stringDateFormat:function(a,b){if(null==a||null==b||"string"!=typeof a||"string"!=typeof b)return a;try{var c,d=b;d.indexOf("/")!=-1?c="/":d.indexOf("-")!=-1?c="-":d.indexOf(".")!=-1?c=".":d.indexOf(" ")!=-1&&(c=" ");for(var e=a.split(c),f=[],g=0;g<e.length;g++)e[g]=e[g].trim(),""!=e[g]&&f.push(e[g]);if(a.length!=d.length&&a.replaceAll(c,"").length==d.replaceAll(c,"").length&&(a=a.replaceAll(c,""),f=[],f.push(a)),f.length<2||f.length>3){if(1==f.length){var h=d.split(c),i=d.replaceAll(c,"");if(a.length==i.length){for(var f="",j=0,g=0;g<h.length;g++)f.length>0&&(f+=c),f+=a.substr(j,h[g].length),j+=h[g].length;return this.stringToDate(this.dateToString(f,d),d)}if(8==i.length&&d.indexOf("yyyy")!=-1&&d.indexOf("MM")!=-1&&d.indexOf("dd")!=-1||6==i.length&&d.indexOf("yy")!=-1&&d.indexOf("MM")!=-1&&d.indexOf("dd")!=-1||4==i.length&&d.indexOf("MM")!=-1&&d.indexOf("dd")!=-1){var k,f,j;if(4==a.length){if(8==i.length){f="",j=0;for(var g=0;g<h.length;g++)if(f.length>0&&(f+=c),h[g].indexOf("yyyy")==-1){if(h[g].indexOf("MM")!=-1){k=parseInt(a.substr(j,h[g].length));break}f+=a.substr(j,h[g].length),j+=h[g].length}f="",j=0;for(var g=0;g<h.length;g++)f.length>0&&(f+=c),h[g].indexOf("yyyy")==-1?(f+=a.substr(j,h[g].length),j+=h[g].length):f+=this.calcYear(-1,k)}else if(6==i.length){f="",j=0;for(var g=0;g<h.length;g++)f.length>0&&(f+=c),h[g].indexOf("yy")==-1?(f+=a.substr(j,h[g].length),j+=h[g].length):f+=this.calcYear(-1)-2e3}return this.stringToDate(this.dateToString(f,d),d)}if(6==a.length){if(8==i.length){f="",j=0;for(var g=0;g<h.length;g++)if(f.length>0&&(f+=c),h[g].indexOf("yyyy")==-1){if(h[g].indexOf("MM")!=-1){k=parseInt(a.substr(j,h[g].length));break}f+=a.substr(j,h[g].length),j+=h[g].length}else j+=2;f="",j=0;for(var g=0;g<h.length;g++)f.length>0&&(f+=c),h[g].indexOf("yyyy")==-1?(f+=a.substr(j,h[g].length),j+=h[g].length):(f+=this.calcYear(parseInt(a.substr(j,2)),k),j+=2)}return this.stringToDate(this.dateToString(f,d),d)}}}return a}var l,m,n;l=b.search(/y/i),m=b.search(/M/i),n=b.search(/d/i);var o=[{name:"y",sortKey:l},{name:"m",sortKey:m},{name:"d",sortKey:n}];o.sort(function(a,b){return a.sortKey-b.sortKey});for(var p=0,g=0;g<o.length;g++)"y"==o[g].name&&3==f.length?l=parseInt(f[p++]):"m"==o[g].name?m=parseInt(f[p++])-1:"d"==o[g].name&&(n=parseInt(f[p++]));l=3==f.length?this.calcYear(l,m+1):this.calcYear(-1,m+1);var q=new Date(l,m,n);if(q.getFullYear()==l&&q.getMonth()==m&&q.getDate()==n){var r=q.getFullYear()+("0"+(q.getMonth()+1)).slice(-2)+("0"+q.getDate()).slice(-2);return this.stringToDate(r,d)}return a}catch(b){return a}},calcYear:function(a,b){var c=0,d=0,e=a,f=b;if(e>99)return e;if(e>-1)e+=2e3;else{var g=new Date;curM=g.getMonth()+1,e=curM>c&&curM<13-d?g.getFullYear():curM<=c&&f>=13-d?g.getFullYear()-1:curM>=13-d&&f<=c?g.getFullYear()+1:g.getFullYear()}return e}}});var SCREEN_MODE={Create:0,Update:1,Delete:2,Read:3,Copy:4},customKeyDownDefaultSetting={Enter:!1,Tab:!1,F1:null,F2:null,F3:null,F4:null,F5:null,F6:null,F7:null,F8:null,F9:null,F10:null,F11:null,F12:null,ESC:null},customKeyDownUpdateSetting={Enter:!0,Tab:!0},customKeyDownSettings=$.extend({},customKeyDownDefaultSetting,customKeyDownUpdateSetting),customKeyDownNextFocusGridControl=!1;window.addEventListener("focusin",function(a){var b=a.target;b&&b.form&&"FIELDSET"!=b.tagName&&"hidden"!=b.type&&!b.disabled&&b.tabIndex!=-1&&$(b).is(":visible")&&("undefined"==typeof b||"hidden"!=b.visibility&&"none"!=b.display)&&centeringElment(b)}),String.prototype.replaceAll=function(a,b){if("undefined"==typeof b)throw"dest is undefined.";if(Array.isArray(a)){for(var c=this,d=0;d<a.length;d++)c=c.split(a[d]).join(b);return c}return this.split(a).join(b)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},$("body").on("oTransitionEnd mozTransitionEnd webkitTransitionEnd transitionend",function(a){var b=a.target;b.className&&"modal-dialog"==b.className&&document.activeElement&&document.activeElement.focus()});var dependsModules=new function(){this.modules=[],this.push=function(a){this.modules.push(a)},this.get=function(){return this.modules}};angular.module("oneslogiWeb.GridColExt",[]).factory("gridColExtApi",["AngularAPIClient",function(a){return{keyValueList:a.make([["query","GET","resources/class/keyValueList"]]),gridColExt:a.make([["init","GET","resources/base/common/gridColExt/init"],["search","GET","resources/base/common/gridColExt/search"],["registerUser","GET","resources/base/common/gridColExt/registerUser"],["registerBase","GET","resources/base/common/gridColExt/registerBase"],["removeUser","GET","resources/base/common/gridColExt/removeUser"],["removeBase","GET","resources/base/common/gridColExt/removeBase"],["columnExtBase","GET","resources/base/common/gridColExt/columnExtBase"],["columnExtBaseForUser","GET","resources/base/common/gridColExt/columnExtBaseForUser"],["columnNoExt","GET","resources/base/common/gridColExt/columnNoExt"],["column","GET","resources/base/column"]])}}]).factory("gridColExtService",["$rootScope","$q","$modal","alertMessage","gridColExtApi",function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=!1,s=function(){k=null,j=null,l=null},t=function(b){o.result.then(function(){h.columnDefs=m;var b={};b.screenCd=f,e.gridColExt.column(b).then(function(b){a.column[f]=b.data,D(i,b.data[g])})}),m=[];for(var c=0;c<k.length;c++){for(var d=0;d<j.length;d++)if(k[c].field==j[d].field){m.push(j[d]);break}m[c].width=k[c].width}for(var l in n)m.push(n[l]);if(b){var p={};p.head={},p.head.screenCd=f,p.head.gridCd=g,p.colExtList=[];for(var l in k){var q=a.column[f][g][k[l].field].bCol.colCd,t={colCd:q,colOrder:parseInt(l)+1,colWidth:k[l].width};p.colExtList.push(t)}e.gridColExt.registerUser(p).then(function(){s(),o.close()})}else if(r){var p={};p.head={},p.head.screenCd=f,p.head.gridCd=g,e.gridColExt.removeUser(p).then(function(){s(),o.close()})}else s(),o.close()},u=function(b){if(o.result.then(function(){var b={};b.screenCd=f,e.gridColExt.column(b).then(function(b){a.column[f]&&(a.column[f]=b.data)})}),b){var c={};c.head={},c.head.screenCd=f,c.head.gridCd=g,c.colExtList=[];for(var d in k){var h={colCd:k[d].field,colOrder:parseInt(d)+1,colWidth:k[d].width};c.colExtList.push(h)}e.gridColExt.registerBase(c).then(function(){o.close()})}else if(r){var c={};c.head={},c.head.screenCd=f,c.head.gridCd=g,e.gridColExt.removeBase(c).then(function(){s(),o.close()})}else s(),o.close()},v=function(){return _loadLatestColumn()},w=function(){return _loadLatestColumn()},x=function(){var a={};return a.screenCd=f,e.gridColExt.columnNoExt(a).then(function(a){var b=C(a.data[g]);A(b),l=angular.copy(k,l)})},y=function(){var a={};return a.screenCd=f,e.gridColExt.columnExtBaseForUser(a).then(function(a){var b=C(a.data[g]);A(b),l=angular.copy(k,l)})},z=function(a){j=[],j=angular.copy(a,j),l=[],l=angular.copy(j,l),A(a)},A=function(a){for(var b=[],c=[],d=0;d<a.length;d++){var e={};e=angular.copy(a[d],e),e.visible?b.push(e):"undefined"==typeof e.visible?b.push(e):c.push(e)}n=[],n=c,k=[],k=b},B=function(){var a=document.activeElement;o=c.open({templateUrl:"base/partials/common/GridColExtDialog.html",backdrop:"static",controller:"GridColExtDialog",resolve:{getScreen:["owsScreen",function(a){return new a.getData("GridColExtDialog",!0)}],getItem:["owsItem",function(a){return new a.getData("GridColExtDialog")}]},windowClass:"app-modal-window-large",beforeClose:function(){d.removeModalAlert("GridColExtDialog"),a.focus()},beforeDismiss:function(){d.removeModalAlert("GridColExtDialog"),a.focus()}}),o.opened.then(function(){d.addModalAlert(o,"GridColExtDialog")})},C=function(a){var b=[];for(var c in a)gridCol={field:a[c].bCol.colCd,colId:a[c].bCol.colId,enableCellEdit:!1,visible:"1"==a[c].bCol.visible,headerCellClass:"centerText",colType:a[c].bCol.colType,editable:"1"==a[c].bCol.editable},a[c].bDict&&(gridCol.displayName=a[c].bDict.dictNm),a[c].bCol.textAlign&&"1"!=a[c].bCol.editable&&(gridCol.cellClass=a[c].bCol.textAlign+"Text"),a[c].bCol.colWidth?gridCol.width=a[c].bCol.colWidth:gridCol.width=180,a[c].bCol.inColIndex&&(gridCol.inColIndex=a[c].bCol.inColIndex),b.push(gridCol);return b},D=function(a,b){var c=!1;for(var d in b){var e=b[d];if(e.isMismatchBColAndExtUser&&1==e.isMismatchBColAndExtUser){c=!0;break}}return 1==c?(a.showDialogIconColor={color:"#ff0000"},!0):(a.showDialogIconColor={color:"#555555"},!1)},E=function(){var b=[];for(msgCd in a.message)msgCd.indexOf("gridColExtDialogDescription")>-1&&b.push(a.message[msgCd].bMessage);b.sort(function(a,b){return a.messageCd<b.messageCd?-1:a.messageCd>b.messageCd?1:0});for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.messageCd.indexOf("_");if(f!=-1){for(var g=e.messageCd.indexOf("_",f+1),h=e.messageCd.lastIndexOf("_"),i=e.messageCd.substring(f+1,g),j=e.messageCd.substring(f+1,h),k=e.messageCd.substring(h+1),l=!1,m=-1,n=0;n<c.length;n++)if(c[n].key==j){m=n,l=!0;break}0==l&&(c.push({}),m=c.length-1),c[m].grpKey=i,c[m].key=j;var o=e.messageNm;"[blank]"==o&&(o=""),c[m][k]=o}}descriptions=[];for(var p,q="",m=0,d=0;d<c.length;d++){var r=c[d];if(q!=r.grpKey){var s={grpKey:r.grpKey,details:[]};p=s,descriptions.push(p)}c[d].Head?p.Head=c[d].Head:p.details.push(c[d]),q=r.grpKey}};return{getColumnDefs:function(){return k},setColumnDefs:function(a){k=a},getInitialColumnDefs:function(){var a=[];return a=angular.copy(j,a)},getDbLatestColumnDefs:function(){return l},showUserSettingDialog:function(a,b,c,d,e){r=!1,f=a,g=b,h=d,i=e,p=t,q=v,_loadLatestColumn=y,z(c),B()},showBaseSettingDialog:function(a,b){r=!1,f=a,g=b,h=null,p=u,q=w,_loadLatestColumn=x;var c={};c.screenCd=a,e.gridColExt.columnExtBase(c).then(function(a){var c=C(a.data[b]);z(c),B()})},confirmed:function(a){k=a;for(var b=!1,c=0;c<k.length;c++)if(k[c].field!=l[c].field||k[c].width!=l[c].width){b=!0;break}p(b)},reflection:function(){},reset:function(){return r=!0,q()},close:function(){s(),o.close()},convertDataToColumnDefs:function(a){return C(a)},loadLatestColumn:function(){return _loadLatestColumn()},changeShowDialogIconColor:function(a,b){return D(a,b)},loadDescriptions:function(){return E()},getDescriptions:function(){return descriptions}}}]).controller("GridColExtDialog",["$scope","owsCommon","gridColExtService","gridColExtApi",function(a,b,c,d){function e(a){this.length=a,this.jqueryElement=null,this.sumStyleSizes=0,this.size=0,this.height=0,this.scrollTop=0,this.scrollBaseHeight=0,this.allowanceStartIndex=0,this.allowanceEndIndex=0,this.afterCorrectionScrollTop=0,this.maxScrollTop=0}function f(){this.required=!1,this.number=!1,this.min=!1,this.max=!1,this.hasError=!1}function g(a){var b=new f;if(null!=a&&0!=a.length||(b.hasError=!0,b.required=!0),b.hasError||null!=a.match(/^[0-9]+$/)||(b.hasError=!0,b.number=!0),!b.hasError){var c=parseInt(a);c<O?(b.hasError=!0,b.min=!0):c>P&&(b.hasError=!0,b.max=!0)}return b}function h(a,b){this.selection=a,this.field=b,this.order=-1}var i=null,j=!1,k=!1,l=function(){a.columnDefs=c.getColumnDefs(),a.defaultColumnDefs=angular.copy(c.getColumnDefs()),a.selectedColumnOrders=[],b.syncExec(function(){i=w(a.columnDefs.length),j=!1,k=!1,c.loadDescriptions(),a.descriptions=c.getDescriptions()})},m=function(a){this.formCtl=a},n=function(){k=!0,c.confirmed(a.columnDefs)},o=function(){k=!0,c.reset().then(function(d){a.columnDefs=[],b.syncExec(function(){var d=c.getColumnDefs();a.columnDefs=d,a.defaultColumnDefs=angular.copy(c.getColumnDefs()),b.syncExec(function(){a.selectedColumnOrders=[],b.syncExec(function(){i.jqueryElement.scrollTop(0)})})})})},p=function(){k=!0,c.close()},q=function(b,c){if(null==c||void 0===c){for(var d=0;d<a.columnDefs.length;d++)if(a.columnDefs[d].field==b)return d;return-1}for(var d=0;d<c.length;d++)if(c[d].field==b)return d;return-1},r=function(c){var d=[];d=angular.copy(a.selectedColumnOrders,d),a.columnDefs=[];var e=i.jqueryElement.scrollTop();return b.syncExec(function(){return a.columnDefs=c,b.syncExec(function(){for(var c=0;c<d.length;c++){var f=$(document.getElementById("ngHeaderCellExt_"+d[c]));f.hasClass("ngHeaderCellSelected")||f.addClass("ngHeaderCellSelected")}return b.syncExec(function(){return A(d),b.syncExec(function(){return a.selectedColumnOrders=d,b.syncExec(function(){x(),i.jqueryElement.scrollTop(e)})})})})})},s=function(){if(k=!0,1!=j&&0!=a.selectedColumnOrders.length){var c=q(a.selectedColumnOrders[0]);if(0!=c){j=!0;for(var d=angular.copy(a.columnDefs,d),e=0;e<a.selectedColumnOrders.length;e++){var f=q(a.selectedColumnOrders[e]),g=d[f-1];d[f-1]=d[f],d[f]=g}r(d).then(function(){x(),c-1<i.allowanceStartIndex&&i.jqueryElement.scrollTop(parseInt(i.afterCorrectionScrollTop-i.scrollBaseHeight)),b.syncExec(function(){j=!1})})}}},t=function(){if(k=!0,1!=j&&0!=a.selectedColumnOrders.length){var c=q(a.selectedColumnOrders[0]);if(0!=c){j=!0;for(var d=angular.copy(a.columnDefs,d),e=c,f=0;f<a.selectedColumnOrders.length;f++){for(var g=q(a.selectedColumnOrders[f],d),h=d[g],l=g-1;l>=g-e;l--){var m=d[l+1];d[l+1]=d[l],d[l]=m}d[g-e]=h}r(d).then(function(){x(),i.jqueryElement.scrollTop(0)}),b.syncExec(function(){j=!1})}}},u=function(){if(k=!0,1!=j&&0!=a.selectedColumnOrders.length){var c=q(a.selectedColumnOrders[a.selectedColumnOrders.length-1]);if(c!=a.columnDefs.length-1){j=!0;for(var d=angular.copy(a.columnDefs,d),e=a.selectedColumnOrders.length-1;e>-1;e--){var f=q(a.selectedColumnOrders[e]),g=d[f+1];d[f+1]=d[f],d[f]=g}r(d).then(function(){x(),(c+1<i.allowanceStartIndex||c+1>i.allowanceEndIndex)&&i.jqueryElement.scrollTop(parseInt(i.afterCorrectionScrollTop+i.scrollBaseHeight)),b.syncExec(function(){j=!1})})}}},v=function(){if(k=!0,1!=j&&0!=a.selectedColumnOrders.length){var c=q(a.selectedColumnOrders[a.selectedColumnOrders.length-1]);if(c!=a.columnDefs.length-1){j=!0;for(var d=angular.copy(a.columnDefs,d),e=d.length-c-1,f=a.selectedColumnOrders.length-1;f>-1;f--){for(var g=q(a.selectedColumnOrders[f],d),h=d[g],l=g+1;l<=g+e;l++){var m=d[l-1];d[l-1]=d[l],d[l]=m}d[g+e]=h}r(d).then(function(){x(),i.jqueryElement.scrollTop(i.maxScrollTop),b.syncExec(function(){j=!1})})}}},w=function(a){var b=new e(a);b.jqueryElement=$("#columnOrder");var c=b.jqueryElement.css("height").replace("px",""),d=b.jqueryElement.css("border-top-width").replace("px",""),f=b.jqueryElement.css("border-bottom-width").replace("px",""),g=b.jqueryElement.css("margin-top").replace("px",""),h=b.jqueryElement.css("margin-bottom").replace("px",""),i=b.jqueryElement.css("padding-top").replace("px",""),j=b.jqueryElement.css("padding-bottom").replace("px",""),k=parseInt(d)+parseInt(f)+parseInt(g)+parseInt(h)+parseInt(i)+parseInt(j);return b.sumStyleSizes=parseInt(k),b.size=parseInt(b.jqueryElement[0].size),b.height=parseInt(c),b.scrollBaseHeight=(parseInt(c)-parseInt(k))/parseInt(b.jqueryElement[0].size),b.scrollTop=parseInt(b.jqueryElement.scrollTop()),b.allowanceStartIndex=Math.ceil(parseFloat(b.scrollTop)/parseInt(b.scrollBaseHeight)),b.allowanceEndIndex=parseInt(b.allowanceStartIndex)+parseInt(b.size)-1,b.afterCorrectionScrollTop=parseInt(b.allowanceStartIndex)*parseInt(b.scrollBaseHeight),b.maxScrollTop=(parseInt(b.length)-(parseInt(b.size)-1))*parseInt(b.scrollBaseHeight),b},x=function(){i.scrollTop=parseInt(i.jqueryElement.scrollTop()),i.allowanceStartIndex=Math.ceil(parseFloat(i.scrollTop)/parseInt(i.scrollBaseHeight)),i.allowanceEndIndex=parseInt(i.allowanceStartIndex)+parseInt(i.size)-1,i.afterCorrectionScrollTop=parseInt(i.allowanceStartIndex)*parseInt(i.scrollBaseHeight),i.maxScrollTop=(parseInt(i.length)-(parseInt(i.size)-1))*parseInt(i.scrollBaseHeight)},y=function(b){for(var c=0,d=0;d<parseInt(b);d++)c+=parseInt(a.columnDefs[d].width);return c},z=function(){if(0!=a.selectedColumnOrders.length){for(var c=0;c<a.columnDefs.length;c++){var d=$(document.getElementById("ngHeaderCellExt_"+a.columnDefs[c].field));d.hasClass("ngHeaderCellSelected")&&d.removeClass("ngHeaderCellSelected")}b.syncExec(function(){for(var c=0;c<a.selectedColumnOrders.length;c++){var d=$(document.getElementById("ngHeaderCellExt_"+a.selectedColumnOrders[c]));d.hasClass("ngHeaderCellSelected")||d.addClass("ngHeaderCellSelected")}b.syncExec(function(){A(a.selectedColumnOrders),j=!1})})}},A=function(b){for(var c=q(b[0]),d=$(".ngHeaderContainerExt")[0].scrollLeft,e=parseInt($(".ngGridExt").css("width").replace("px","")),f=0,g=0;g<c;g++)f+=parseInt(a.columnDefs[g].width);var h=parseInt(f)-parseInt(d);if(h>e){var i=parseInt(f)-parseInt(e)/2+parseInt(a.columnDefs[c].width)/2;$(".ngHeaderContainerExt")[0].scrollLeft=parseInt(i)}else if(h+parseInt(a.columnDefs[c].width)<0){var i=parseInt(f)-parseInt(e)/2+parseInt(a.columnDefs[c].width)/2;$(".ngHeaderContainerExt")[0].scrollLeft=parseInt(i)}},B=null,C=null,D=null,E=function(b,c){var d=document.getElementById("ngHeaderCellExt_"+a.columnDefs[b].field),e=document.getElementById("ngHeaderTextExt_"+a.columnDefs[b].field);return null!=d&&null!=e&&(d.style.width=c+"px",e.style.width=c+"px",!0)},F=function(){var a=window.getSelection();a.removeAllRanges()},G=function(c,d){k=!0;var e=$(c.target)[0];B=e.value,C=C,window.clearInterval(D),D=window.setInterval(function(){B=e.value,B!=C&&(C=B,a.widthErrChk=g(B),b.syncExec(function(){var c=$(e.parentElement);a.widthErrChk.hasError?c.hasClass("has-error")||c.addClass("has-error"):(c.hasClass("has-error")&&c.removeClass("has-error"),E(d,B),b.syncExec(function(){a.columnDefs[d].width=B}))}))},10)},H=function(c,d){window.clearInterval(D);var e=a.defaultColumnDefs[d].width,h=c.target.value,i=g(h).hasError;b.syncExec(function(){i?(E(d,e),a.columnDefs[d].width=e,c.target.value=e):(E(d,h),a.columnDefs[d].width=h,a.defaultColumnDefs[d].width=h),b.syncExec(function(){a.widthErrChk=new f;var b=$($(c.target)[0].parentElement);b.hasClass("has-error")&&b.removeClass("has-error")})})},I=function(c,d){c.target.type&&"text"==c.target.type||F(),k=!0;var e=c.ctrlKey,f=[];
if(e)for(var g=0;g<a.selectedColumnOrders.length;g++)f.push(new h(!0,a.selectedColumnOrders[g]));else if(1==a.selectedColumnOrders.length&&a.selectedColumnOrders[0]==a.columnDefs[d].field)return;for(var j=!1,g=0;g<f.length;g++)if(f[g].field==a.columnDefs[d].field){j=!0,e&&(f[g].selection=!1);break}j||f.push(new h(!0,a.columnDefs[d].field));for(var g=0;g<a.columnDefs.length;g++)for(var l=0;l<f.length;l++)f[l].order==-1&&a.columnDefs[g].field==f[l].field&&(f[l].order=g);f.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0});for(var m=[],g=0;g<f.length;g++)1==f[g].selection&&m.push(f[g].field);for(var g=0;g<a.columnDefs.length;g++){var n=$(document.getElementById("ngHeaderCellExt_"+a.columnDefs[g].field));n.hasClass("ngHeaderCellSelected")&&n.removeClass("ngHeaderCellSelected")}b.syncExec(function(){a.selectedColumnOrders=[],b.syncExec(function(){a.selectedColumnOrders=m,b.syncExec(function(){for(var c=0;c<a.selectedColumnOrders.length;c++){var e=$(document.getElementById("ngHeaderCellExt_"+a.selectedColumnOrders[c]));e.hasClass("ngHeaderCellSelected")||e.addClass("ngHeaderCellSelected")}b.syncExec(function(){x(),i.jqueryElement.scrollTop(i.afterCorrectionScrollTop),b.syncExec(function(){d<i.allowanceStartIndex?i.jqueryElement.scrollTop(parseInt(i.afterCorrectionScrollTop-i.scrollBaseHeight*(i.allowanceStartIndex-d))):d>i.allowanceEndIndex&&i.jqueryElement.scrollTop(parseInt(i.afterCorrectionScrollTop+i.scrollBaseHeight*(d-i.allowanceEndIndex)))})})})})})},J=function(a){k=!0},K=function(c){c.target&&c.target.type?(c.target.type.indexOf("select")>-1||c.target.type.indexOf("button")>-1)&&(k=!0):c.target&&c.target.parentElement&&c.target.parentElement.type&&c.target.parentElement.type.indexOf("select")>-1&&(k=!0),k||(a.selectedColumnOrders=[],b.syncExec(function(){for(var b=0;b<a.columnDefs.length;b++){var c=$(document.getElementById("ngHeaderCellExt_"+a.columnDefs[b].field));c.hasClass("ngHeaderCellSelected")&&c.removeClass("ngHeaderCellSelected")}})),k=!1},L=-1,M=-1,N=-1,O=40,P=2e3,Q=500,R=0,S=null,T=function(d,e){if(k=!0,F(),R++,1===R)S=setTimeout(function(){R=0},Q);else{clearTimeout(S);for(var f=$(".ngHeaderContainerExt")[0].scrollLeft,g=-1,h=c.getDbLatestColumnDefs(),i=0;i<h.length;i++)if(a.columnDefs[e].field==h[i].field){g=i;break}var j=angular.copy(a.columnDefs,j);j[e].width=h[g].width,a.columnDefs=[],b.syncExec(function(){a.columnDefs=j,b.syncExec(function(){R=0;for(var c=0;c<a.selectedColumnOrders.length;c++){var d=$(document.getElementById("ngHeaderCellExt_"+a.selectedColumnOrders[c]));d.hasClass("ngHeaderCellSelected")||d.addClass("ngHeaderCellSelected")}b.syncExec(function(){$(".ngHeaderContainerExt")[0].scrollLeft=f})})})}},U=function(c,d){return F(),I(c,d),b.syncExec(function(){L=d,c.target.parentElement.style.cursor="col-resize",M=c.clientX,N=a.columnDefs[L].width,E(L,N),$(document).mousemove(V),$(document).mouseup(W)}),!1},V=function(b){if(L==-1)return!0;var c=parseInt(b.clientX)-parseInt(M),d=parseInt(c)+parseInt(N),e=d<O?O:d>P?P:d,f=document.getElementById("width_"+a.columnDefs[L].field);if(f.value=e,E(L,e))for(var g=L+1;g<a.columnDefs.length;g++){var h=document.getElementById("ngHeaderCellExt_"+a.columnDefs[g].field);if(null!=h){for(var i=0,j=0;j<g;j++)i=j==parseInt(L)?parseInt(i)+parseInt(e):parseInt(i)+parseInt(a.columnDefs[j].width);h.style.left=String(i)+"px"}}return!1},W=function(b){if($(document).off("mousemove",V),$(document).off("mouseup",W),L==-1)return F(),!0;var c=document.getElementById("ngHeaderCellExt_"+a.columnDefs[L].field),d=c.style.width.replace("px","");return E(L,d),a.columnDefs[L].width=d,b.target.parentElement.style.cursor="default",L=-1,F(),!1};a.putForm=m,a.confirmed=n,a.reset=o,a.close=p,a.calcLeft=y,a.columnClick=I,a.gripClick=T,a.ngHeaderContainerExtClick=J,a.containerClick=K,a.gripOnMouseDown=U,a.moveUp=s,a.moveDown=u,a.moveTop=t,a.moveBottom=v,a.columnSelectChange=z,a.widthBlur=H,a.widthFocus=G,a.widthErrChk=new f,a.minWidth=O,a.maxWidth=P,l()}]).controller("GridColExtBaseEdit",["$scope","$route","$filter","$location","$q","alertMessage","directiveControl","gridDirectiveControl","optionMessageControl","gridOptionMessageControl","owsHistory","owsCommon","userInfo","statusInfo","modalFactory","gridColExtService","gridColExtApi",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.screenListCols=[{field:"screen.screenCd",displayName:"画面CD"},{field:"screen.vdict.dictNm",displayName:"画面名"},{field:"screen.systemTypeNm",displayName:"システム種別"},{field:"itemNm",displayName:"グリッド"}];var r=function(){a.isopen=!0,a.pagingOptions=l.getDefaultPagingOptions(),a.pagingOptions.setPageData=function(){a.getPagingData(a.gridOptions.paginationPageSize,a.gridOptions.paginationCurrentPage)},a.gridOptions=l.mergePagingSingleSelectGridOptions({data:"screenList",columnDefs:"screenListCols",pagingOptions:a.pagingOptions}),a.gridSelectOptions={systemType:{key:"classCd",value:"classNm",listModel:"systemTypeList"}},s()},s=function(){e.all([t()]).then(function(a){return u()})},t=function(){var b=e.defer(),c={};return c.classCd="SYSTEM_TYPE",q.keyValueList.query(c).then(function(c){a.systemTypeList=c.data,b.resolve()}),b.promise},u=function(){var b=e.defer();return q.gridColExt.init().then(function(b){v(b),k.hasState()&&(a.head=k.popState(),a.search()),l.setFirstFocus()}),b.promise},v=function(b){a.paging=b.paging,a.head=b.data.head,a.screenList=b.data.body,k.replaceState(a.head)},w=function(){l.clearPagingOptions(a.gridOptions),x(a.gridOptions.paginationPageSize,a.gridOptions.paginationCurrentPage)},x=function(b,c){var d={};d.data={},d.data.head=a.head,l.setPagingData(d,a.paging,b,c),q.gridColExt.search(d).then(function(a){n.isSuccessAndShowMessage(a,"searchinputform"),z(a)})},y=function(a,b){x(a,b)},z=function(b){l.toggleSelectAll(a.gridOptions,!1),a.gridOptions.gridViewport.scrollTop(0),a.screenList=b.data.body,a.gridOptions.totalItems=b.paging.allRecordCount,k.replaceState(a.head)},A=function(){if(0==a.screenList.length)return void f.setErrorMessageByCode("detailLineNotDisplayError");if(0==a.gridOptions.gridApi.selection.getSelectedRows().length)return void f.setErrorMessageByCode("lineNotSelectError");if(a.gridOptions.gridApi.selection.getSelectedRows().length>1)return void f.setErrorMessageByCode("onlyOneSelect");var b={};b.screenCd=a.gridOptions.gridApi.selection.getSelectedRows()[0].screen.screenCd,p.showBaseSettingDialog(a.gridOptions.gridApi.selection.getSelectedRows()[0].screen.screenCd,a.gridOptions.gridApi.selection.getSelectedRows()[0].item.itemCd)},B=function(a){l.syncButtonExec("selection",a)};a.search=w,a.getPagingData=y,a.selection=A,a.gridDblClick=B,r()}]).filter("nullConvertFilter",function(){return function(a,b){return null==a?b:a}}),angular.module("oneslogiWeb.PrintRequestParam",[]).constant("OUTPUT_TYPE_HTML","1").constant("OUTPUT_TYPE_PDF","2").constant("OUTPUT_TYPE_PRINT","3").constant("VIEW_MODE_PRINT","1").constant("VIEW_MODE_REPRINT","2").constant("PRINT_DATA_TYPE_JASPER_REPORT","1").constant("PRINT_DATA_TYPE_PROTECT_PDF","2").constant("VIEW_MODE_REPRINT","2").factory("printRequestParamApi",["AngularAPIClient",function(a){return{keyValueList:a.make([["query","GET","resources/class/keyValueList"]]),printRequestParam:a.make([["getPrinterList","POST","resources/printRequestParam/getPrinterList"],["getPrinterListByPriterGroupId","GET","resources/printRequestParam/getPrinterListByPriterGroupId"],["getCollateList","GET","resources/printRequestParam/getCollateList"],["getReportLayoutList","POST","resources/printRequestParam/getReportLayoutList"],["getReportLayout","GET","resources/printRequestParam/getReportLayout"],["getPlainDto","GET","resources/printRequestParam/getPlainDto"],["getPrinterAttributeList","GET","resources/printRequestParam/getPrinterAttributeList"],["getLayoutPrintSetting","GET","resources/printRequestParam/getLayoutPrintSetting"],["getUserPrintSetting","GET","resources/printRequestParam/getUserPrintSetting"],["getReport","GET","resources/printRequestParam/getReport"],["reprint","POST","resources/printRequestParam/reprint"],["getPrintNumDefault","GET","resources/printRequestParam/getPrintNumDefault"],["getPrinterGroupList","GET","resources/common/printerGroup/selectByVariableAttributes"]])}}]).service("ApiAccessor",["$q","printRequestParamApi",function(a,b){return{getClassAsync:function(c){var d=a.defer(),e={};return e.classCd=c,b.keyValueList.query(e).then(function(a){d.resolve(a.data)}),d.promise},getPrinterListAsync:function(c){var d=a.defer(),e={};return e=c,b.printRequestParam.getPrinterList(e).then(function(a){d.resolve(a.data)}),d.promise},getPrinterListByPriterGroupIdAsync:function(c){var d=a.defer(),e={};return e.printerGroupId=c,b.printRequestParam.getPrinterListByPriterGroupId(e).then(function(a){d.resolve(a.data)}),d.promise},getPrinterGroupListAsync:function(){var c=a.defer();return b.printRequestParam.getPrinterGroupList().then(function(a){c.resolve(a.data)}),c.promise},getReportLayoutListAsync:function(c){var d=a.defer(),e={};return e=c,b.printRequestParam.getReportLayoutList(e).then(function(a){d.resolve(a.data)}),d.promise},getPlainDtoAsync:function(c){var d=a.defer(),e={};return e.viewMode=c,b.printRequestParam.getPlainDto(e).then(function(a){d.resolve(a)}),d.promise},getPrinterAttributeListAsync:function(c){var d=a.defer(),e={};return e.printerId=c,b.printRequestParam.getPrinterAttributeList(e).then(function(a){d.resolve(a.data)}),d.promise},getLayoutPrintSettingAsync:function(c){var d=a.defer(),e={};return e.reportLayoutId=c,b.printRequestParam.getLayoutPrintSetting(e).then(function(a){d.resolve(a.data)}),d.promise},getReportLayoutAsync:function(c,d){var e=a.defer(),f={};return f.reportId=c,f.reportLayoutNm=d,b.printRequestParam.getReportLayout(f).then(function(a){e.resolve(a.data)}),e.promise},getUserPrintSettingAsync:function(c,d){var e=a.defer(),f={};return c.printBasicData.userCd=d,f=c,b.printRequestParam.getUserPrintSetting(f).then(function(a){e.resolve(a.data)}),e.promise},getReportAsync:function(c){var d=a.defer(),e={};return e.reportCd=c,b.printRequestParam.getReport(e).then(function(a){d.resolve(a.data)}),d.promise},reprintAsync:function(c){var d=a.defer(),e={};return e=c,b.printRequestParam.reprint(e).then(function(a){d.resolve(a)}).catch(function(a){d.reject(a)}),d.promise},getPrintNumDefaultAsync:function(){var c=a.defer();return b.printRequestParam.getPrintNumDefault().then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)}),c.promise}}}]).controller("PrintRequestParam",["$scope","$modalInstance","$route","$filter","$location","$q","alertMessage","owsCommon","userInfo","printParam","ApiAccessor","OUTPUT_TYPE_HTML","OUTPUT_TYPE_PDF","OUTPUT_TYPE_PRINT","VIEW_MODE_PRINT","VIEW_MODE_REPRINT",function(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q){var r;a.changeReportLayout=function(){f.all([l.getLayoutPrintSettingAsync(a.viewModel.reportLayoutId),l.getUserPrintSettingAsync(r,j.userCd)]).then(function(b){for(i in b)0==i?a.layoutPrintSetting=b[i]:1==i&&(a.userPrintSetting=b[i])})},a.changePrinterGroup=function(){l.getPrinterListByPriterGroupIdAsync(a.viewModel.printerGroupId).then(function(b){a.printerList=b,a.printerAttrList=[],1==a.printerList.length&&(a.viewModel.printerId=a.printerList[0].printerId,a.changePrinter())})},a.changePrinter=function(){l.getPrinterAttributeListAsync(a.viewModel.printerId).then(function(b){a.printerAttrList=b,1==a.printerAttrList.length&&(a.viewModel.printerAttributeId=a.printerAttrList[0].printerAttributeId)})},a.close=function(){b.dismiss()},a.preview=function(){r.printBasicData.outputType=n,r.printBasicData.reportLayoutId=a.viewModel.reportLayoutId,b.close(r)},a.print=function(){r.printBasicData.outputType=o,r.printBasicData.reportLayoutId=a.viewModel.reportLayoutId,r.printBasicData.printNum=a.viewModel.printNum,r.printBasicData.sheetCollate=a.viewModel.sheetCollate,r.printBasicData.printerGroupId=a.viewModel.printerGroupId,r.printBasicData.printerId=a.viewModel.printerId,r.printBasicData.printerAttributeId=a.viewModel.printerAttributeId,b.close(r)},a.checkHasError=function(b){return 1==b||0==a.reportLayoutList.length},l.getPlainDtoAsync(p).then(function(b){r=b,r.printBasicData=k,a.viewModel={},f.all([l.getPrinterGroupListAsync(),l.getReportLayoutListAsync(r)]).then(function(b){for(i in b)0==i?a.printerGroupList=b[i]:1==i&&(a.reportLayoutList=b[i],a.reportLayoutList.length>1?(a.viewModel.isManyReportLayout=!0,a.viewModel.isOneReportLayout=!1):1==a.reportLayoutList.length?(a.viewModel.isManyReportLayout=!1,a.viewModel.isOneReportLayout=!0,a.viewModel.reportLayoutId=a.reportLayoutList[0].reportLayoutId,a.reportLayout={},a.reportLayout.reportLayoutId=a.reportLayoutList[0].reportLayoutId,a.reportLayout.reportLayoutNm=a.reportLayoutList[0].reportLayoutNm):g.setErrorMessageByCode("noUseableReportLayoutError"));var c=!1;reportForcePreview&&r.printBasicData.outputType==n&&(c=!0),0==a.printerGroupList.length||c?(a.viewModel.isShowPrintTab=!1,a.viewModel.isShowPreviewTab=!0):(a.viewModel.isShowPrintTab=!0,a.viewModel.isShowPreviewTab=!0,f.all([l.getClassAsync("SHEET_COLLATE"),l.getLayoutPrintSettingAsync(a.viewModel.reportLayoutId),l.getUserPrintSettingAsync(r,j.userCd),l.getPrintNumDefaultAsync()]).then(function(b){var c=null,d=null,e=null;for(k in b)0==k?a.collateList=b[k]:1==k?c=b[k].pLayoutPrintSetting:2==k?d=b[k].pUserPrintSetting:3==k&&(e=b[k].value);var f=null,g=null,i=null;if(null!=c.printerGroupId&&(f=c.printerGroupId),null!=d.printerGroupId&&(f=d.printerGroupId),null!=f){var j=!1;for(var k in a.printerGroupList)if(a.printerGroupList[k].printerGroupId==f){j=!0;break}0==j&&(f=null,g=null,i=null)}null==f&&1==a.printerGroupList.length&&(f=a.printerGroupList[0].printerGroupId),a.viewModel.printerGroupId=f,null!=a.viewModel.printerGroupId&&l.getPrinterListByPriterGroupIdAsync(a.viewModel.printerGroupId).then(function(b){if(a.printerList=b,a.printerAttrList=[],g=null,null!=c.printerId&&(g=c.printerId),null!=d.printerId&&(g=d.printerId),null==g&&1==a.printerList.length&&(g=a.printerList[0].printerId),null!=g){var e=!1;for(var f in a.printerList)if(a.printerList[f].printerId==g){e=!0;break}0==e&&(g=null,i=null),h.syncExec(function(){a.viewModel.printerId=g,l.getPrinterAttributeListAsync(a.viewModel.printerId).then(function(b){a.printerAttrList=b,h.syncExec(function(){var b;if(null!=c.printerAttributeId&&(b=c.printerAttributeId),null!=d.printerAttributeId&&(b=d.printerAttributeId),null==b&&1==a.printerAttrList.length&&(b=a.printerAttrList[0].printerAttributeId),null!=b){for(var f in a.printerAttributeList)if(a.printerAttributeList[f].printerAttributeId==b){e=!0;break}0==b&&(b=null),a.viewModel.printerAttributeId=b}})})})}}),null!=c.printNum&&(a.viewModel.printNum=c.printNum),null!=c.sheetCollate&&(a.viewModel.sheetCollate=c.sheetCollate),null!=d.reportLayoutId&&(a.viewModel.reportLayoutId=d.reportLayoutId),null==a.viewModel.printNum&&(a.viewModel.printNum=e),null==a.viewModel.sheetCollate&&(a.viewModel.sheetCollate=h.getDefaultValue(a.collateList))}))})})}]).controller("RePrintRequestParam",["$scope","$modalInstance","$route","$filter","$location","$q","alertMessage","owsCommon","userInfo","printRequest","ApiAccessor","OUTPUT_TYPE_HTML","OUTPUT_TYPE_PDF","OUTPUT_TYPE_PRINT","VIEW_MODE_PRINT","VIEW_MODE_REPRINT","PRINT_DATA_TYPE_JASPER_REPORT","PRINT_DATA_TYPE_PROTECT_PDF",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s;a.close=function(){b.dismiss()},a.changePrinterGroup=function(){k.getPrinterListByPriterGroupIdAsync(a.viewModel.printerGroupId).then(function(b){a.printerList=b,a.printerAttrList=[],1==a.printerList.length&&(a.viewModel.printerId=a.printerList[0].printerId,a.changePrinter())})},a.changePrinter=function(){k.getPrinterAttributeListAsync(a.viewModel.printerId).then(function(b){a.printerAttrList=b,1==a.printerAttrList.length&&(a.viewModel.printerAttributeId=a.printerAttrList[0].printerAttributeId)})},a.preview=function(){s.printBasicData.outputType=m,s.printBasicData.reportLayoutId=a.viewModel.reportLayoutId;var c=h.viewPdfBlankWindow();k.reprintAsync(s).then(function(a){c=h.viewPdf(c,a.output.downloadUrl),b.close(a)},function(a){c=h.viewPdfCloseWindow(c)})},a.print=function(){s.printBasicData.outputType=n,s.printBasicData.reportLayoutId=a.viewModel.reportLayoutId,s.printBasicData.printNum=a.viewModel.printNum,s.printBasicData.sheetCollate=a.viewModel.sheetCollate,s.printBasicData.printerId=a.viewModel.printerId,s.printBasicData.printerAttributeId=a.viewModel.printerAttributeId,s.printBasicData.printerGroupId=a.viewModel.printerGroupId,k.reprintAsync(s).then(function(a){b.close(a)})},a.checkHasError=function(a){return a},k.getPlainDtoAsync(p).then(function(b){return s=b,s.printBasicData.pPrintRequest=j,j.printDataType==r?(g.setErrorMessageByCode("printDataTypeNotAllowedRePrintError",j.bclassDtlByPrintDataType.vdict.dictNm),a.viewModel={},a.viewModel.isShowPrintTab=!1,a.viewModel.isShowPreviewTab=!1,void(a.viewModel.isShowCloseOnly=!0)):void k.getReportAsync(j.reportCd).then(function(b){s.printBasicData.reportId=b.pReport.reportId,a.viewModel={},a.viewModel.isShowCloseOnly=!1,f.all([k.getPrinterGroupListAsync(),k.getReportLayoutAsync(s.printBasicData.reportId,s.printBasicData.pPrintRequest.reportLayoutNm),k.getReportLayoutListAsync(s)]).then(function(b){for(d in b)if(0==d)a.printerGroupList=b[d];else if(1==d)null!=b[d].pReportLayout&&(a.viewModel.isManyReportLayout=!1,a.viewModel.isOneReportLayout=!0,a.viewModel.reportLayoutId=b[d].pReportLayout.reportLayoutId,a.reportLayout={},a.reportLayout.reportLayoutId=b[d].pReportLayout.reportLayoutId,a.reportLayout.reportLayoutNm=b[d].pReportLayout.reportLayoutNm);else if(2==d&&null==b[d].pReportLayout)if(a.reportLayoutList=b[d],a.reportLayoutList.length>1){a.viewModel.isManyReportLayout=!1,a.viewModel.isOneReportLayout=!0;var c=!1;for(var d in a.reportLayoutList)if(a.reportLayoutList[d].reportLayoutNm==j.reportLayoutNm){a.viewModel.reportLayoutId=a.reportLayoutList[d].reportLayoutId,a.reportLayout={},a.reportLayout.reportLayoutId=a.reportLayoutList[d].reportLayoutId,a.reportLayout.reportLayoutNm=a.reportLayoutList[d].reportLayoutNm,c=!0;break}c||g.setErrorMessageByCode("noUseableReportLayoutError")}else 1==a.reportLayoutList.length?(a.viewModel.isManyReportLayout=!1,a.viewModel.isOneReportLayout=!0,a.viewModel.reportLayoutId=a.reportLayoutList[0].reportLayoutId,a.reportLayout={},a.reportLayout.reportLayoutId=a.reportLayoutList[0].reportLayoutId,a.reportLayout.reportLayoutNm=a.reportLayoutList[0].reportLayoutNm):g.setErrorMessageByCode("noUseableReportLayoutError");0==a.printerGroupList.length?(a.viewModel.isShowPrintTab=!1,a.viewModel.isShowPreviewTab=!0):(a.viewModel.isShowPrintTab=!0,a.viewModel.isShowPreviewTab=!0,f.all([k.getClassAsync("SHEET_COLLATE")]).then(function(b){for(e in b)0==e&&(a.collateList=b[e]);var c=!1,d=j.printerGroupId;for(var e in a.printerGroupList)if(a.printerGroupList[e].printerGroupId==d){c=!0;break}0==c&&(d=null),null==d&&1==a.printerGroupList.length&&(d=a.printerGroupList[0].printerGroupId),a.viewModel.printerGroupId=d,a.viewModel.printNum=j.printNum,a.viewModel.sheetCollate=j.sheetCollate,k.getPrinterListByPriterGroupIdAsync(a.viewModel.printerGroupId).then(function(b){a.printerList=b,a.printerAttrList=[];for(e in a.printerList)if(a.printerList[e].printerNm==j.printerNm){a.viewModel.printerId=a.printerList[e].printerId;break}null==a.viewModel.printerId&&1==a.printerList.length&&(a.viewModel.printerId=a.printerList[0].printerId),k.getPrinterAttributeListAsync(a.viewModel.printerId).then(function(b){a.printerAttrList=b;for(e in a.printerAttrList)if(a.printerAttrList[e].trayNm==j.trayNm){a.viewModel.printerAttributeId=a.printerAttrList[e].printerAttributeId;break}null==a.viewModel.printerAttributeId&&1==a.printerAttrList.length&&(a.viewModel.printerAttributeId=a.printerAttrList[0].printerAttributeId)})})}))})})})}]),angular.module("oneslogiWeb.ReportLayoutUpload",[]).factory("ReportLayoutUploadApi",["AngularAPIClient",function(a){return{reportMaintenance:a.make([["query","GET","resources/reportmaintenance/getreport"]]),reportLayoutUpload:a.make([["initNew","GET","resources/reportLayoutUpload/initNew"],["getReportList","GET","resources/reportLayoutUpload/getReportList"],["layoutFileUpload","POST","resources/reportLayoutUpload/layoutFileUpload"],["setLayoutData","GET","resources/reportLayoutUpload/setLayoutData"]])}}]).controller("ReportLayoutUpload",["$scope","ReportLayoutUploadApi","$route","$q","userInfo","$rootScope","statusInfo",function(a,b,c,d,e,f,g){var h=function(){var c=d.defer();return a.receivePlan=[],b.reportLayoutUpload.initNew({}).then(function(b){a.layoutUpload=b.fileDetail,c.resolve()}).catch(function(a,b){c.reject()}),c.promise};h();var i=function(){var c=d.defer(),e={};return b.reportLayoutUpload.getReportList(e).then(function(b){a.reportList=b.data,c.resolve()}).catch(function(a,b){c.reject()}),c.promise};a.initReport=function(){i()},a.initReport(),a.gridOptions={data:"reportmaintenance",columnDefs:"reportmaintenance",enablePaging:!1,showFooter:!1,showSelectionCheckbox:!0,enableCellSelection:!1,enableRowSelection:!0,enableCellEditOnFocus:!1,enableColumnResize:!0,multiSelect:!0,jqueryUITheme:!1,showGroupPanel:!1};var j={};j.data={},j.data.input={},j.data.input.gridModelNm="reportLayoutUpload",j.data.input.columnDefs=a.gridOptions,a.fileOptions={url:"resources/reportLayoutUpload/layoutFileUpload",formData:j},a.beforeUpload=function(){a.fileOptions.url="resources/reportLayoutUpload/layoutFileUpload?type=main"},a.beforeUploadSub=function(){a.fileOptions.url="resources/reportLayoutUpload/layoutFileUpload?type=sub"},a.dataDownloadMain=function(b,c){a.layoutUpload.reportLayoutNm=c.originalFiles[0].name},a.dataDownloadSub=function(b,c){a.layoutUpload.subrepLayoutNm=c.originalFiles[0].name},a.register=function(){var c={};c.fileDetail=a.layoutUpload,b.reportLayoutUpload.setLayoutData(c).then(function(a){g.isSuccessAndShowMessage(a,"inputform")&&h()}).catch(function(a,b){})}}]),angular.module("oneslogiWeb.base.common.UserAutoPrintSettingList",["ui.bootstrap"]).constant("SCREEN_CD_USER_AUTO_PRINT_SETTING_LIST","UserAutoPrintSettingList").constant("CTRL_NM_USER_AUTO_PRINT_SETTING_LIST","UserAutoPrintSettingListCtrl").constant("FORM_NM_USER_AUTO_PRINT_SETTING_LIST","userautoprintsettinglistform").constant("TEMPLATE_URL_USER_AUTO_PRINT_SETTING_LIST","base/partials/common/UserAutoPrintSettingList.html").factory("UserAutoPrintSettingListDialog",["$modal","alertMessage","SCREEN_CD_USER_AUTO_PRINT_SETTING_LIST","CTRL_NM_USER_AUTO_PRINT_SETTING_LIST","TEMPLATE_URL_USER_AUTO_PRINT_SETTING_LIST",function(a,b,c,d,e){var f;return{show:function(g){var h=document.activeElement;f=a.open({templateUrl:e,backdrop:"static",controller:d,resolve:{getScreen:["owsScreen",function(a){return new a.getData(c,!0)}],getItem:["owsItem",function(a){return new a.getData(c)}],getColumn:["owsColumn",function(a){return new a.getData(c)}],items:function(){return g}},windowClass:"app-modal-window",beforeClose:function(){b.removeModalAlert(c),h.focus()},beforeDismiss:function(){b.removeModalAlert(c),h.focus()},setCloseEvent:function(a){f.result.finally(a)}}),f.opened.then(function(){b.addModalAlert(f,c)})}}}]).factory("UserAutoPrintSettingListApi",["AngularAPIClient",function(a){return{dropdownList:a.make([["printerGroup","GET","resources/common/printerGroup/selectByVariableAttributes"]]),userAutoPrintSettingList:a.make([["getPrinterGroupList","GET","resources/common/printerGroup/selectByVariableAttributes"],["getPrinterList","GET","resources/common/userAutoPrintSettingList/getPrinterList"],["getPrinterAttributeList","GET","resources/common/userAutoPrintSettingList/getPrinterAttributeList"],["initSearch","GET","resources/common/userAutoPrintSettingList/initSearch"],["register","POST","resources/common/userAutoPrintSettingList/register"]])}}]).controller("UserAutoPrintSettingListCtrl",["$scope","$route","$filter","$location","$q","$window","$modalInstance","alertMessage","directiveControl","gridDirectiveControl","optionMessageControl","gridOptionMessageControl","owsHistory","owsCommon","userInfo","statusInfo","UserAutoPrintSettingListApi","items","UserAutoPrintSettingEditDialog","FORM_NM_USER_AUTO_PRINT_SETTING_LIST",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){a.userAutoPrintSettingListGridCols=[{field:"reportNm",displayName:"帳票名"},{field:"reportLayoutNm",displayName:"レイアウト名"},{field:"attribute1",displayName:"属性１"},{field:"attribute2",displayName:"属性２"},{field:"attribute3",displayName:"属性３"},{field:"attribute4",displayName:"属性４"},{field:"attribute5",displayName:"属性５"},{field:"printerGroupNm",displayName:"プリンタグループ"},{field:"printerNm",displayName:"プリンタ"},{field:"trayNm",displayName:"トレイ"}],a.initScreen=function(){1==r.mode?a.title=c("owfMessage")("terminalAutoPrintSettingList"):a.title=c("owfMessage")("userAutoPrintSettingList"),a.isopen=!0,a.gridOptions=n.mergeSingleSelectGridOptions({data:"userAutoPrintSettingList",columnDefs:"userAutoPrintSettingListGridCols"}),a.gridSelectOptions={printerGroupId:{key:"printerGroupId",value:"printerGroupNm",listModel:"printerGroupList"},printerId:{key:"printerId",value:"printerNm",listModel:"printerList"},printerAttributeId:{key:"printerAttributeId",value:"printerAttributeNm",listModel:"printerAttributeList"}},a.gridEventOptions={printerGroupId:{"ng-change":{eventFunction:"setSelectionOn(row.rowIndex)"}},printerId:{"ng-change":{eventFunction:"setSelectionOn(row.rowIndex)"}},printerAttributeId:{"ng-change":{eventFunction:"setSelectionOn(row.rowIndex)"}}},a.initScreenHttp()},a.setSelectionOn=function(b){a.gridOptions.gridApi.selection.selectRowByVisibleIndex(b)},a.initScreenHttp=function(){e.all([a.deferredGetPrinterGroup()]).then(function(b){return a.deferredGetInitData()})},a.deferredGetPrinterGroup=function(){var b=e.defer(),c={};return q.dropdownList.printerGroup(c).then(function(c){a.printerGroupList=c.data,b.resolve()}),b.promise},a.deferredGetInitData=function(){var b=e.defer(),c={mode:r.mode};return q.userAutoPrintSettingList.initSearch(c).then(function(c){return p.isSuccessAndShowMessage(c,"userAutoPrintSettingListForm")?(a.userAutoPrintSettingList=c.data,m.hasState()&&(a.head=m.popState(),a.search()),$("#close").focus(),void b.resolve()):void b.reject()}),b.promise},a.gridDblClick=function(a){n.syncButtonExec("update",a)},a.getClassForRow=function(a){return"1"==a.entity.delFlg?"baselegendred":""},a.update=function(){var b=a.gridOptions.gridApi.selection.getSelectedRows()[0];b.mode=r.mode,s.show(b,function(){var b=e.defer();return a.initScreenHttp(),b.resolve(),b.promise})},a.modalClose=function(){g.dismiss()},a.initScreen()}]),angular.module("oneslogiWeb.base.common.UserAutoPrintSettingEdit",["ui.bootstrap"]).constant("SCREEN_CD_USER_AUTO_PRINT_SETTING_EDIT","UserAutoPrintSettingEdit").constant("CTRL_NM_USER_AUTO_PRINT_SETTING_EDIT","UserAutoPrintSettingEditCtrl").constant("FORM_NM_USER_AUTO_PRINT_SETTING_EDIT","userautoprintsettingeditform").constant("TEMPLATE_URL_USER_AUTO_PRINT_SETTING_EDIT","base/partials/common/UserAutoPrintSettingEdit.html").factory("UserAutoPrintSettingEditDialog",["$modal","alertMessage","SCREEN_CD_USER_AUTO_PRINT_SETTING_EDIT","CTRL_NM_USER_AUTO_PRINT_SETTING_EDIT","TEMPLATE_URL_USER_AUTO_PRINT_SETTING_EDIT",function(a,b,c,d,e){var f;return{show:function(g,h){var i=document.activeElement;f=a.open({templateUrl:e,backdrop:"static",controller:d,resolve:{getScreen:["owsScreen",function(a){return new a.getData(c,!0)}],getItem:["owsItem",function(a){return new a.getData(c)}],getColumn:["owsColumn",function(a){return new a.getData(c)}],items:function(){return g},onUpdateSuccessFunction:function(){return h}},windowClass:"app-modal-window",beforeClose:function(){b.removeModalAlert(c),i.focus()},beforeDismiss:function(){b.removeModalAlert(c),i.focus()},setCloseEvent:function(a){f.result.finally(a)}}),f.opened.then(function(){b.addModalAlert(f,c)}),f.result.then(function(){h()})}}}]).factory("UserAutoPrintSettingEditApi",["AngularAPIClient",function(a){return{dropdownList:a.make([["getPrinterGroupList","GET","resources/common/printerGroup/selectByVariableAttributes"],["getPrinterList","GET","resources/common/printer/selectByPrinterGroupId"],["getPrinterAttributeList","GET","resources/common/printerAttribute/selectByPrinterId"]]),userAutoPrintSettingEdit:a.make([["initUpdate","GET","resources/common/userAutoPrintSettingEdit/initUpdate"],["inputCheck","POST","resources/common/userAutoPrintSettingEdit/inputCheck"],["update","POST","resources/common/userAutoPrintSettingEdit/update"],["updateTerminal","POST","resources/common/userAutoPrintSettingEdit/updateTerminal"]])}}]).controller("UserAutoPrintSettingEditCtrl",["$scope","$route","$filter","$location","$q","$window","$modalInstance","alertMessage","directiveControl","gridDirectiveControl","optionMessageControl","gridOptionMessageControl","owsHistory","owsCommon","userInfo","statusInfo","UserAutoPrintSettingEditApi","items","onUpdateSuccessFunction","FORM_NM_USER_AUTO_PRINT_SETTING_EDIT",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){a.initScreen=function(){var b=e.defer();1==r.mode?a.title=c("owfMessage")("terminalAutoPrintSettingEdit"):a.title=c("owfMessage")("userAutoPrintSettingEdit");var d={reportLayoutId:r.reportLayoutId,mode:r.mode};q.userAutoPrintSettingEdit.initUpdate(d).then(function(c){return p.isSuccessAndShowMessage(c,t)?(a.reportLayout={},a.reportLayout=c.reportLayout,a.userAutoPrintSetting={},a.userAutoPrintSetting=c.userAutoPrintSetting,q.dropdownList.getPrinterGroupList().then(function(c){if(!p.isSuccessAndShowMessage(c,t))return void b.reject();if(a.printerGroupList=c.data,null!=a.userAutoPrintSetting.printerGroupId){var d={};d.printerGroupId=a.userAutoPrintSetting.printerGroupId,q.dropdownList.getPrinterList(d).then(function(c){if(!p.isSuccessAndShowMessage(c,t))return void b.reject();if(a.printerList=c.data,null!=a.userAutoPrintSetting.printerId){var d={};d.printerId=a.userAutoPrintSetting.printerId,q.dropdownList.getPrinterAttributeList(d).then(function(c){return p.isSuccessAndShowMessage(c,t)?void(a.printerAttributeList=c.data):void b.reject()})}})}}),$("#printerGroupId").focus(),void b.resolve()):void b.reject()})},a.changePrinterGroup=function(){if(null!=a.userAutoPrintSetting.printerGroupId&&""!=a.userAutoPrintSetting.printerGroupId){var b={};b.printerGroupId=a.userAutoPrintSetting.printerGroupId,q.dropdownList.getPrinterList(b).then(function(b){p.isSuccessAndShowMessage(b,t)&&(a.printerList=b.data,a.printerAttributeList={})})}else a.userAutoPrintSetting.printerId=null,a.userAutoPrintSetting.printerAttributeId=null,a.printerList={},a.printerAttributeList={}},a.changePrinter=function(){if(null!=a.userAutoPrintSetting.printerId&&""!=a.userAutoPrintSetting.printerId){var b={};b.printerId=a.userAutoPrintSetting.printerId,q.dropdownList.getPrinterAttributeList(b).then(function(b){p.isSuccessAndShowMessage(b,t)&&(a.printerAttributeList=b.data)})}else a.userAutoPrintSetting.printerAttributeId=null,a.printerAttributeList={}},a.getClassForRow=function(a){return"1"==a.entity.delFlg?"baselegendred":""},a.update=function(b){k.hideAll(a);var c={};c.userAutoPrintSetting={},c.reportLayout={},c.userAutoPrintSetting=a.userAutoPrintSetting,c.reportLayout=a.reportLayout,q.userAutoPrintSettingEdit.inputCheck(c).then(function(a){if(p.isSuccessAndShowMessage(a,t)){var b;b=1==r.mode?q.userAutoPrintSettingEdit.updateTerminal:q.userAutoPrintSettingEdit.update,b(c).then(function(a){p.isSuccessAndShowMessage(a,t)&&(n.viewAlert(a.status.messageCode,a.status.messageReplaceValue),s().then(function(){g.dismiss()}))})}})},a.modalClose=function(){g.dismiss()},a.initScreen()}]),angular.module("oneslogiWeb.base.common.TerminalSetting",["ui.bootstrap","ngCookies"]).factory("TerminalSettingDialog",["$modal","alertMessage",function(a,b){var c;return{show:function(d){var e="TerminalSetting",f="TerminalSetting",g="base/partials/common/TerminalSetting.html",h=document.activeElement;c=a.open({templateUrl:g,backdrop:"static",controller:f,resolve:{getScreen:["owsScreen",function(a){return new a.getData(e,!0)}],getItem:["owsItem",function(a){
return new a.getData(e)}],getColumn:["owsColumn",function(a){return new a.getData(e)}],items:function(){return d}},windowClass:"app-modal-window",beforeClose:function(){b.removeModalAlert(e),h.focus()},beforeDismiss:function(){b.removeModalAlert(e),h.focus()},setCloseEvent:function(a){c.result.finally(a)}}),c.opened.then(function(){b.addModalAlert(c,e)})}}}]).factory("terminalSettingApi",["AngularAPIClient",function(a){return{terminalSetting:a.make([["searchUnsetOnly","GET","resources/base/common/terminalSetting/searchUnsetOnly"],["searchAll","GET","resources/base/common/terminalSetting/searchAll"],["register","POST","resources/base/common/terminalSetting/register"],["release","POST","resources/base/common/terminalSetting/release"]])}}]).controller("TerminalSetting",["$scope","$route","$filter","$location","$q","$cookies","alertMessage","directiveControl","gridDirectiveControl","optionMessageControl","$modalInstance","owsCommon","userInfo","statusInfo","owsSession","owsTerminal","terminalSettingApi",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.terminalSettingCols=[{field:"terminalCd",displayName:"端末CD"},{field:"terminalNm",displayName:"端末名"}],a.initScreen=function(){a.gridOptions=l.mergeSingleSelectGridOptions({data:"terminalList",columnDefs:"terminalSettingCols"}),a.initScreenHttp()},a.initScreenHttp=function(){e.all([]).then(function(b){return a.deferredGetInitData()})},a.deferredGetInitData=function(){var b=e.defer();return q.terminalSetting.searchUnsetOnly().then(function(c){return n.isSuccessAndShowMessage(c,"inputform")?(a.head={terminalCd:p.getTerminalCd(),terminalNm:p.getTerminalNm()},a.preTerminalCd=a.head.terminalCd,a.searchParam={unsetOnly:1},a.terminalList=c.data.list,void b.resolve()):void b.reject()}),b.promise},a.search=function(){var b,c=e.defer();return b="0"==a.searchParam.unsetOnly?q.terminalSetting.searchAll:q.terminalSetting.searchUnsetOnly,b().then(function(b){return n.isSuccessAndShowMessage(b,"inputform")?(a.terminalList=b.data.list,void c.resolve()):void c.reject()}),c.promise},a.register=function(){j.hideAll(a);var b,c=a.gridOptions.gridApi.selection.getSelectedRows()[0];if(b=c.uuid&&c.terminalCd!=a.head.terminalCd?"termialAlreadySetConfirmation":"processExecuteConfirmation",l.viewConfirm(b)){a.registerUuid=r();var d={};d.data={},d.data.selectDto=c,d.data.selectDto.uuid=a.registerUuid,q.terminalSetting.register(d).then(function(b){if(!n.isSuccess(b))return void n.isSuccessAndShowMessage(b,"inputform");var c=new Date;c.setDate(c.getDate()+365),f.put("x-oneslogi-terminal-id",d.data.selectDto.uuid,{expires:c}),a.head={terminalCd:d.data.selectDto.terminalCd,terminalNm:d.data.selectDto.terminalNm},p.clear().then(function(){return o.setData()}).then(function(){return p.getData()}).then(function(){l.viewAlert(b.status.messageCode,b.status.messageReplaceValue),k.dismiss()})})}},a.release=function(){if(j.hideAll(a),l.viewConfirm("processExecuteConfirmation")){var b={};q.terminalSetting.release(b).then(function(b){n.isSuccessAndShowMessage(b,"inputform")&&(f.remove("x-oneslogi-terminal-id"),a.head={terminalCd:"",terminalNm:""},p.clear().then(function(){a.search()}))})}},a.modalClose=function(){k.dismiss()},a.getClassForRow=function(b){return b.entity.terminalCd==a.head.terminalCd?"baselegendwhite":b.entity.terminalCd==a.preTerminalCd?"baselegendwhite":b.entity.uuid&&b.entity.uuid!=a.registerUuid?"baselegenddarkgray":"baselegendwhite"};var r=function(){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),b=0,c=a.length;b<c;b++)switch(a[b]){case"x":a[b]=Math.floor(16*Math.random()).toString(16);break;case"y":a[b]=(Math.floor(4*Math.random())+8).toString(16)}return a.join("")};a.initScreen()}]);