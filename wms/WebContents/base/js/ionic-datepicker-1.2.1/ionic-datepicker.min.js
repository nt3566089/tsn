/*
* このソースは基盤ソースです。変更は行わないで下さい。
*/


/*
* The license and copyright of this source are documented in the "LICENSE" file in the same folder.
*/


angular.module("ionic-datepicker",["ionic","ionic-datepicker.service","ionic-datepicker.provider"]),angular.module("ionic-datepicker.provider",[]).provider("ionicDatePicker",function(){var a={setLabel:"Set",todayLabel:"Today",closeLabel:"Close",inputDate:new Date,mondayFirst:!0,weeksList:["S","M","T","W","T","F","S"],monthsList:["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"],templateType:"popup",showTodayButton:!1,closeOnSelect:!1,disableWeekdays:[]};this.configDatePicker=function(b){angular.extend(a,b)},this.$get=["$rootScope","$ionicPopup","$ionicModal","IonicDatepickerService",function(b,c,d,e){function f(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function g(a){a.disabledDates&&0!==a.disabledDates.length?(m.disabledDates=[],angular.forEach(a.disabledDates,function(a,b){a=f(new Date(a)),m.disabledDates.push(a.getTime())})):m.disabledDates=[]}function h(a){a=f(a),m.currentDate=angular.copy(a);var b=new Date(a.getFullYear(),a.getMonth(),1).getDate(),c=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();m.monthsList=[],m.mainObj.monthsList&&12===m.mainObj.monthsList.length?m.monthsList=m.mainObj.monthsList:m.monthsList=e.monthsList,m.yearsList=e.getYearsList(m.mainObj.from,m.mainObj.to),m.dayList=[];var d,g;m.firstDayEpoch=f(new Date(a.getFullYear(),a.getMonth(),b)).getTime(),m.lastDayEpoch=f(new Date(a.getFullYear(),a.getMonth(),c)).getTime();for(var h=b;h<=c;h++)d=new Date(a.getFullYear(),a.getMonth(),h),g=d.getTime()<m.fromDate||d.getTime()>m.toDate||m.mainObj.disableWeekdays.indexOf(d.getDay())>=0,m.dayList.push({date:d.getDate(),month:d.getMonth(),year:d.getFullYear(),day:d.getDay(),epoch:d.getTime(),disabled:g});var i=m.dayList[0].day-m.mainObj.mondayFirst;i=i<0?6:i;for(var j=0;j<i;j++)m.dayList.unshift({});m.rows=[0,7,14,21,28,35],m.cols=[0,1,2,3,4,5,6],m.data.currentMonth=m.mainObj.monthsList[a.getMonth()],m.data.currentYear=a.getFullYear(),m.data.currentMonthSelected=angular.copy(m.data.currentMonth),m.currentYearSelected=angular.copy(m.data.currentYear),m.numColumns=7}function i(a){m.mainObj=angular.copy(a),m.selctedDateEpoch=f(m.mainObj.inputDate).getTime(),m.mainObj.weeksList&&7===m.mainObj.weeksList.length?m.weeksList=m.mainObj.weeksList:m.weeksList=["S","M","T","W","T","F","S"],m.mainObj.mondayFirst&&m.weeksList.push(m.mainObj.weeksList.shift()),m.disableWeekdays=m.mainObj.disableWeekdays,h(m.mainObj.inputDate),g(m.mainObj)}function j(){m.modal.show()}function k(){m.modal.hide()}var l={},m=b.$new();return m.today=f(new Date).getTime(),m.disabledDates=[],m.data={},m.prevMonth=function(){1===m.currentDate.getMonth()&&m.currentDate.setFullYear(m.currentDate.getFullYear()),m.currentDate.setMonth(m.currentDate.getMonth()-1),m.data.currentMonth=m.mainObj.monthsList[m.currentDate.getMonth()],m.data.currentYear=m.currentDate.getFullYear(),h(m.currentDate)},m.nextMonth=function(){11===m.currentDate.getMonth()&&m.currentDate.setFullYear(m.currentDate.getFullYear()),m.currentDate.setDate(1),m.currentDate.setMonth(m.currentDate.getMonth()+1),m.data.currentMonth=m.mainObj.monthsList[m.currentDate.getMonth()],m.data.currentYear=m.currentDate.getFullYear(),h(m.currentDate)},m.dateSelected=function(a){a&&0!==Object.keys(a).length&&(m.selctedDateEpoch=a.epoch,m.mainObj.closeOnSelect&&(m.mainObj.callback(m.selctedDateEpoch),"popup"==m.mainObj.templateType.toLowerCase()?m.popup.close():k()))},m.setIonicDatePickerTodayDate=function(){var a=new Date;h(new Date),m.selctedDateEpoch=f(a).getTime(),m.mainObj.closeOnSelect&&(m.mainObj.callback(m.selctedDateEpoch),k())},m.setIonicDatePickerDate=function(){m.mainObj.callback(m.selctedDateEpoch),k()},m.monthChanged=function(a){var b=m.monthsList.indexOf(a);m.currentDate.setMonth(b),h(m.currentDate)},m.yearChanged=function(a){m.currentDate.setFullYear(a),h(m.currentDate)},d.fromTemplateUrl("base/partials/ionic-datepicker-1.2.1/ionic-datepicker-modal.html",{scope:m,animation:"slide-in-up"}).then(function(a){m.modal=a}),m.$on("$destroy",function(){m.modal.remove()}),m.closeIonicDatePickerModal=function(){k()},l.openDatePicker=function(b){var d=[];delete m.fromDate,delete m.toDate,m.mainObj=angular.extend({},a,b),m.mainObj.from&&(m.fromDate=f(new Date(m.mainObj.from)).getTime()),m.mainObj.to&&(m.toDate=f(new Date(m.mainObj.to)).getTime()),b.disableWeekdays&&a.disableWeekdays&&(m.mainObj.disableWeekdays=b.disableWeekdays.concat(a.disableWeekdays)),i(m.mainObj),m.mainObj.closeOnSelect||(d=[{text:m.mainObj.setLabel,type:"button_set",onTap:function(a){m.mainObj.callback(m.selctedDateEpoch)}}]),m.mainObj.showTodayButton&&d.push({text:m.mainObj.todayLabel,type:"button_today",onTap:function(a){var b=new Date;h(new Date),m.selctedDateEpoch=f(b).getTime(),m.mainObj.closeOnSelect||a.preventDefault()}}),d.push({text:m.mainObj.closeLabel,type:"button_close",onTap:function(a){console.log("ionic-datepicker popup closed.")}}),"popup"==m.mainObj.templateType.toLowerCase()?m.popup=c.show({templateUrl:"base/partials/ionic-datepicker-1.2.1/ionic-datepicker-popup.html",scope:m,cssClass:"ionic_datepicker_popup",buttons:d}):j()},l}]}),angular.module("ionic-datepicker.service",[]).service("IonicDatepickerService",function(){this.monthsList=["January","February","March","April","May","June","July","August","September","October","November","December"],this.getYearsList=function(a,b){var c=[],d=1900,e=2100;d=a?new Date(a).getFullYear():d,e=b?new Date(b).getFullYear():e;for(var f=d;f<=e;f++)c.push(f);return c}});